!function(t,i){if("object"==typeof exports&&"object"==typeof module)module.exports=i();else if("function"==typeof define&&define.amd)define([],i);else{var s=i();for(var e in s)("object"==typeof exports?exports:t)[e]=s[e]}}(this,(function(){return function(){"use strict";var t={};return function(){var i=t;Object.defineProperty(i,"__esModule",{value:!0}),i.TWallpaper=void 0;var s=[0,.25,.5,.75,1,1.5,2,2.5,3,3.5,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,18.3,18.6,18.9,19.2,19.5,19.8,20.1,20.4,20.7,21,21.3,21.6,21.9,22.2,22.5,22.8,23.1,23.4,23.7,24,24.3,24.6,24.9,25.2,25.5,25.8,26.1,26.3,26.4,26.5,26.6,26.7,26.8,26.9,27],e=[{x:.8,y:.1},{x:.6,y:.2},{x:.35,y:.25},{x:.25,y:.6},{x:.2,y:.9},{x:.4,y:.8},{x:.65,y:.75},{x:.75,y:.4}],a=function(){function t(t,i){this.width=50,this.height=50,this.phase=0,this.tail=0,this.scrollTails=50,this.scrollDelta=0,this.scrollTicking=!1,this.frames=[],this.rgb=[],this.curve=s,this.positions=e,this.phases=e.length,this.init(Object.assign({container:t},i))}var i=t.prototype;return i.hexToRgb=function(t){var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16)}:null},i.getPositions=function(t){for(var i=[].concat(this.positions);t>0;)i.push(i.shift()),t--;for(var s=[],e=0;e<i.length;e+=2)s.push(i[e]);return s},i.curPosition=function(t,i){i%=this.tails;var s=this.getPositions(t%this.phases);if(i){var e=this.getPositions(++t%this.phases),a=(e[0].x-s[0].x)/this.tails,h=(e[0].y-s[0].y)/this.tails,n=(e[1].x-s[1].x)/this.tails,r=(e[1].y-s[1].y)/this.tails,o=(e[2].x-s[2].x)/this.tails,l=(e[2].y-s[2].y)/this.tails,c=(e[3].x-s[3].x)/this.tails,u=(e[3].y-s[3].y)/this.tails;return[{x:s[0].x+a*i,y:s[0].y+h*i},{x:s[1].x+n*i,y:s[1].y+r*i},{x:s[2].x+o*i,y:s[2].y+l*i},{x:s[3].x+c*i,y:s[3].y+u*i}]}return s},i.changeTail=function(t){for(this.tail+=t;this.tail>=this.tails;)this.tail-=this.tails,this.phase++,this.phase>=this.phases&&(this.phase-=this.phases);for(;this.tail<0;)this.tail+=this.tails,this.phase--,this.phase<0&&(this.phase+=this.phases)},i.onWheel=function(t){var i=this;this.interval||(this.scrollDelta+=t.deltaY,this.scrollTicking||(requestAnimationFrame((function(){return i.drawOnWheel()})),this.scrollTicking=!0))},i.drawOnWheel=function(){var t=this.scrollDelta/this.scrollTails;if(this.scrollDelta%=this.scrollTails,t=t>0?Math.floor(t):Math.ceil(t)){this.changeTail(t);var i=this.curPosition(this.phase,this.tail);this.drawGradient(i)}this.scrollTicking=!1},i.drawNextPositionAnimated=function(t){if(this.frames.length>0){var i=this.frames.shift();this.drawImageData(i)}else clearInterval(this.interval),this.interval=null,t&&t()},i.getGradientImageData=function(t){for(var i=this.hctx.createImageData(this.width,this.height),s=i.data,e=0,a=0;a<this.height;a++)for(var h=a/this.height-.5,n=h*h,r=0;r<this.width;r++){for(var o=r/this.width-.5,l=.35*Math.sqrt(o*o+n),c=l*l*.8*8,u=Math.sin(c),d=Math.cos(c),f=Math.max(0,Math.min(1,.5+o*d-h*u)),m=Math.max(0,Math.min(1,.5+o*u+h*d)),p=0,v=0,x=0,g=0,y=0;y<this.rgb.length;y++){var w=f-t[y].x,P=m-t[y].y,b=Math.max(0,.9-Math.sqrt(w*w+P*P));p+=b*=b*b*b,v+=b*this.rgb[y].r/255,x+=b*this.rgb[y].g/255,g+=b*this.rgb[y].b/255}s[e++]=v/p*255,s[e++]=x/p*255,s[e++]=g/p*255,s[e++]=255}return i},i.drawImageData=function(t){this.hctx.putImageData(t,0,0),this.ctx.drawImage(this.hc,0,0,this.width,this.height)},i.drawGradient=function(t){this.drawImageData(this.getGradientImageData(t))},i.requestAnimate=function(){var t=this;this.raf=requestAnimationFrame((function(){return t.doAnimate()}))},i.doAnimate=function(){var t=+Date.now();if(t-this.timestamp<this.frametime)return this.requestAnimate();this.timestamp=t,this.changeTail(1);var i=this.curPosition(this.phase,this.tail);this.drawGradient(i),this.requestAnimate()},i.init=function(t){var i=t.fps,s=t.tails,e=t.colors,a=t.pattern,h=t.animate,n=t.container,r=t.scrollAnimate;if(this.container=null!=n?n:this.container,!this.container||!e.length)throw new Error("Container or colors do not exist");this.dispose(),this.hc||(this.hc=document.createElement("canvas"),this.hc.width=this.width,this.hc.height=this.height,this.hctx=this.hc.getContext("2d")),this.canvas=document.createElement("canvas"),this.canvas.classList.add("tw-canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.ctx=this.canvas.getContext("2d"),this.container.appendChild(this.canvas),a&&(this.pattern=document.createElement("div"),this.pattern.classList.add("tw-pattern"),this.updatePattern(a),this.container.appendChild(this.pattern)),this.animate(h),this.updateTails(s),this.updateColors(e),this.updateFrametime(i),this.scrollAnimate(r)},i.dispose=function(){var t;this.hc&&(clearInterval(this.interval),this.interval=null,this.animate(!1),this.canvas.remove(),null===(t=this.pattern)||void 0===t||t.remove(),this.hc.remove(),this.frames=[])},i.updateTails=function(t){void 0===t&&(t=90),t>0&&(this.tails=t)},i.updateFrametime=function(t){void 0===t&&(t=30),this.frametime=1e3/t},i.updatePattern=function(t){if(this.pattern&&this.container){var i=t.mask,s=t.blur,e=t.size,a=t.image,h=t.opacity,n=t.background,r=this.container.style;r.setProperty("--tw-size",null!=e?e:"auto"),r.setProperty("--tw-opacity",""+(null!=h?h:.5)),r.setProperty("--tw-blur",(null!=s?s:0)+"px"),r.setProperty("--tw-background",null!=n?n:"#000"),a?r.setProperty("--tw-image","url("+a+")"):r.removeProperty("--tw-image"),i?this.canvas.classList.add("tw-mask"):this.canvas.classList.remove("tw-mask")}},i.updateColors=function(t){var i=this,s=t.reduce((function(t,s){var e=i.hexToRgb(s);return e&&t.push(e),t}),[]);if(!(s.length>1&&s.length<5))throw new Error("Required from 1-4 hex colors");this.rgb=s},i.toNextPosition=function(t){var i=this;clearInterval(this.interval),this.animate(!1),this.frames=[];var s=this.getPositions(this.phase%this.phases);this.phase++;for(var e=this.getPositions(this.phase%this.phases),a=27,h=(e[0].x-s[0].x)/a,n=(e[0].y-s[0].y)/a,r=(e[1].x-s[1].x)/a,o=(e[1].y-s[1].y)/a,l=(e[2].x-s[2].x)/a,c=(e[2].y-s[2].y)/a,u=(e[3].x-s[3].x)/a,d=(e[3].y-s[3].y)/a,f=0;f<this.curve.length;f++){var m=[{x:s[0].x+h*this.curve[f],y:s[0].y+n*this.curve[f]},{x:s[1].x+r*this.curve[f],y:s[1].y+o*this.curve[f]},{x:s[2].x+l*this.curve[f],y:s[2].y+c*this.curve[f]},{x:s[3].x+u*this.curve[f],y:s[3].y+d*this.curve[f]}];this.frames.push(this.getGradientImageData(m))}this.interval=setInterval((function(){i.drawNextPositionAnimated(t)}),this.frametime)},i.animate=function(t){void 0===t&&(t=!0),t?this.doAnimate():this.raf&&(cancelAnimationFrame(this.raf),this.raf=null)},i.scrollAnimate=function(t){var i=this;void 0===t&&(t=!1),document.onwheel=t?function(t){return i.onWheel(t)}:null},t}();i.TWallpaper=a}(),t}()}));