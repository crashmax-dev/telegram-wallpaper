{"mappings":"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","sources":["node_modules/tweakpane/dist/tweakpane.js","src/telegram-wallpaper.ts","src/index.ts"],"sourcesContent":["/*! Tweakpane 3.0.7 (c) 2016 cocopon, licensed under the MIT license. */\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.Tweakpane = {}));\n})(this, (function (exports) { 'use strict';\n\n    /***\n     * A simple semantic versioning perser.\n     */\n    class Semver {\n        /**\n         * @hidden\n         */\n        constructor(text) {\n            const [core, prerelease] = text.split('-');\n            const coreComps = core.split('.');\n            this.major = parseInt(coreComps[0], 10);\n            this.minor = parseInt(coreComps[1], 10);\n            this.patch = parseInt(coreComps[2], 10);\n            this.prerelease = prerelease !== null && prerelease !== void 0 ? prerelease : null;\n        }\n        toString() {\n            const core = [this.major, this.minor, this.patch].join('.');\n            return this.prerelease !== null ? [core, this.prerelease].join('-') : core;\n        }\n    }\n\n    class BladeApi {\n        constructor(controller) {\n            this.controller_ = controller;\n        }\n        get disabled() {\n            return this.controller_.viewProps.get('disabled');\n        }\n        set disabled(disabled) {\n            this.controller_.viewProps.set('disabled', disabled);\n        }\n        get hidden() {\n            return this.controller_.viewProps.get('hidden');\n        }\n        set hidden(hidden) {\n            this.controller_.viewProps.set('hidden', hidden);\n        }\n        dispose() {\n            this.controller_.viewProps.set('disposed', true);\n        }\n    }\n\n    class TpEvent {\n        constructor(target) {\n            this.target = target;\n        }\n    }\n    class TpChangeEvent extends TpEvent {\n        constructor(target, value, presetKey, last) {\n            super(target);\n            this.value = value;\n            this.presetKey = presetKey;\n            this.last = last !== null && last !== void 0 ? last : true;\n        }\n    }\n    class TpUpdateEvent extends TpEvent {\n        constructor(target, value, presetKey) {\n            super(target);\n            this.value = value;\n            this.presetKey = presetKey;\n        }\n    }\n    class TpFoldEvent extends TpEvent {\n        constructor(target, expanded) {\n            super(target);\n            this.expanded = expanded;\n        }\n    }\n\n    function forceCast(v) {\n        return v;\n    }\n    function isEmpty(value) {\n        return value === null || value === undefined;\n    }\n    function deepEqualsArray(a1, a2) {\n        if (a1.length !== a2.length) {\n            return false;\n        }\n        for (let i = 0; i < a1.length; i++) {\n            if (a1[i] !== a2[i]) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    const CREATE_MESSAGE_MAP = {\n        alreadydisposed: () => 'View has been already disposed',\n        invalidparams: (context) => `Invalid parameters for '${context.name}'`,\n        nomatchingcontroller: (context) => `No matching controller for '${context.key}'`,\n        nomatchingview: (context) => `No matching view for '${JSON.stringify(context.params)}'`,\n        notbindable: () => `Value is not bindable`,\n        propertynotfound: (context) => `Property '${context.name}' not found`,\n        shouldneverhappen: () => 'This error should never happen',\n    };\n    class TpError {\n        constructor(config) {\n            var _a;\n            this.message =\n                (_a = CREATE_MESSAGE_MAP[config.type](forceCast(config.context))) !== null && _a !== void 0 ? _a : 'Unexpected error';\n            this.name = this.constructor.name;\n            this.stack = new Error(this.message).stack;\n            this.type = config.type;\n        }\n        static alreadyDisposed() {\n            return new TpError({ type: 'alreadydisposed' });\n        }\n        static notBindable() {\n            return new TpError({\n                type: 'notbindable',\n            });\n        }\n        static propertyNotFound(name) {\n            return new TpError({\n                type: 'propertynotfound',\n                context: {\n                    name: name,\n                },\n            });\n        }\n        static shouldNeverHappen() {\n            return new TpError({ type: 'shouldneverhappen' });\n        }\n    }\n\n    class BindingTarget {\n        constructor(obj, key, opt_id) {\n            this.obj_ = obj;\n            this.key_ = key;\n            this.presetKey_ = opt_id !== null && opt_id !== void 0 ? opt_id : key;\n        }\n        static isBindable(obj) {\n            if (obj === null) {\n                return false;\n            }\n            if (typeof obj !== 'object') {\n                return false;\n            }\n            return true;\n        }\n        get key() {\n            return this.key_;\n        }\n        get presetKey() {\n            return this.presetKey_;\n        }\n        read() {\n            return this.obj_[this.key_];\n        }\n        write(value) {\n            this.obj_[this.key_] = value;\n        }\n        writeProperty(name, value) {\n            const valueObj = this.read();\n            if (!BindingTarget.isBindable(valueObj)) {\n                throw TpError.notBindable();\n            }\n            if (!(name in valueObj)) {\n                throw TpError.propertyNotFound(name);\n            }\n            valueObj[name] = value;\n        }\n    }\n\n    class ButtonApi extends BladeApi {\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get title() {\n            var _a;\n            return (_a = this.controller_.valueController.props.get('title')) !== null && _a !== void 0 ? _a : '';\n        }\n        set title(title) {\n            this.controller_.valueController.props.set('title', title);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            const emitter = this.controller_.valueController.emitter;\n            emitter.on(eventName, () => {\n                bh(new TpEvent(this));\n            });\n            return this;\n        }\n    }\n\n    class Emitter {\n        constructor() {\n            this.observers_ = {};\n        }\n        on(eventName, handler) {\n            let observers = this.observers_[eventName];\n            if (!observers) {\n                observers = this.observers_[eventName] = [];\n            }\n            observers.push({\n                handler: handler,\n            });\n            return this;\n        }\n        off(eventName, handler) {\n            const observers = this.observers_[eventName];\n            if (observers) {\n                this.observers_[eventName] = observers.filter((observer) => {\n                    return observer.handler !== handler;\n                });\n            }\n            return this;\n        }\n        emit(eventName, event) {\n            const observers = this.observers_[eventName];\n            if (!observers) {\n                return;\n            }\n            observers.forEach((observer) => {\n                observer.handler(event);\n            });\n        }\n    }\n\n    const PREFIX = 'tp';\n    function ClassName(viewName) {\n        const fn = (opt_elementName, opt_modifier) => {\n            return [\n                PREFIX,\n                '-',\n                viewName,\n                'v',\n                opt_elementName ? `_${opt_elementName}` : '',\n                opt_modifier ? `-${opt_modifier}` : '',\n            ].join('');\n        };\n        return fn;\n    }\n\n    function compose(h1, h2) {\n        return (input) => h2(h1(input));\n    }\n    function extractValue(ev) {\n        return ev.rawValue;\n    }\n    function bindValue(value, applyValue) {\n        value.emitter.on('change', compose(extractValue, applyValue));\n        applyValue(value.rawValue);\n    }\n    function bindValueMap(valueMap, key, applyValue) {\n        bindValue(valueMap.value(key), applyValue);\n    }\n\n    function applyClass(elem, className, active) {\n        if (active) {\n            elem.classList.add(className);\n        }\n        else {\n            elem.classList.remove(className);\n        }\n    }\n    function valueToClassName(elem, className) {\n        return (value) => {\n            applyClass(elem, className, value);\n        };\n    }\n    function bindValueToTextContent(value, elem) {\n        bindValue(value, (text) => {\n            elem.textContent = text !== null && text !== void 0 ? text : '';\n        });\n    }\n\n    const className$q = ClassName('btn');\n    class ButtonView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$q());\n            config.viewProps.bindClassModifiers(this.element);\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$q('b'));\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(className$q('t'));\n            bindValueToTextContent(config.props.value('title'), titleElem);\n            this.buttonElement.appendChild(titleElem);\n        }\n    }\n\n    class ButtonController {\n        constructor(doc, config) {\n            this.emitter = new Emitter();\n            this.onClick_ = this.onClick_.bind(this);\n            this.props = config.props;\n            this.viewProps = config.viewProps;\n            this.view = new ButtonView(doc, {\n                props: this.props,\n                viewProps: this.viewProps,\n            });\n            this.view.buttonElement.addEventListener('click', this.onClick_);\n        }\n        onClick_() {\n            this.emitter.emit('click', {\n                sender: this,\n            });\n        }\n    }\n\n    class BoundValue {\n        constructor(initialValue, config) {\n            var _a;\n            this.constraint_ = config === null || config === void 0 ? void 0 : config.constraint;\n            this.equals_ = (_a = config === null || config === void 0 ? void 0 : config.equals) !== null && _a !== void 0 ? _a : ((v1, v2) => v1 === v2);\n            this.emitter = new Emitter();\n            this.rawValue_ = initialValue;\n        }\n        get constraint() {\n            return this.constraint_;\n        }\n        get rawValue() {\n            return this.rawValue_;\n        }\n        set rawValue(rawValue) {\n            this.setRawValue(rawValue, {\n                forceEmit: false,\n                last: true,\n            });\n        }\n        setRawValue(rawValue, options) {\n            const opts = options !== null && options !== void 0 ? options : {\n                forceEmit: false,\n                last: true,\n            };\n            const constrainedValue = this.constraint_\n                ? this.constraint_.constrain(rawValue)\n                : rawValue;\n            const changed = !this.equals_(this.rawValue_, constrainedValue);\n            if (!changed && !opts.forceEmit) {\n                return;\n            }\n            this.emitter.emit('beforechange', {\n                sender: this,\n            });\n            this.rawValue_ = constrainedValue;\n            this.emitter.emit('change', {\n                options: opts,\n                rawValue: constrainedValue,\n                sender: this,\n            });\n        }\n    }\n\n    class PrimitiveValue {\n        constructor(initialValue) {\n            this.emitter = new Emitter();\n            this.value_ = initialValue;\n        }\n        get rawValue() {\n            return this.value_;\n        }\n        set rawValue(value) {\n            this.setRawValue(value, {\n                forceEmit: false,\n                last: true,\n            });\n        }\n        setRawValue(value, options) {\n            const opts = options !== null && options !== void 0 ? options : {\n                forceEmit: false,\n                last: true,\n            };\n            if (this.value_ === value && !opts.forceEmit) {\n                return;\n            }\n            this.emitter.emit('beforechange', {\n                sender: this,\n            });\n            this.value_ = value;\n            this.emitter.emit('change', {\n                options: opts,\n                rawValue: this.value_,\n                sender: this,\n            });\n        }\n    }\n\n    function createValue(initialValue, config) {\n        const constraint = config === null || config === void 0 ? void 0 : config.constraint;\n        const equals = config === null || config === void 0 ? void 0 : config.equals;\n        if (!constraint && !equals) {\n            return new PrimitiveValue(initialValue);\n        }\n        return new BoundValue(initialValue, config);\n    }\n\n    class ValueMap {\n        constructor(valueMap) {\n            this.emitter = new Emitter();\n            this.valMap_ = valueMap;\n            for (const key in this.valMap_) {\n                const v = this.valMap_[key];\n                v.emitter.on('change', () => {\n                    this.emitter.emit('change', {\n                        key: key,\n                        sender: this,\n                    });\n                });\n            }\n        }\n        static createCore(initialValue) {\n            const keys = Object.keys(initialValue);\n            return keys.reduce((o, key) => {\n                return Object.assign(o, {\n                    [key]: createValue(initialValue[key]),\n                });\n            }, {});\n        }\n        static fromObject(initialValue) {\n            const core = this.createCore(initialValue);\n            return new ValueMap(core);\n        }\n        get(key) {\n            return this.valMap_[key].rawValue;\n        }\n        set(key, value) {\n            this.valMap_[key].rawValue = value;\n        }\n        value(key) {\n            return this.valMap_[key];\n        }\n    }\n\n    function parseObject(value, keyToParserMap) {\n        const keys = Object.keys(keyToParserMap);\n        const result = keys.reduce((tmp, key) => {\n            if (tmp === undefined) {\n                return undefined;\n            }\n            const parser = keyToParserMap[key];\n            const result = parser(value[key]);\n            return result.succeeded\n                ? Object.assign(Object.assign({}, tmp), { [key]: result.value }) : undefined;\n        }, {});\n        return forceCast(result);\n    }\n    function parseArray(value, parseItem) {\n        return value.reduce((tmp, item) => {\n            if (tmp === undefined) {\n                return undefined;\n            }\n            const result = parseItem(item);\n            if (!result.succeeded || result.value === undefined) {\n                return undefined;\n            }\n            return [...tmp, result.value];\n        }, []);\n    }\n    function isObject(value) {\n        if (value === null) {\n            return false;\n        }\n        return typeof value === 'object';\n    }\n    function createParamsParserBuilder(parse) {\n        return (optional) => (v) => {\n            if (!optional && v === undefined) {\n                return {\n                    succeeded: false,\n                    value: undefined,\n                };\n            }\n            if (optional && v === undefined) {\n                return {\n                    succeeded: true,\n                    value: undefined,\n                };\n            }\n            const result = parse(v);\n            return result !== undefined\n                ? {\n                    succeeded: true,\n                    value: result,\n                }\n                : {\n                    succeeded: false,\n                    value: undefined,\n                };\n        };\n    }\n    function createParamsParserBuilders(optional) {\n        return {\n            custom: (parse) => createParamsParserBuilder(parse)(optional),\n            boolean: createParamsParserBuilder((v) => typeof v === 'boolean' ? v : undefined)(optional),\n            number: createParamsParserBuilder((v) => typeof v === 'number' ? v : undefined)(optional),\n            string: createParamsParserBuilder((v) => typeof v === 'string' ? v : undefined)(optional),\n            function: createParamsParserBuilder((v) =>\n            typeof v === 'function' ? v : undefined)(optional),\n            constant: (value) => createParamsParserBuilder((v) => (v === value ? value : undefined))(optional),\n            raw: createParamsParserBuilder((v) => v)(optional),\n            object: (keyToParserMap) => createParamsParserBuilder((v) => {\n                if (!isObject(v)) {\n                    return undefined;\n                }\n                return parseObject(v, keyToParserMap);\n            })(optional),\n            array: (itemParser) => createParamsParserBuilder((v) => {\n                if (!Array.isArray(v)) {\n                    return undefined;\n                }\n                return parseArray(v, itemParser);\n            })(optional),\n        };\n    }\n    const ParamsParsers = {\n        optional: createParamsParserBuilders(true),\n        required: createParamsParserBuilders(false),\n    };\n    function parseParams(value, keyToParserMap) {\n        const result = ParamsParsers.required.object(keyToParserMap)(value);\n        return result.succeeded ? result.value : undefined;\n    }\n\n    function disposeElement(elem) {\n        if (elem && elem.parentElement) {\n            elem.parentElement.removeChild(elem);\n        }\n        return null;\n    }\n\n    function getAllBladePositions() {\n        return ['veryfirst', 'first', 'last', 'verylast'];\n    }\n\n    const className$p = ClassName('');\n    const POS_TO_CLASS_NAME_MAP = {\n        veryfirst: 'vfst',\n        first: 'fst',\n        last: 'lst',\n        verylast: 'vlst',\n    };\n    class BladeController {\n        constructor(config) {\n            this.parent_ = null;\n            this.blade = config.blade;\n            this.view = config.view;\n            this.viewProps = config.viewProps;\n            const elem = this.view.element;\n            this.blade.value('positions').emitter.on('change', () => {\n                getAllBladePositions().forEach((pos) => {\n                    elem.classList.remove(className$p(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n                });\n                this.blade.get('positions').forEach((pos) => {\n                    elem.classList.add(className$p(undefined, POS_TO_CLASS_NAME_MAP[pos]));\n                });\n            });\n            this.viewProps.handleDispose(() => {\n                disposeElement(elem);\n            });\n        }\n        get parent() {\n            return this.parent_;\n        }\n    }\n\n    const SVG_NS = 'http://www.w3.org/2000/svg';\n    function forceReflow(element) {\n        element.offsetHeight;\n    }\n    function disableTransitionTemporarily(element, callback) {\n        const t = element.style.transition;\n        element.style.transition = 'none';\n        callback();\n        element.style.transition = t;\n    }\n    function supportsTouch(doc) {\n        return doc.ontouchstart !== undefined;\n    }\n    function getGlobalObject() {\n        return new Function('return this')();\n    }\n    function getWindowDocument() {\n        const globalObj = forceCast(getGlobalObject());\n        return globalObj.document;\n    }\n    function getCanvasContext(canvasElement) {\n        const win = canvasElement.ownerDocument.defaultView;\n        if (!win) {\n            return null;\n        }\n        const isBrowser = 'document' in win;\n        return isBrowser ? canvasElement.getContext('2d') : null;\n    }\n    const ICON_ID_TO_INNER_HTML_MAP = {\n        check: '<path d=\"M2 8l4 4l8 -8\"/>',\n        dropdown: '<path d=\"M5 7h6l-3 3 z\"/>',\n        p2dpad: '<path d=\"M8 4v8\"/><path d=\"M4 8h8\"/><circle cx=\"12\" cy=\"12\" r=\"1.2\"/>',\n    };\n    function createSvgIconElement(document, iconId) {\n        const elem = document.createElementNS(SVG_NS, 'svg');\n        elem.innerHTML = ICON_ID_TO_INNER_HTML_MAP[iconId];\n        return elem;\n    }\n    function insertElementAt(parentElement, element, index) {\n        parentElement.insertBefore(element, parentElement.children[index]);\n    }\n    function removeElement(element) {\n        if (element.parentElement) {\n            element.parentElement.removeChild(element);\n        }\n    }\n    function removeChildElements(element) {\n        while (element.children.length > 0) {\n            element.removeChild(element.children[0]);\n        }\n    }\n    function removeChildNodes(element) {\n        while (element.childNodes.length > 0) {\n            element.removeChild(element.childNodes[0]);\n        }\n    }\n    function findNextTarget(ev) {\n        if (ev.relatedTarget) {\n            return forceCast(ev.relatedTarget);\n        }\n        if ('explicitOriginalTarget' in ev) {\n            return ev.explicitOriginalTarget;\n        }\n        return null;\n    }\n\n    const className$o = ClassName('lbl');\n    function createLabelNode(doc, label) {\n        const frag = doc.createDocumentFragment();\n        const lineNodes = label.split('\\n').map((line) => {\n            return doc.createTextNode(line);\n        });\n        lineNodes.forEach((lineNode, index) => {\n            if (index > 0) {\n                frag.appendChild(doc.createElement('br'));\n            }\n            frag.appendChild(lineNode);\n        });\n        return frag;\n    }\n    class LabelView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$o());\n            config.viewProps.bindClassModifiers(this.element);\n            const labelElem = doc.createElement('div');\n            labelElem.classList.add(className$o('l'));\n            bindValueMap(config.props, 'label', (value) => {\n                if (isEmpty(value)) {\n                    this.element.classList.add(className$o(undefined, 'nol'));\n                }\n                else {\n                    this.element.classList.remove(className$o(undefined, 'nol'));\n                    removeChildNodes(labelElem);\n                    labelElem.appendChild(createLabelNode(doc, value));\n                }\n            });\n            this.element.appendChild(labelElem);\n            this.labelElement = labelElem;\n            const valueElem = doc.createElement('div');\n            valueElem.classList.add(className$o('v'));\n            this.element.appendChild(valueElem);\n            this.valueElement = valueElem;\n        }\n    }\n\n    class LabelController extends BladeController {\n        constructor(doc, config) {\n            const viewProps = config.valueController.viewProps;\n            super(Object.assign(Object.assign({}, config), { view: new LabelView(doc, {\n                    props: config.props,\n                    viewProps: viewProps,\n                }), viewProps: viewProps }));\n            this.props = config.props;\n            this.valueController = config.valueController;\n            this.view.valueElement.appendChild(this.valueController.view.element);\n        }\n    }\n\n    const ButtonBladePlugin = {\n        id: 'button',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                title: p.required.string,\n                view: p.required.constant('button'),\n                label: p.optional.string,\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            return new LabelController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label,\n                }),\n                valueController: new ButtonController(args.document, {\n                    props: ValueMap.fromObject({\n                        title: args.params.title,\n                    }),\n                    viewProps: args.viewProps,\n                }),\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof LabelController)) {\n                return null;\n            }\n            if (!(args.controller.valueController instanceof ButtonController)) {\n                return null;\n            }\n            return new ButtonApi(args.controller);\n        },\n    };\n\n    class ValueBladeController extends BladeController {\n        constructor(config) {\n            super(config);\n            this.value = config.value;\n        }\n    }\n\n    function createBlade() {\n        return new ValueMap({\n            positions: createValue([], {\n                equals: deepEqualsArray,\n            }),\n        });\n    }\n\n    class Foldable extends ValueMap {\n        constructor(valueMap) {\n            super(valueMap);\n        }\n        static create(expanded) {\n            const coreObj = {\n                completed: true,\n                expanded: expanded,\n                expandedHeight: null,\n                shouldFixHeight: false,\n                temporaryExpanded: null,\n            };\n            const core = ValueMap.createCore(coreObj);\n            return new Foldable(core);\n        }\n        get styleExpanded() {\n            var _a;\n            return (_a = this.get('temporaryExpanded')) !== null && _a !== void 0 ? _a : this.get('expanded');\n        }\n        get styleHeight() {\n            if (!this.styleExpanded) {\n                return '0';\n            }\n            const exHeight = this.get('expandedHeight');\n            if (this.get('shouldFixHeight') && !isEmpty(exHeight)) {\n                return `${exHeight}px`;\n            }\n            return 'auto';\n        }\n        bindExpandedClass(elem, expandedClassName) {\n            bindValueMap(this, 'expanded', () => {\n                const expanded = this.styleExpanded;\n                if (expanded) {\n                    elem.classList.add(expandedClassName);\n                }\n                else {\n                    elem.classList.remove(expandedClassName);\n                }\n            });\n        }\n    }\n    function computeExpandedFolderHeight(folder, containerElement) {\n        let height = 0;\n        disableTransitionTemporarily(containerElement, () => {\n            folder.set('expandedHeight', null);\n            folder.set('temporaryExpanded', true);\n            forceReflow(containerElement);\n            height = containerElement.clientHeight;\n            folder.set('temporaryExpanded', null);\n            forceReflow(containerElement);\n        });\n        return height;\n    }\n    function applyHeight(foldable, elem) {\n        elem.style.height = foldable.styleHeight;\n    }\n    function bindFoldable(foldable, elem) {\n        foldable.value('expanded').emitter.on('beforechange', () => {\n            foldable.set('completed', false);\n            if (isEmpty(foldable.get('expandedHeight'))) {\n                foldable.set('expandedHeight', computeExpandedFolderHeight(foldable, elem));\n            }\n            foldable.set('shouldFixHeight', true);\n            forceReflow(elem);\n        });\n        foldable.emitter.on('change', () => {\n            applyHeight(foldable, elem);\n        });\n        applyHeight(foldable, elem);\n        elem.addEventListener('transitionend', (ev) => {\n            if (ev.propertyName !== 'height') {\n                return;\n            }\n            foldable.set('shouldFixHeight', false);\n            foldable.set('expandedHeight', null);\n            foldable.set('completed', true);\n        });\n    }\n\n    class RackLikeApi extends BladeApi {\n        constructor(controller, rackApi) {\n            super(controller);\n            this.rackApi_ = rackApi;\n        }\n    }\n\n    function addButtonAsBlade(api, params) {\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'button' }));\n    }\n    function addFolderAsBlade(api, params) {\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'folder' }));\n    }\n    function addSeparatorAsBlade(api, opt_params) {\n        const params = opt_params || {};\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'separator' }));\n    }\n    function addTabAsBlade(api, params) {\n        return api.addBlade(Object.assign(Object.assign({}, params), { view: 'tab' }));\n    }\n\n    class NestedOrderedSet {\n        constructor(extract) {\n            this.emitter = new Emitter();\n            this.items_ = [];\n            this.cache_ = new Set();\n            this.onSubListAdd_ = this.onSubListAdd_.bind(this);\n            this.onSubListRemove_ = this.onSubListRemove_.bind(this);\n            this.extract_ = extract;\n        }\n        get items() {\n            return this.items_;\n        }\n        allItems() {\n            return Array.from(this.cache_);\n        }\n        find(callback) {\n            for (const item of this.allItems()) {\n                if (callback(item)) {\n                    return item;\n                }\n            }\n            return null;\n        }\n        includes(item) {\n            return this.cache_.has(item);\n        }\n        add(item, opt_index) {\n            if (this.includes(item)) {\n                throw TpError.shouldNeverHappen();\n            }\n            const index = opt_index !== undefined ? opt_index : this.items_.length;\n            this.items_.splice(index, 0, item);\n            this.cache_.add(item);\n            const subList = this.extract_(item);\n            if (subList) {\n                subList.emitter.on('add', this.onSubListAdd_);\n                subList.emitter.on('remove', this.onSubListRemove_);\n                subList.allItems().forEach((item) => {\n                    this.cache_.add(item);\n                });\n            }\n            this.emitter.emit('add', {\n                index: index,\n                item: item,\n                root: this,\n                target: this,\n            });\n        }\n        remove(item) {\n            const index = this.items_.indexOf(item);\n            if (index < 0) {\n                return;\n            }\n            this.items_.splice(index, 1);\n            this.cache_.delete(item);\n            const subList = this.extract_(item);\n            if (subList) {\n                subList.emitter.off('add', this.onSubListAdd_);\n                subList.emitter.off('remove', this.onSubListRemove_);\n            }\n            this.emitter.emit('remove', {\n                index: index,\n                item: item,\n                root: this,\n                target: this,\n            });\n        }\n        onSubListAdd_(ev) {\n            this.cache_.add(ev.item);\n            this.emitter.emit('add', {\n                index: ev.index,\n                item: ev.item,\n                root: this,\n                target: ev.target,\n            });\n        }\n        onSubListRemove_(ev) {\n            this.cache_.delete(ev.item);\n            this.emitter.emit('remove', {\n                index: ev.index,\n                item: ev.item,\n                root: this,\n                target: ev.target,\n            });\n        }\n    }\n\n    class InputBindingApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.onBindingChange_ = this.onBindingChange_.bind(this);\n            this.emitter_ = new Emitter();\n            this.controller_.binding.emitter.on('change', this.onBindingChange_);\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        refresh() {\n            this.controller_.binding.read();\n        }\n        onBindingChange_(ev) {\n            const value = ev.sender.target.read();\n            this.emitter_.emit('change', {\n                event: new TpChangeEvent(this, forceCast(value), this.controller_.binding.target.presetKey, ev.options.last),\n            });\n        }\n    }\n\n    class InputBindingController extends LabelController {\n        constructor(doc, config) {\n            super(doc, config);\n            this.binding = config.binding;\n        }\n    }\n\n    class MonitorBindingApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.onBindingUpdate_ = this.onBindingUpdate_.bind(this);\n            this.emitter_ = new Emitter();\n            this.controller_.binding.emitter.on('update', this.onBindingUpdate_);\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        refresh() {\n            this.controller_.binding.read();\n        }\n        onBindingUpdate_(ev) {\n            const value = ev.sender.target.read();\n            this.emitter_.emit('update', {\n                event: new TpUpdateEvent(this, forceCast(value), this.controller_.binding.target.presetKey),\n            });\n        }\n    }\n\n    class MonitorBindingController extends LabelController {\n        constructor(doc, config) {\n            super(doc, config);\n            this.binding = config.binding;\n            this.viewProps.bindDisabled(this.binding.ticker);\n            this.viewProps.handleDispose(() => {\n                this.binding.dispose();\n            });\n        }\n    }\n\n    function findSubBladeApiSet(api) {\n        if (api instanceof RackApi) {\n            return api['apiSet_'];\n        }\n        if (api instanceof RackLikeApi) {\n            return api['rackApi_']['apiSet_'];\n        }\n        return null;\n    }\n    function getApiByController(apiSet, controller) {\n        const api = apiSet.find((api) => api.controller_ === controller);\n        if (!api) {\n            throw TpError.shouldNeverHappen();\n        }\n        return api;\n    }\n    function createBindingTarget(obj, key, opt_id) {\n        if (!BindingTarget.isBindable(obj)) {\n            throw TpError.notBindable();\n        }\n        return new BindingTarget(obj, key, opt_id);\n    }\n    class RackApi extends BladeApi {\n        constructor(controller, pool) {\n            super(controller);\n            this.onRackAdd_ = this.onRackAdd_.bind(this);\n            this.onRackRemove_ = this.onRackRemove_.bind(this);\n            this.onRackInputChange_ = this.onRackInputChange_.bind(this);\n            this.onRackMonitorUpdate_ = this.onRackMonitorUpdate_.bind(this);\n            this.emitter_ = new Emitter();\n            this.apiSet_ = new NestedOrderedSet(findSubBladeApiSet);\n            this.pool_ = pool;\n            const rack = this.controller_.rack;\n            rack.emitter.on('add', this.onRackAdd_);\n            rack.emitter.on('remove', this.onRackRemove_);\n            rack.emitter.on('inputchange', this.onRackInputChange_);\n            rack.emitter.on('monitorupdate', this.onRackMonitorUpdate_);\n            rack.children.forEach((bc) => {\n                this.setUpApi_(bc);\n            });\n        }\n        get children() {\n            return this.controller_.rack.children.map((bc) => getApiByController(this.apiSet_, bc));\n        }\n        addInput(object, key, opt_params) {\n            const params = opt_params || {};\n            const doc = this.controller_.view.element.ownerDocument;\n            const bc = this.pool_.createInput(doc, createBindingTarget(object, key, params.presetKey), params);\n            const api = new InputBindingApi(bc);\n            return this.add(api, params.index);\n        }\n        addMonitor(object, key, opt_params) {\n            const params = opt_params || {};\n            const doc = this.controller_.view.element.ownerDocument;\n            const bc = this.pool_.createMonitor(doc, createBindingTarget(object, key), params);\n            const api = new MonitorBindingApi(bc);\n            return forceCast(this.add(api, params.index));\n        }\n        addFolder(params) {\n            return addFolderAsBlade(this, params);\n        }\n        addButton(params) {\n            return addButtonAsBlade(this, params);\n        }\n        addSeparator(opt_params) {\n            return addSeparatorAsBlade(this, opt_params);\n        }\n        addTab(params) {\n            return addTabAsBlade(this, params);\n        }\n        add(api, opt_index) {\n            this.controller_.rack.add(api.controller_, opt_index);\n            const gapi = this.apiSet_.find((a) => a.controller_ === api.controller_);\n            if (gapi) {\n                this.apiSet_.remove(gapi);\n            }\n            this.apiSet_.add(api);\n            return api;\n        }\n        remove(api) {\n            this.controller_.rack.remove(api.controller_);\n        }\n        addBlade(params) {\n            const doc = this.controller_.view.element.ownerDocument;\n            const bc = this.pool_.createBlade(doc, params);\n            const api = this.pool_.createBladeApi(bc);\n            return this.add(api, params.index);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        setUpApi_(bc) {\n            const api = this.apiSet_.find((api) => api.controller_ === bc);\n            if (!api) {\n                this.apiSet_.add(this.pool_.createBladeApi(bc));\n            }\n        }\n        onRackAdd_(ev) {\n            this.setUpApi_(ev.bladeController);\n        }\n        onRackRemove_(ev) {\n            if (ev.isRoot) {\n                const api = getApiByController(this.apiSet_, ev.bladeController);\n                this.apiSet_.remove(api);\n            }\n        }\n        onRackInputChange_(ev) {\n            const bc = ev.bladeController;\n            if (bc instanceof InputBindingController) {\n                const api = getApiByController(this.apiSet_, bc);\n                const binding = bc.binding;\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(api, forceCast(binding.target.read()), binding.target.presetKey, ev.options.last),\n                });\n            }\n            else if (bc instanceof ValueBladeController) {\n                const api = getApiByController(this.apiSet_, bc);\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(api, bc.value.rawValue, undefined, ev.options.last),\n                });\n            }\n        }\n        onRackMonitorUpdate_(ev) {\n            if (!(ev.bladeController instanceof MonitorBindingController)) {\n                throw TpError.shouldNeverHappen();\n            }\n            const api = getApiByController(this.apiSet_, ev.bladeController);\n            const binding = ev.bladeController.binding;\n            this.emitter_.emit('update', {\n                event: new TpUpdateEvent(api, forceCast(binding.target.read()), binding.target.presetKey),\n            });\n        }\n    }\n\n    class FolderApi extends RackLikeApi {\n        constructor(controller, pool) {\n            super(controller, new RackApi(controller.rackController, pool));\n            this.emitter_ = new Emitter();\n            this.controller_.foldable\n                .value('expanded')\n                .emitter.on('change', (ev) => {\n                this.emitter_.emit('fold', {\n                    event: new TpFoldEvent(this, ev.sender.rawValue),\n                });\n            });\n            this.rackApi_.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: ev,\n                });\n            });\n            this.rackApi_.on('update', (ev) => {\n                this.emitter_.emit('update', {\n                    event: ev,\n                });\n            });\n        }\n        get expanded() {\n            return this.controller_.foldable.get('expanded');\n        }\n        set expanded(expanded) {\n            this.controller_.foldable.set('expanded', expanded);\n        }\n        get title() {\n            return this.controller_.props.get('title');\n        }\n        set title(title) {\n            this.controller_.props.set('title', title);\n        }\n        get children() {\n            return this.rackApi_.children;\n        }\n        addInput(object, key, opt_params) {\n            return this.rackApi_.addInput(object, key, opt_params);\n        }\n        addMonitor(object, key, opt_params) {\n            return this.rackApi_.addMonitor(object, key, opt_params);\n        }\n        addFolder(params) {\n            return this.rackApi_.addFolder(params);\n        }\n        addButton(params) {\n            return this.rackApi_.addButton(params);\n        }\n        addSeparator(opt_params) {\n            return this.rackApi_.addSeparator(opt_params);\n        }\n        addTab(params) {\n            return this.rackApi_.addTab(params);\n        }\n        add(api, opt_index) {\n            return this.rackApi_.add(api, opt_index);\n        }\n        remove(api) {\n            this.rackApi_.remove(api);\n        }\n        addBlade(params) {\n            return this.rackApi_.addBlade(params);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    class RackLikeController extends BladeController {\n        constructor(config) {\n            super({\n                blade: config.blade,\n                view: config.view,\n                viewProps: config.rackController.viewProps,\n            });\n            this.rackController = config.rackController;\n        }\n    }\n\n    class PlainView {\n        constructor(doc, config) {\n            const className = ClassName(config.viewName);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className());\n            config.viewProps.bindClassModifiers(this.element);\n        }\n    }\n\n    function findInputBindingController(bcs, b) {\n        for (let i = 0; i < bcs.length; i++) {\n            const bc = bcs[i];\n            if (bc instanceof InputBindingController && bc.binding === b) {\n                return bc;\n            }\n        }\n        return null;\n    }\n    function findMonitorBindingController(bcs, b) {\n        for (let i = 0; i < bcs.length; i++) {\n            const bc = bcs[i];\n            if (bc instanceof MonitorBindingController && bc.binding === b) {\n                return bc;\n            }\n        }\n        return null;\n    }\n    function findValueBladeController(bcs, v) {\n        for (let i = 0; i < bcs.length; i++) {\n            const bc = bcs[i];\n            if (bc instanceof ValueBladeController && bc.value === v) {\n                return bc;\n            }\n        }\n        return null;\n    }\n    function findSubRack(bc) {\n        if (bc instanceof RackController) {\n            return bc.rack;\n        }\n        if (bc instanceof RackLikeController) {\n            return bc.rackController.rack;\n        }\n        return null;\n    }\n    function findSubBladeControllerSet(bc) {\n        const rack = findSubRack(bc);\n        return rack ? rack['bcSet_'] : null;\n    }\n    class BladeRack {\n        constructor(blade) {\n            var _a;\n            this.onBladePositionsChange_ = this.onBladePositionsChange_.bind(this);\n            this.onSetAdd_ = this.onSetAdd_.bind(this);\n            this.onSetRemove_ = this.onSetRemove_.bind(this);\n            this.onChildDispose_ = this.onChildDispose_.bind(this);\n            this.onChildPositionsChange_ = this.onChildPositionsChange_.bind(this);\n            this.onChildInputChange_ = this.onChildInputChange_.bind(this);\n            this.onChildMonitorUpdate_ = this.onChildMonitorUpdate_.bind(this);\n            this.onChildValueChange_ = this.onChildValueChange_.bind(this);\n            this.onChildViewPropsChange_ = this.onChildViewPropsChange_.bind(this);\n            this.onDescendantLayout_ = this.onDescendantLayout_.bind(this);\n            this.onDescendantInputChange_ = this.onDescendantInputChange_.bind(this);\n            this.onDescendantMonitorUpdate_ =\n                this.onDescendantMonitorUpdate_.bind(this);\n            this.emitter = new Emitter();\n            this.blade_ = blade !== null && blade !== void 0 ? blade : null;\n            (_a = this.blade_) === null || _a === void 0 ? void 0 : _a.value('positions').emitter.on('change', this.onBladePositionsChange_);\n            this.bcSet_ = new NestedOrderedSet(findSubBladeControllerSet);\n            this.bcSet_.emitter.on('add', this.onSetAdd_);\n            this.bcSet_.emitter.on('remove', this.onSetRemove_);\n        }\n        get children() {\n            return this.bcSet_.items;\n        }\n        add(bc, opt_index) {\n            if (bc.parent) {\n                bc.parent.remove(bc);\n            }\n            bc['parent_'] = this;\n            this.bcSet_.add(bc, opt_index);\n        }\n        remove(bc) {\n            bc['parent_'] = null;\n            this.bcSet_.remove(bc);\n        }\n        find(controllerClass) {\n            return forceCast(this.bcSet_.allItems().filter((bc) => {\n                return bc instanceof controllerClass;\n            }));\n        }\n        onSetAdd_(ev) {\n            this.updatePositions_();\n            const isRoot = ev.target === ev.root;\n            this.emitter.emit('add', {\n                bladeController: ev.item,\n                index: ev.index,\n                isRoot: isRoot,\n                sender: this,\n            });\n            if (!isRoot) {\n                return;\n            }\n            const bc = ev.item;\n            bc.viewProps.emitter.on('change', this.onChildViewPropsChange_);\n            bc.blade\n                .value('positions')\n                .emitter.on('change', this.onChildPositionsChange_);\n            bc.viewProps.handleDispose(this.onChildDispose_);\n            if (bc instanceof InputBindingController) {\n                bc.binding.emitter.on('change', this.onChildInputChange_);\n            }\n            else if (bc instanceof MonitorBindingController) {\n                bc.binding.emitter.on('update', this.onChildMonitorUpdate_);\n            }\n            else if (bc instanceof ValueBladeController) {\n                bc.value.emitter.on('change', this.onChildValueChange_);\n            }\n            else {\n                const rack = findSubRack(bc);\n                if (rack) {\n                    const emitter = rack.emitter;\n                    emitter.on('layout', this.onDescendantLayout_);\n                    emitter.on('inputchange', this.onDescendantInputChange_);\n                    emitter.on('monitorupdate', this.onDescendantMonitorUpdate_);\n                }\n            }\n        }\n        onSetRemove_(ev) {\n            this.updatePositions_();\n            const isRoot = ev.target === ev.root;\n            this.emitter.emit('remove', {\n                bladeController: ev.item,\n                isRoot: isRoot,\n                sender: this,\n            });\n            if (!isRoot) {\n                return;\n            }\n            const bc = ev.item;\n            if (bc instanceof InputBindingController) {\n                bc.binding.emitter.off('change', this.onChildInputChange_);\n            }\n            else if (bc instanceof MonitorBindingController) {\n                bc.binding.emitter.off('update', this.onChildMonitorUpdate_);\n            }\n            else if (bc instanceof ValueBladeController) {\n                bc.value.emitter.off('change', this.onChildValueChange_);\n            }\n            else {\n                const rack = findSubRack(bc);\n                if (rack) {\n                    const emitter = rack.emitter;\n                    emitter.off('layout', this.onDescendantLayout_);\n                    emitter.off('inputchange', this.onDescendantInputChange_);\n                    emitter.off('monitorupdate', this.onDescendantMonitorUpdate_);\n                }\n            }\n        }\n        updatePositions_() {\n            const visibleItems = this.bcSet_.items.filter((bc) => !bc.viewProps.get('hidden'));\n            const firstVisibleItem = visibleItems[0];\n            const lastVisibleItem = visibleItems[visibleItems.length - 1];\n            this.bcSet_.items.forEach((bc) => {\n                const ps = [];\n                if (bc === firstVisibleItem) {\n                    ps.push('first');\n                    if (!this.blade_ ||\n                        this.blade_.get('positions').includes('veryfirst')) {\n                        ps.push('veryfirst');\n                    }\n                }\n                if (bc === lastVisibleItem) {\n                    ps.push('last');\n                    if (!this.blade_ || this.blade_.get('positions').includes('verylast')) {\n                        ps.push('verylast');\n                    }\n                }\n                bc.blade.set('positions', ps);\n            });\n        }\n        onChildPositionsChange_() {\n            this.updatePositions_();\n            this.emitter.emit('layout', {\n                sender: this,\n            });\n        }\n        onChildViewPropsChange_(_ev) {\n            this.updatePositions_();\n            this.emitter.emit('layout', {\n                sender: this,\n            });\n        }\n        onChildDispose_() {\n            const disposedUcs = this.bcSet_.items.filter((bc) => {\n                return bc.viewProps.get('disposed');\n            });\n            disposedUcs.forEach((bc) => {\n                this.bcSet_.remove(bc);\n            });\n        }\n        onChildInputChange_(ev) {\n            const bc = findInputBindingController(this.find(InputBindingController), ev.sender);\n            if (!bc) {\n                throw TpError.shouldNeverHappen();\n            }\n            this.emitter.emit('inputchange', {\n                bladeController: bc,\n                options: ev.options,\n                sender: this,\n            });\n        }\n        onChildMonitorUpdate_(ev) {\n            const bc = findMonitorBindingController(this.find(MonitorBindingController), ev.sender);\n            if (!bc) {\n                throw TpError.shouldNeverHappen();\n            }\n            this.emitter.emit('monitorupdate', {\n                bladeController: bc,\n                sender: this,\n            });\n        }\n        onChildValueChange_(ev) {\n            const bc = findValueBladeController(this.find(ValueBladeController), ev.sender);\n            if (!bc) {\n                throw TpError.shouldNeverHappen();\n            }\n            this.emitter.emit('inputchange', {\n                bladeController: bc,\n                options: ev.options,\n                sender: this,\n            });\n        }\n        onDescendantLayout_(_) {\n            this.updatePositions_();\n            this.emitter.emit('layout', {\n                sender: this,\n            });\n        }\n        onDescendantInputChange_(ev) {\n            this.emitter.emit('inputchange', {\n                bladeController: ev.bladeController,\n                options: ev.options,\n                sender: this,\n            });\n        }\n        onDescendantMonitorUpdate_(ev) {\n            this.emitter.emit('monitorupdate', {\n                bladeController: ev.bladeController,\n                sender: this,\n            });\n        }\n        onBladePositionsChange_() {\n            this.updatePositions_();\n        }\n    }\n\n    class RackController extends BladeController {\n        constructor(doc, config) {\n            super(Object.assign(Object.assign({}, config), { view: new PlainView(doc, {\n                    viewName: 'brk',\n                    viewProps: config.viewProps,\n                }) }));\n            this.onRackAdd_ = this.onRackAdd_.bind(this);\n            this.onRackRemove_ = this.onRackRemove_.bind(this);\n            const rack = new BladeRack(config.root ? undefined : config.blade);\n            rack.emitter.on('add', this.onRackAdd_);\n            rack.emitter.on('remove', this.onRackRemove_);\n            this.rack = rack;\n            this.viewProps.handleDispose(() => {\n                for (let i = this.rack.children.length - 1; i >= 0; i--) {\n                    const bc = this.rack.children[i];\n                    bc.viewProps.set('disposed', true);\n                }\n            });\n        }\n        onRackAdd_(ev) {\n            if (!ev.isRoot) {\n                return;\n            }\n            insertElementAt(this.view.element, ev.bladeController.view.element, ev.index);\n        }\n        onRackRemove_(ev) {\n            if (!ev.isRoot) {\n                return;\n            }\n            removeElement(ev.bladeController.view.element);\n        }\n    }\n\n    const bladeContainerClassName = ClassName('cnt');\n\n    class FolderView {\n        constructor(doc, config) {\n            this.className_ = ClassName(config.viewName || 'fld');\n            this.element = doc.createElement('div');\n            this.element.classList.add(this.className_(), bladeContainerClassName());\n            config.viewProps.bindClassModifiers(this.element);\n            this.foldable_ = config.foldable;\n            this.foldable_.bindExpandedClass(this.element, this.className_(undefined, 'expanded'));\n            bindValueMap(this.foldable_, 'completed', valueToClassName(this.element, this.className_(undefined, 'cpl')));\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(this.className_('b'));\n            bindValueMap(config.props, 'title', (title) => {\n                if (isEmpty(title)) {\n                    this.element.classList.add(this.className_(undefined, 'not'));\n                }\n                else {\n                    this.element.classList.remove(this.className_(undefined, 'not'));\n                }\n            });\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(this.className_('t'));\n            bindValueToTextContent(config.props.value('title'), titleElem);\n            this.buttonElement.appendChild(titleElem);\n            this.titleElement = titleElem;\n            const markElem = doc.createElement('div');\n            markElem.classList.add(this.className_('m'));\n            this.buttonElement.appendChild(markElem);\n            const containerElem = config.containerElement;\n            containerElem.classList.add(this.className_('c'));\n            this.element.appendChild(containerElem);\n            this.containerElement = containerElem;\n        }\n    }\n\n    class FolderController extends RackLikeController {\n        constructor(doc, config) {\n            var _a;\n            const foldable = Foldable.create((_a = config.expanded) !== null && _a !== void 0 ? _a : true);\n            const rc = new RackController(doc, {\n                blade: config.blade,\n                root: config.root,\n                viewProps: config.viewProps,\n            });\n            super(Object.assign(Object.assign({}, config), { rackController: rc, view: new FolderView(doc, {\n                    containerElement: rc.view.element,\n                    foldable: foldable,\n                    props: config.props,\n                    viewName: config.root ? 'rot' : undefined,\n                    viewProps: config.viewProps,\n                }) }));\n            this.onTitleClick_ = this.onTitleClick_.bind(this);\n            this.props = config.props;\n            this.foldable = foldable;\n            bindFoldable(this.foldable, this.view.containerElement);\n            this.view.buttonElement.addEventListener('click', this.onTitleClick_);\n        }\n        get document() {\n            return this.view.element.ownerDocument;\n        }\n        onTitleClick_() {\n            this.foldable.set('expanded', !this.foldable.get('expanded'));\n        }\n    }\n\n    const FolderBladePlugin = {\n        id: 'folder',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                title: p.required.string,\n                view: p.required.constant('folder'),\n                expanded: p.optional.boolean,\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            return new FolderController(args.document, {\n                blade: args.blade,\n                expanded: args.params.expanded,\n                props: ValueMap.fromObject({\n                    title: args.params.title,\n                }),\n                viewProps: args.viewProps,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof FolderController)) {\n                return null;\n            }\n            return new FolderApi(args.controller, args.pool);\n        },\n    };\n\n    class LabeledValueController extends ValueBladeController {\n        constructor(doc, config) {\n            const viewProps = config.valueController.viewProps;\n            super(Object.assign(Object.assign({}, config), { value: config.valueController.value, view: new LabelView(doc, {\n                    props: config.props,\n                    viewProps: viewProps,\n                }), viewProps: viewProps }));\n            this.props = config.props;\n            this.valueController = config.valueController;\n            this.view.valueElement.appendChild(this.valueController.view.element);\n        }\n    }\n\n    class SeparatorApi extends BladeApi {\n    }\n\n    const className$n = ClassName('spr');\n    class SeparatorView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$n());\n            config.viewProps.bindClassModifiers(this.element);\n            const hrElem = doc.createElement('hr');\n            hrElem.classList.add(className$n('r'));\n            this.element.appendChild(hrElem);\n        }\n    }\n\n    class SeparatorController extends BladeController {\n        constructor(doc, config) {\n            super(Object.assign(Object.assign({}, config), { view: new SeparatorView(doc, {\n                    viewProps: config.viewProps,\n                }) }));\n        }\n    }\n\n    const SeparatorBladePlugin = {\n        id: 'separator',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                view: p.required.constant('separator'),\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            return new SeparatorController(args.document, {\n                blade: args.blade,\n                viewProps: args.viewProps,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof SeparatorController)) {\n                return null;\n            }\n            return new SeparatorApi(args.controller);\n        },\n    };\n\n    const className$m = ClassName('');\n    function valueToModifier(elem, modifier) {\n        return valueToClassName(elem, className$m(undefined, modifier));\n    }\n    class ViewProps extends ValueMap {\n        constructor(valueMap) {\n            super(valueMap);\n        }\n        static create(opt_initialValue) {\n            var _a, _b;\n            const initialValue = opt_initialValue !== null && opt_initialValue !== void 0 ? opt_initialValue : {};\n            const coreObj = {\n                disabled: (_a = initialValue.disabled) !== null && _a !== void 0 ? _a : false,\n                disposed: false,\n                hidden: (_b = initialValue.hidden) !== null && _b !== void 0 ? _b : false,\n            };\n            const core = ValueMap.createCore(coreObj);\n            return new ViewProps(core);\n        }\n        bindClassModifiers(elem) {\n            bindValueMap(this, 'disabled', valueToModifier(elem, 'disabled'));\n            bindValueMap(this, 'hidden', valueToModifier(elem, 'hidden'));\n        }\n        bindDisabled(target) {\n            bindValueMap(this, 'disabled', (disabled) => {\n                target.disabled = disabled;\n            });\n        }\n        bindTabIndex(elem) {\n            bindValueMap(this, 'disabled', (disabled) => {\n                elem.tabIndex = disabled ? -1 : 0;\n            });\n        }\n        handleDispose(callback) {\n            this.value('disposed').emitter.on('change', (disposed) => {\n                if (disposed) {\n                    callback();\n                }\n            });\n        }\n    }\n\n    const className$l = ClassName('tbi');\n    class TabItemView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$l());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValueMap(config.props, 'selected', (selected) => {\n                if (selected) {\n                    this.element.classList.add(className$l(undefined, 'sel'));\n                }\n                else {\n                    this.element.classList.remove(className$l(undefined, 'sel'));\n                }\n            });\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$l('b'));\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const titleElem = doc.createElement('div');\n            titleElem.classList.add(className$l('t'));\n            bindValueToTextContent(config.props.value('title'), titleElem);\n            this.buttonElement.appendChild(titleElem);\n            this.titleElement = titleElem;\n        }\n    }\n\n    class TabItemController {\n        constructor(doc, config) {\n            this.emitter = new Emitter();\n            this.onClick_ = this.onClick_.bind(this);\n            this.props = config.props;\n            this.viewProps = config.viewProps;\n            this.view = new TabItemView(doc, {\n                props: config.props,\n                viewProps: config.viewProps,\n            });\n            this.view.buttonElement.addEventListener('click', this.onClick_);\n        }\n        onClick_() {\n            this.emitter.emit('click', {\n                sender: this,\n            });\n        }\n    }\n\n    class TabPageController {\n        constructor(doc, config) {\n            this.onItemClick_ = this.onItemClick_.bind(this);\n            this.ic_ = new TabItemController(doc, {\n                props: config.itemProps,\n                viewProps: ViewProps.create(),\n            });\n            this.ic_.emitter.on('click', this.onItemClick_);\n            this.cc_ = new RackController(doc, {\n                blade: createBlade(),\n                viewProps: ViewProps.create(),\n            });\n            this.props = config.props;\n            bindValueMap(this.props, 'selected', (selected) => {\n                this.itemController.props.set('selected', selected);\n                this.contentController.viewProps.set('hidden', !selected);\n            });\n        }\n        get itemController() {\n            return this.ic_;\n        }\n        get contentController() {\n            return this.cc_;\n        }\n        onItemClick_() {\n            this.props.set('selected', true);\n        }\n    }\n\n    class TabPageApi {\n        constructor(controller, contentRackApi) {\n            this.controller_ = controller;\n            this.rackApi_ = contentRackApi;\n        }\n        get title() {\n            var _a;\n            return (_a = this.controller_.itemController.props.get('title')) !== null && _a !== void 0 ? _a : '';\n        }\n        set title(title) {\n            this.controller_.itemController.props.set('title', title);\n        }\n        get selected() {\n            return this.controller_.props.get('selected');\n        }\n        set selected(selected) {\n            this.controller_.props.set('selected', selected);\n        }\n        get children() {\n            return this.rackApi_.children;\n        }\n        addButton(params) {\n            return this.rackApi_.addButton(params);\n        }\n        addFolder(params) {\n            return this.rackApi_.addFolder(params);\n        }\n        addSeparator(opt_params) {\n            return this.rackApi_.addSeparator(opt_params);\n        }\n        addTab(params) {\n            return this.rackApi_.addTab(params);\n        }\n        add(api, opt_index) {\n            this.rackApi_.add(api, opt_index);\n        }\n        remove(api) {\n            this.rackApi_.remove(api);\n        }\n        addInput(object, key, opt_params) {\n            return this.rackApi_.addInput(object, key, opt_params);\n        }\n        addMonitor(object, key, opt_params) {\n            return this.rackApi_.addMonitor(object, key, opt_params);\n        }\n        addBlade(params) {\n            return this.rackApi_.addBlade(params);\n        }\n    }\n\n    class TabApi extends RackLikeApi {\n        constructor(controller, pool) {\n            super(controller, new RackApi(controller.rackController, pool));\n            this.onPageAdd_ = this.onPageAdd_.bind(this);\n            this.onPageRemove_ = this.onPageRemove_.bind(this);\n            this.emitter_ = new Emitter();\n            this.pageApiMap_ = new Map();\n            this.rackApi_.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: ev,\n                });\n            });\n            this.rackApi_.on('update', (ev) => {\n                this.emitter_.emit('update', {\n                    event: ev,\n                });\n            });\n            this.controller_.pageSet.emitter.on('add', this.onPageAdd_);\n            this.controller_.pageSet.emitter.on('remove', this.onPageRemove_);\n            this.controller_.pageSet.items.forEach((pc) => {\n                this.setUpPageApi_(pc);\n            });\n        }\n        get pages() {\n            return this.controller_.pageSet.items.map((pc) => {\n                const api = this.pageApiMap_.get(pc);\n                if (!api) {\n                    throw TpError.shouldNeverHappen();\n                }\n                return api;\n            });\n        }\n        addPage(params) {\n            const doc = this.controller_.view.element.ownerDocument;\n            const pc = new TabPageController(doc, {\n                itemProps: ValueMap.fromObject({\n                    selected: false,\n                    title: params.title,\n                }),\n                props: ValueMap.fromObject({\n                    selected: false,\n                }),\n            });\n            this.controller_.add(pc, params.index);\n            const api = this.pageApiMap_.get(pc);\n            if (!api) {\n                throw TpError.shouldNeverHappen();\n            }\n            return api;\n        }\n        removePage(index) {\n            this.controller_.remove(index);\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n        setUpPageApi_(pc) {\n            const rackApi = this.rackApi_['apiSet_'].find((api) => api.controller_ === pc.contentController);\n            if (!rackApi) {\n                throw TpError.shouldNeverHappen();\n            }\n            const api = new TabPageApi(pc, rackApi);\n            this.pageApiMap_.set(pc, api);\n        }\n        onPageAdd_(ev) {\n            this.setUpPageApi_(ev.item);\n        }\n        onPageRemove_(ev) {\n            const api = this.pageApiMap_.get(ev.item);\n            if (!api) {\n                throw TpError.shouldNeverHappen();\n            }\n            this.pageApiMap_.delete(ev.item);\n        }\n    }\n\n    const className$k = ClassName('tab');\n    class TabView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$k(), bladeContainerClassName());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValue(config.empty, valueToClassName(this.element, className$k(undefined, 'nop')));\n            const itemsElem = doc.createElement('div');\n            itemsElem.classList.add(className$k('i'));\n            this.element.appendChild(itemsElem);\n            this.itemsElement = itemsElem;\n            const contentsElem = config.contentsElement;\n            contentsElem.classList.add(className$k('c'));\n            this.element.appendChild(contentsElem);\n            this.contentsElement = contentsElem;\n        }\n    }\n\n    class TabController extends RackLikeController {\n        constructor(doc, config) {\n            const cr = new RackController(doc, {\n                blade: config.blade,\n                viewProps: config.viewProps,\n            });\n            const empty = createValue(true);\n            super({\n                blade: config.blade,\n                rackController: cr,\n                view: new TabView(doc, {\n                    contentsElement: cr.view.element,\n                    empty: empty,\n                    viewProps: config.viewProps,\n                }),\n            });\n            this.onPageAdd_ = this.onPageAdd_.bind(this);\n            this.onPageRemove_ = this.onPageRemove_.bind(this);\n            this.onPageSelectedChange_ = this.onPageSelectedChange_.bind(this);\n            this.pageSet_ = new NestedOrderedSet(() => null);\n            this.pageSet_.emitter.on('add', this.onPageAdd_);\n            this.pageSet_.emitter.on('remove', this.onPageRemove_);\n            this.empty_ = empty;\n            this.applyPages_();\n        }\n        get pageSet() {\n            return this.pageSet_;\n        }\n        add(pc, opt_index) {\n            this.pageSet_.add(pc, opt_index !== null && opt_index !== void 0 ? opt_index : this.pageSet_.items.length);\n        }\n        remove(index) {\n            this.pageSet_.remove(this.pageSet_.items[index]);\n        }\n        applyPages_() {\n            this.keepSelection_();\n            this.empty_.rawValue = this.pageSet_.items.length === 0;\n        }\n        onPageAdd_(ev) {\n            const pc = ev.item;\n            insertElementAt(this.view.itemsElement, pc.itemController.view.element, ev.index);\n            this.rackController.rack.add(pc.contentController, ev.index);\n            pc.props.value('selected').emitter.on('change', this.onPageSelectedChange_);\n            this.applyPages_();\n        }\n        onPageRemove_(ev) {\n            const pc = ev.item;\n            removeElement(pc.itemController.view.element);\n            this.rackController.rack.remove(pc.contentController);\n            pc.props\n                .value('selected')\n                .emitter.off('change', this.onPageSelectedChange_);\n            this.applyPages_();\n        }\n        keepSelection_() {\n            if (this.pageSet_.items.length === 0) {\n                return;\n            }\n            const firstSelIndex = this.pageSet_.items.findIndex((pc) => pc.props.get('selected'));\n            if (firstSelIndex < 0) {\n                this.pageSet_.items.forEach((pc, i) => {\n                    pc.props.set('selected', i === 0);\n                });\n            }\n            else {\n                this.pageSet_.items.forEach((pc, i) => {\n                    pc.props.set('selected', i === firstSelIndex);\n                });\n            }\n        }\n        onPageSelectedChange_(ev) {\n            if (ev.rawValue) {\n                const index = this.pageSet_.items.findIndex((pc) => pc.props.value('selected') === ev.sender);\n                this.pageSet_.items.forEach((pc, i) => {\n                    pc.props.set('selected', i === index);\n                });\n            }\n            else {\n                this.keepSelection_();\n            }\n        }\n    }\n\n    const TabBladePlugin = {\n        id: 'tab',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                pages: p.required.array(p.required.object({ title: p.required.string })),\n                view: p.required.constant('tab'),\n            });\n            if (!result || result.pages.length === 0) {\n                return null;\n            }\n            return { params: result };\n        },\n        controller(args) {\n            const c = new TabController(args.document, {\n                blade: args.blade,\n                viewProps: args.viewProps,\n            });\n            args.params.pages.forEach((p) => {\n                const pc = new TabPageController(args.document, {\n                    itemProps: ValueMap.fromObject({\n                        selected: false,\n                        title: p.title,\n                    }),\n                    props: ValueMap.fromObject({\n                        selected: false,\n                    }),\n                });\n                c.add(pc);\n            });\n            return c;\n        },\n        api(args) {\n            if (!(args.controller instanceof TabController)) {\n                return null;\n            }\n            return new TabApi(args.controller, args.pool);\n        },\n    };\n\n    function createBladeController(plugin, args) {\n        const ac = plugin.accept(args.params);\n        if (!ac) {\n            return null;\n        }\n        const disabled = ParamsParsers.optional.boolean(args.params['disabled']).value;\n        const hidden = ParamsParsers.optional.boolean(args.params['hidden']).value;\n        return plugin.controller({\n            blade: createBlade(),\n            document: args.document,\n            params: forceCast(Object.assign(Object.assign({}, ac.params), { disabled: disabled, hidden: hidden })),\n            viewProps: ViewProps.create({\n                disabled: disabled,\n                hidden: hidden,\n            }),\n        });\n    }\n\n    class ManualTicker {\n        constructor() {\n            this.disabled = false;\n            this.emitter = new Emitter();\n        }\n        dispose() { }\n        tick() {\n            if (this.disabled) {\n                return;\n            }\n            this.emitter.emit('tick', {\n                sender: this,\n            });\n        }\n    }\n\n    class IntervalTicker {\n        constructor(doc, interval) {\n            this.disabled_ = false;\n            this.timerId_ = null;\n            this.onTick_ = this.onTick_.bind(this);\n            this.doc_ = doc;\n            this.emitter = new Emitter();\n            this.interval_ = interval;\n            this.setTimer_();\n        }\n        get disabled() {\n            return this.disabled_;\n        }\n        set disabled(inactive) {\n            this.disabled_ = inactive;\n            if (this.disabled_) {\n                this.clearTimer_();\n            }\n            else {\n                this.setTimer_();\n            }\n        }\n        dispose() {\n            this.clearTimer_();\n        }\n        clearTimer_() {\n            if (this.timerId_ === null) {\n                return;\n            }\n            const win = this.doc_.defaultView;\n            if (win) {\n                win.clearInterval(this.timerId_);\n            }\n            this.timerId_ = null;\n        }\n        setTimer_() {\n            this.clearTimer_();\n            if (this.interval_ <= 0) {\n                return;\n            }\n            const win = this.doc_.defaultView;\n            if (win) {\n                this.timerId_ = win.setInterval(this.onTick_, this.interval_);\n            }\n        }\n        onTick_() {\n            if (this.disabled_) {\n                return;\n            }\n            this.emitter.emit('tick', {\n                sender: this,\n            });\n        }\n    }\n\n    class CompositeConstraint {\n        constructor(constraints) {\n            this.constraints = constraints;\n        }\n        constrain(value) {\n            return this.constraints.reduce((result, c) => {\n                return c.constrain(result);\n            }, value);\n        }\n    }\n    function findConstraint(c, constraintClass) {\n        if (c instanceof constraintClass) {\n            return c;\n        }\n        if (c instanceof CompositeConstraint) {\n            const result = c.constraints.reduce((tmpResult, sc) => {\n                if (tmpResult) {\n                    return tmpResult;\n                }\n                return sc instanceof constraintClass ? sc : null;\n            }, null);\n            if (result) {\n                return result;\n            }\n        }\n        return null;\n    }\n\n    class ListConstraint {\n        constructor(options) {\n            this.options = options;\n        }\n        constrain(value) {\n            const opts = this.options;\n            if (opts.length === 0) {\n                return value;\n            }\n            const matched = opts.filter((item) => {\n                return item.value === value;\n            }).length > 0;\n            return matched ? value : opts[0].value;\n        }\n    }\n\n    class RangeConstraint {\n        constructor(config) {\n            this.maxValue = config.max;\n            this.minValue = config.min;\n        }\n        constrain(value) {\n            let result = value;\n            if (!isEmpty(this.minValue)) {\n                result = Math.max(result, this.minValue);\n            }\n            if (!isEmpty(this.maxValue)) {\n                result = Math.min(result, this.maxValue);\n            }\n            return result;\n        }\n    }\n\n    class StepConstraint {\n        constructor(step) {\n            this.step = step;\n        }\n        constrain(value) {\n            const r = value < 0\n                ? -Math.round(-value / this.step)\n                : Math.round(value / this.step);\n            return r * this.step;\n        }\n    }\n\n    const className$j = ClassName('lst');\n    class ListView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.props_ = config.props;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$j());\n            config.viewProps.bindClassModifiers(this.element);\n            const selectElem = doc.createElement('select');\n            selectElem.classList.add(className$j('s'));\n            bindValueMap(this.props_, 'options', (opts) => {\n                removeChildElements(selectElem);\n                opts.forEach((item, index) => {\n                    const optionElem = doc.createElement('option');\n                    optionElem.dataset.index = String(index);\n                    optionElem.textContent = item.text;\n                    optionElem.value = String(item.value);\n                    selectElem.appendChild(optionElem);\n                });\n            });\n            config.viewProps.bindDisabled(selectElem);\n            this.element.appendChild(selectElem);\n            this.selectElement = selectElem;\n            const markElem = doc.createElement('div');\n            markElem.classList.add(className$j('m'));\n            markElem.appendChild(createSvgIconElement(doc, 'dropdown'));\n            this.element.appendChild(markElem);\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value_ = config.value;\n            this.update_();\n        }\n        update_() {\n            this.selectElement.value = String(this.value_.rawValue);\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class ListController {\n        constructor(doc, config) {\n            this.onSelectChange_ = this.onSelectChange_.bind(this);\n            this.props = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new ListView(doc, {\n                props: this.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.selectElement.addEventListener('change', this.onSelectChange_);\n        }\n        onSelectChange_(e) {\n            const selectElem = forceCast(e.currentTarget);\n            const optElem = selectElem.selectedOptions.item(0);\n            if (!optElem) {\n                return;\n            }\n            const itemIndex = Number(optElem.dataset.index);\n            this.value.rawValue = this.props.get('options')[itemIndex].value;\n        }\n    }\n\n    const className$i = ClassName('pop');\n    class PopupView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$i());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValue(config.shows, valueToClassName(this.element, className$i(undefined, 'v')));\n        }\n    }\n\n    class PopupController {\n        constructor(doc, config) {\n            this.shows = createValue(false);\n            this.viewProps = config.viewProps;\n            this.view = new PopupView(doc, {\n                shows: this.shows,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    const className$h = ClassName('txt');\n    class TextView {\n        constructor(doc, config) {\n            this.onChange_ = this.onChange_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$h());\n            config.viewProps.bindClassModifiers(this.element);\n            this.props_ = config.props;\n            this.props_.emitter.on('change', this.onChange_);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$h('i'));\n            inputElem.type = 'text';\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.value.emitter.on('change', this.onChange_);\n            this.value_ = config.value;\n            this.refresh();\n        }\n        refresh() {\n            const formatter = this.props_.get('formatter');\n            this.inputElement.value = formatter(this.value_.rawValue);\n        }\n        onChange_() {\n            this.refresh();\n        }\n    }\n\n    class TextController {\n        constructor(doc, config) {\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.parser_ = config.parser;\n            this.props = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new TextView(doc, {\n                props: config.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            const value = inputElem.value;\n            const parsedValue = this.parser_(value);\n            if (!isEmpty(parsedValue)) {\n                this.value.rawValue = parsedValue;\n            }\n            this.view.refresh();\n        }\n    }\n\n    function boolToString(value) {\n        return String(value);\n    }\n    function boolFromUnknown(value) {\n        if (value === 'false') {\n            return false;\n        }\n        return !!value;\n    }\n    function BooleanFormatter(value) {\n        return boolToString(value);\n    }\n\n    class NumberLiteralNode {\n        constructor(text) {\n            this.text = text;\n        }\n        evaluate() {\n            return Number(this.text);\n        }\n        toString() {\n            return this.text;\n        }\n    }\n    const BINARY_OPERATION_MAP = {\n        '**': (v1, v2) => Math.pow(v1, v2),\n        '*': (v1, v2) => v1 * v2,\n        '/': (v1, v2) => v1 / v2,\n        '%': (v1, v2) => v1 % v2,\n        '+': (v1, v2) => v1 + v2,\n        '-': (v1, v2) => v1 - v2,\n        '<<': (v1, v2) => v1 << v2,\n        '>>': (v1, v2) => v1 >> v2,\n        '>>>': (v1, v2) => v1 >>> v2,\n        '&': (v1, v2) => v1 & v2,\n        '^': (v1, v2) => v1 ^ v2,\n        '|': (v1, v2) => v1 | v2,\n    };\n    class BinaryOperationNode {\n        constructor(operator, left, right) {\n            this.left = left;\n            this.operator = operator;\n            this.right = right;\n        }\n        evaluate() {\n            const op = BINARY_OPERATION_MAP[this.operator];\n            if (!op) {\n                throw new Error(`unexpected binary operator: '${this.operator}`);\n            }\n            return op(this.left.evaluate(), this.right.evaluate());\n        }\n        toString() {\n            return [\n                'b(',\n                this.left.toString(),\n                this.operator,\n                this.right.toString(),\n                ')',\n            ].join(' ');\n        }\n    }\n    const UNARY_OPERATION_MAP = {\n        '+': (v) => v,\n        '-': (v) => -v,\n        '~': (v) => ~v,\n    };\n    class UnaryOperationNode {\n        constructor(operator, expr) {\n            this.operator = operator;\n            this.expression = expr;\n        }\n        evaluate() {\n            const op = UNARY_OPERATION_MAP[this.operator];\n            if (!op) {\n                throw new Error(`unexpected unary operator: '${this.operator}`);\n            }\n            return op(this.expression.evaluate());\n        }\n        toString() {\n            return ['u(', this.operator, this.expression.toString(), ')'].join(' ');\n        }\n    }\n\n    function combineReader(parsers) {\n        return (text, cursor) => {\n            for (let i = 0; i < parsers.length; i++) {\n                const result = parsers[i](text, cursor);\n                if (result !== '') {\n                    return result;\n                }\n            }\n            return '';\n        };\n    }\n    function readWhitespace(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^\\s+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readNonZeroDigit(text, cursor) {\n        const ch = text.substr(cursor, 1);\n        return ch.match(/^[1-9]$/) ? ch : '';\n    }\n    function readDecimalDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-9]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readSignedInteger(text, cursor) {\n        const ds = readDecimalDigits(text, cursor);\n        if (ds !== '') {\n            return ds;\n        }\n        const sign = text.substr(cursor, 1);\n        cursor += 1;\n        if (sign !== '-' && sign !== '+') {\n            return '';\n        }\n        const sds = readDecimalDigits(text, cursor);\n        if (sds === '') {\n            return '';\n        }\n        return sign + sds;\n    }\n    function readExponentPart(text, cursor) {\n        const e = text.substr(cursor, 1);\n        cursor += 1;\n        if (e.toLowerCase() !== 'e') {\n            return '';\n        }\n        const si = readSignedInteger(text, cursor);\n        if (si === '') {\n            return '';\n        }\n        return e + si;\n    }\n    function readDecimalIntegerLiteral(text, cursor) {\n        const ch = text.substr(cursor, 1);\n        if (ch === '0') {\n            return ch;\n        }\n        const nzd = readNonZeroDigit(text, cursor);\n        cursor += nzd.length;\n        if (nzd === '') {\n            return '';\n        }\n        return nzd + readDecimalDigits(text, cursor);\n    }\n    function readDecimalLiteral1(text, cursor) {\n        const dil = readDecimalIntegerLiteral(text, cursor);\n        cursor += dil.length;\n        if (dil === '') {\n            return '';\n        }\n        const dot = text.substr(cursor, 1);\n        cursor += dot.length;\n        if (dot !== '.') {\n            return '';\n        }\n        const dds = readDecimalDigits(text, cursor);\n        cursor += dds.length;\n        return dil + dot + dds + readExponentPart(text, cursor);\n    }\n    function readDecimalLiteral2(text, cursor) {\n        const dot = text.substr(cursor, 1);\n        cursor += dot.length;\n        if (dot !== '.') {\n            return '';\n        }\n        const dds = readDecimalDigits(text, cursor);\n        cursor += dds.length;\n        if (dds === '') {\n            return '';\n        }\n        return dot + dds + readExponentPart(text, cursor);\n    }\n    function readDecimalLiteral3(text, cursor) {\n        const dil = readDecimalIntegerLiteral(text, cursor);\n        cursor += dil.length;\n        if (dil === '') {\n            return '';\n        }\n        return dil + readExponentPart(text, cursor);\n    }\n    const readDecimalLiteral = combineReader([\n        readDecimalLiteral1,\n        readDecimalLiteral2,\n        readDecimalLiteral3,\n    ]);\n    function parseBinaryDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[01]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readBinaryIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0b') {\n            return '';\n        }\n        const bds = parseBinaryDigits(text, cursor);\n        if (bds === '') {\n            return '';\n        }\n        return prefix + bds;\n    }\n    function readOctalDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-7]+/);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readOctalIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0o') {\n            return '';\n        }\n        const ods = readOctalDigits(text, cursor);\n        if (ods === '') {\n            return '';\n        }\n        return prefix + ods;\n    }\n    function readHexDigits(text, cursor) {\n        var _a;\n        const m = text.substr(cursor).match(/^[0-9a-f]+/i);\n        return (_a = (m && m[0])) !== null && _a !== void 0 ? _a : '';\n    }\n    function readHexIntegerLiteral(text, cursor) {\n        const prefix = text.substr(cursor, 2);\n        cursor += prefix.length;\n        if (prefix.toLowerCase() !== '0x') {\n            return '';\n        }\n        const hds = readHexDigits(text, cursor);\n        if (hds === '') {\n            return '';\n        }\n        return prefix + hds;\n    }\n    const readNonDecimalIntegerLiteral = combineReader([\n        readBinaryIntegerLiteral,\n        readOctalIntegerLiteral,\n        readHexIntegerLiteral,\n    ]);\n    const readNumericLiteral = combineReader([\n        readNonDecimalIntegerLiteral,\n        readDecimalLiteral,\n    ]);\n\n    function parseLiteral(text, cursor) {\n        const num = readNumericLiteral(text, cursor);\n        cursor += num.length;\n        if (num === '') {\n            return null;\n        }\n        return {\n            evaluable: new NumberLiteralNode(num),\n            cursor: cursor,\n        };\n    }\n    function parseParenthesizedExpression(text, cursor) {\n        const op = text.substr(cursor, 1);\n        cursor += op.length;\n        if (op !== '(') {\n            return null;\n        }\n        const expr = parseExpression(text, cursor);\n        if (!expr) {\n            return null;\n        }\n        cursor = expr.cursor;\n        cursor += readWhitespace(text, cursor).length;\n        const cl = text.substr(cursor, 1);\n        cursor += cl.length;\n        if (cl !== ')') {\n            return null;\n        }\n        return {\n            evaluable: expr.evaluable,\n            cursor: cursor,\n        };\n    }\n    function parsePrimaryExpression(text, cursor) {\n        return (parseLiteral(text, cursor) || parseParenthesizedExpression(text, cursor));\n    }\n    function parseUnaryExpression(text, cursor) {\n        const expr = parsePrimaryExpression(text, cursor);\n        if (expr) {\n            return expr;\n        }\n        const op = text.substr(cursor, 1);\n        cursor += op.length;\n        if (op !== '+' && op !== '-' && op !== '~') {\n            return null;\n        }\n        const num = parseUnaryExpression(text, cursor);\n        if (!num) {\n            return null;\n        }\n        cursor = num.cursor;\n        return {\n            cursor: cursor,\n            evaluable: new UnaryOperationNode(op, num.evaluable),\n        };\n    }\n    function readBinaryOperator(ops, text, cursor) {\n        cursor += readWhitespace(text, cursor).length;\n        const op = ops.filter((op) => text.startsWith(op, cursor))[0];\n        if (!op) {\n            return null;\n        }\n        cursor += op.length;\n        cursor += readWhitespace(text, cursor).length;\n        return {\n            cursor: cursor,\n            operator: op,\n        };\n    }\n    function createBinaryOperationExpressionParser(exprParser, ops) {\n        return (text, cursor) => {\n            const firstExpr = exprParser(text, cursor);\n            if (!firstExpr) {\n                return null;\n            }\n            cursor = firstExpr.cursor;\n            let expr = firstExpr.evaluable;\n            for (;;) {\n                const op = readBinaryOperator(ops, text, cursor);\n                if (!op) {\n                    break;\n                }\n                cursor = op.cursor;\n                const nextExpr = exprParser(text, cursor);\n                if (!nextExpr) {\n                    return null;\n                }\n                cursor = nextExpr.cursor;\n                expr = new BinaryOperationNode(op.operator, expr, nextExpr.evaluable);\n            }\n            return expr\n                ? {\n                    cursor: cursor,\n                    evaluable: expr,\n                }\n                : null;\n        };\n    }\n    const parseBinaryOperationExpression = [\n        ['**'],\n        ['*', '/', '%'],\n        ['+', '-'],\n        ['<<', '>>>', '>>'],\n        ['&'],\n        ['^'],\n        ['|'],\n    ].reduce((parser, ops) => {\n        return createBinaryOperationExpressionParser(parser, ops);\n    }, parseUnaryExpression);\n    function parseExpression(text, cursor) {\n        cursor += readWhitespace(text, cursor).length;\n        return parseBinaryOperationExpression(text, cursor);\n    }\n    function parseEcmaNumberExpression(text) {\n        const expr = parseExpression(text, 0);\n        if (!expr) {\n            return null;\n        }\n        const cursor = expr.cursor + readWhitespace(text, expr.cursor).length;\n        if (cursor !== text.length) {\n            return null;\n        }\n        return expr.evaluable;\n    }\n\n    function parseNumber(text) {\n        var _a;\n        const r = parseEcmaNumberExpression(text);\n        return (_a = r === null || r === void 0 ? void 0 : r.evaluate()) !== null && _a !== void 0 ? _a : null;\n    }\n    function numberFromUnknown(value) {\n        if (typeof value === 'number') {\n            return value;\n        }\n        if (typeof value === 'string') {\n            const pv = parseNumber(value);\n            if (!isEmpty(pv)) {\n                return pv;\n            }\n        }\n        return 0;\n    }\n    function numberToString(value) {\n        return String(value);\n    }\n    function createNumberFormatter(digits) {\n        return (value) => {\n            return value.toFixed(Math.max(Math.min(digits, 20), 0));\n        };\n    }\n\n    const innerFormatter = createNumberFormatter(0);\n    function formatPercentage(value) {\n        return innerFormatter(value) + '%';\n    }\n\n    function stringFromUnknown(value) {\n        return String(value);\n    }\n    function formatString(value) {\n        return value;\n    }\n\n    function fillBuffer(buffer, bufferSize) {\n        while (buffer.length < bufferSize) {\n            buffer.push(undefined);\n        }\n    }\n    function initializeBuffer(bufferSize) {\n        const buffer = [];\n        fillBuffer(buffer, bufferSize);\n        return createValue(buffer);\n    }\n    function createTrimmedBuffer(buffer) {\n        const index = buffer.indexOf(undefined);\n        return forceCast(index < 0 ? buffer : buffer.slice(0, index));\n    }\n    function createPushedBuffer(buffer, newValue) {\n        const newBuffer = [...createTrimmedBuffer(buffer), newValue];\n        if (newBuffer.length > buffer.length) {\n            newBuffer.splice(0, newBuffer.length - buffer.length);\n        }\n        else {\n            fillBuffer(newBuffer, buffer.length);\n        }\n        return newBuffer;\n    }\n\n    function connectValues({ primary, secondary, forward, backward, }) {\n        let changing = false;\n        function preventFeedback(callback) {\n            if (changing) {\n                return;\n            }\n            changing = true;\n            callback();\n            changing = false;\n        }\n        primary.emitter.on('change', (ev) => {\n            preventFeedback(() => {\n                secondary.setRawValue(forward(primary, secondary), ev.options);\n            });\n        });\n        secondary.emitter.on('change', (ev) => {\n            preventFeedback(() => {\n                primary.setRawValue(backward(primary, secondary), ev.options);\n            });\n            preventFeedback(() => {\n                secondary.setRawValue(forward(primary, secondary), ev.options);\n            });\n        });\n        preventFeedback(() => {\n            secondary.setRawValue(forward(primary, secondary), {\n                forceEmit: false,\n                last: true,\n            });\n        });\n    }\n\n    function getStepForKey(baseStep, keys) {\n        const step = baseStep * (keys.altKey ? 0.1 : 1) * (keys.shiftKey ? 10 : 1);\n        if (keys.upKey) {\n            return +step;\n        }\n        else if (keys.downKey) {\n            return -step;\n        }\n        return 0;\n    }\n    function getVerticalStepKeys(ev) {\n        return {\n            altKey: ev.altKey,\n            downKey: ev.key === 'ArrowDown',\n            shiftKey: ev.shiftKey,\n            upKey: ev.key === 'ArrowUp',\n        };\n    }\n    function getHorizontalStepKeys(ev) {\n        return {\n            altKey: ev.altKey,\n            downKey: ev.key === 'ArrowLeft',\n            shiftKey: ev.shiftKey,\n            upKey: ev.key === 'ArrowRight',\n        };\n    }\n    function isVerticalArrowKey(key) {\n        return key === 'ArrowUp' || key === 'ArrowDown';\n    }\n    function isArrowKey(key) {\n        return isVerticalArrowKey(key) || key === 'ArrowLeft' || key === 'ArrowRight';\n    }\n\n    function computeOffset$1(ev, elem) {\n        const win = elem.ownerDocument.defaultView;\n        const rect = elem.getBoundingClientRect();\n        return {\n            x: ev.pageX - (((win && win.scrollX) || 0) + rect.left),\n            y: ev.pageY - (((win && win.scrollY) || 0) + rect.top),\n        };\n    }\n    class PointerHandler {\n        constructor(element) {\n            this.lastTouch_ = null;\n            this.onDocumentMouseMove_ = this.onDocumentMouseMove_.bind(this);\n            this.onDocumentMouseUp_ = this.onDocumentMouseUp_.bind(this);\n            this.onMouseDown_ = this.onMouseDown_.bind(this);\n            this.onTouchEnd_ = this.onTouchEnd_.bind(this);\n            this.onTouchMove_ = this.onTouchMove_.bind(this);\n            this.onTouchStart_ = this.onTouchStart_.bind(this);\n            this.elem_ = element;\n            this.emitter = new Emitter();\n            element.addEventListener('touchstart', this.onTouchStart_, {\n                passive: false,\n            });\n            element.addEventListener('touchmove', this.onTouchMove_, {\n                passive: true,\n            });\n            element.addEventListener('touchend', this.onTouchEnd_);\n            element.addEventListener('mousedown', this.onMouseDown_);\n        }\n        computePosition_(offset) {\n            const rect = this.elem_.getBoundingClientRect();\n            return {\n                bounds: {\n                    width: rect.width,\n                    height: rect.height,\n                },\n                point: offset\n                    ? {\n                        x: offset.x,\n                        y: offset.y,\n                    }\n                    : null,\n            };\n        }\n        onMouseDown_(ev) {\n            var _a;\n            ev.preventDefault();\n            (_a = ev.currentTarget) === null || _a === void 0 ? void 0 : _a.focus();\n            const doc = this.elem_.ownerDocument;\n            doc.addEventListener('mousemove', this.onDocumentMouseMove_);\n            doc.addEventListener('mouseup', this.onDocumentMouseUp_);\n            this.emitter.emit('down', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onDocumentMouseMove_(ev) {\n            this.emitter.emit('move', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onDocumentMouseUp_(ev) {\n            const doc = this.elem_.ownerDocument;\n            doc.removeEventListener('mousemove', this.onDocumentMouseMove_);\n            doc.removeEventListener('mouseup', this.onDocumentMouseUp_);\n            this.emitter.emit('up', {\n                altKey: ev.altKey,\n                data: this.computePosition_(computeOffset$1(ev, this.elem_)),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n        onTouchStart_(ev) {\n            ev.preventDefault();\n            const touch = ev.targetTouches.item(0);\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('down', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n            this.lastTouch_ = touch;\n        }\n        onTouchMove_(ev) {\n            const touch = ev.targetTouches.item(0);\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('move', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n            this.lastTouch_ = touch;\n        }\n        onTouchEnd_(ev) {\n            var _a;\n            const touch = (_a = ev.targetTouches.item(0)) !== null && _a !== void 0 ? _a : this.lastTouch_;\n            const rect = this.elem_.getBoundingClientRect();\n            this.emitter.emit('up', {\n                altKey: ev.altKey,\n                data: this.computePosition_(touch\n                    ? {\n                        x: touch.clientX - rect.left,\n                        y: touch.clientY - rect.top,\n                    }\n                    : undefined),\n                sender: this,\n                shiftKey: ev.shiftKey,\n            });\n        }\n    }\n\n    function mapRange(value, start1, end1, start2, end2) {\n        const p = (value - start1) / (end1 - start1);\n        return start2 + p * (end2 - start2);\n    }\n    function getDecimalDigits(value) {\n        const text = String(value.toFixed(10));\n        const frac = text.split('.')[1];\n        return frac.replace(/0+$/, '').length;\n    }\n    function constrainRange(value, min, max) {\n        return Math.min(Math.max(value, min), max);\n    }\n    function loopRange(value, max) {\n        return ((value % max) + max) % max;\n    }\n\n    const className$g = ClassName('txt');\n    class NumberTextView {\n        constructor(doc, config) {\n            this.onChange_ = this.onChange_.bind(this);\n            this.props_ = config.props;\n            this.props_.emitter.on('change', this.onChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$g(), className$g(undefined, 'num'));\n            if (config.arrayPosition) {\n                this.element.classList.add(className$g(undefined, config.arrayPosition));\n            }\n            config.viewProps.bindClassModifiers(this.element);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$g('i'));\n            inputElem.type = 'text';\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            this.onDraggingChange_ = this.onDraggingChange_.bind(this);\n            this.dragging_ = config.dragging;\n            this.dragging_.emitter.on('change', this.onDraggingChange_);\n            this.element.classList.add(className$g());\n            this.inputElement.classList.add(className$g('i'));\n            const knobElem = doc.createElement('div');\n            knobElem.classList.add(className$g('k'));\n            this.element.appendChild(knobElem);\n            this.knobElement = knobElem;\n            const guideElem = doc.createElementNS(SVG_NS, 'svg');\n            guideElem.classList.add(className$g('g'));\n            this.knobElement.appendChild(guideElem);\n            const bodyElem = doc.createElementNS(SVG_NS, 'path');\n            bodyElem.classList.add(className$g('gb'));\n            guideElem.appendChild(bodyElem);\n            this.guideBodyElem_ = bodyElem;\n            const headElem = doc.createElementNS(SVG_NS, 'path');\n            headElem.classList.add(className$g('gh'));\n            guideElem.appendChild(headElem);\n            this.guideHeadElem_ = headElem;\n            const tooltipElem = doc.createElement('div');\n            tooltipElem.classList.add(ClassName('tt')());\n            this.knobElement.appendChild(tooltipElem);\n            this.tooltipElem_ = tooltipElem;\n            config.value.emitter.on('change', this.onChange_);\n            this.value = config.value;\n            this.refresh();\n        }\n        onDraggingChange_(ev) {\n            if (ev.rawValue === null) {\n                this.element.classList.remove(className$g(undefined, 'drg'));\n                return;\n            }\n            this.element.classList.add(className$g(undefined, 'drg'));\n            const x = ev.rawValue / this.props_.get('draggingScale');\n            const aox = x + (x > 0 ? -1 : x < 0 ? +1 : 0);\n            const adx = constrainRange(-aox, -4, +4);\n            this.guideHeadElem_.setAttributeNS(null, 'd', [`M ${aox + adx},0 L${aox},4 L${aox + adx},8`, `M ${x},-1 L${x},9`].join(' '));\n            this.guideBodyElem_.setAttributeNS(null, 'd', `M 0,4 L${x},4`);\n            const formatter = this.props_.get('formatter');\n            this.tooltipElem_.textContent = formatter(this.value.rawValue);\n            this.tooltipElem_.style.left = `${x}px`;\n        }\n        refresh() {\n            const formatter = this.props_.get('formatter');\n            this.inputElement.value = formatter(this.value.rawValue);\n        }\n        onChange_() {\n            this.refresh();\n        }\n    }\n\n    class NumberTextController {\n        constructor(doc, config) {\n            this.originRawValue_ = 0;\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.onInputKeyDown_ = this.onInputKeyDown_.bind(this);\n            this.onInputKeyUp_ = this.onInputKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.baseStep_ = config.baseStep;\n            this.parser_ = config.parser;\n            this.props = config.props;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.dragging_ = createValue(null);\n            this.view = new NumberTextView(doc, {\n                arrayPosition: config.arrayPosition,\n                dragging: this.dragging_,\n                props: this.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n            this.view.inputElement.addEventListener('keydown', this.onInputKeyDown_);\n            this.view.inputElement.addEventListener('keyup', this.onInputKeyUp_);\n            const ph = new PointerHandler(this.view.knobElement);\n            ph.emitter.on('down', this.onPointerDown_);\n            ph.emitter.on('move', this.onPointerMove_);\n            ph.emitter.on('up', this.onPointerUp_);\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            const value = inputElem.value;\n            const parsedValue = this.parser_(value);\n            if (!isEmpty(parsedValue)) {\n                this.value.rawValue = parsedValue;\n            }\n            this.view.refresh();\n        }\n        onInputKeyDown_(ev) {\n            const step = getStepForKey(this.baseStep_, getVerticalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue + step, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onInputKeyUp_(ev) {\n            const step = getStepForKey(this.baseStep_, getVerticalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onPointerDown_() {\n            this.originRawValue_ = this.value.rawValue;\n            this.dragging_.rawValue = 0;\n        }\n        computeDraggingValue_(data) {\n            if (!data.point) {\n                return null;\n            }\n            const dx = data.point.x - data.bounds.width / 2;\n            return this.originRawValue_ + dx * this.props.get('draggingScale');\n        }\n        onPointerMove_(ev) {\n            const v = this.computeDraggingValue_(ev.data);\n            if (v === null) {\n                return;\n            }\n            this.value.setRawValue(v, {\n                forceEmit: false,\n                last: false,\n            });\n            this.dragging_.rawValue = this.value.rawValue - this.originRawValue_;\n        }\n        onPointerUp_(ev) {\n            const v = this.computeDraggingValue_(ev.data);\n            if (v === null) {\n                return;\n            }\n            this.value.setRawValue(v, {\n                forceEmit: true,\n                last: true,\n            });\n            this.dragging_.rawValue = null;\n        }\n    }\n\n    const className$f = ClassName('sld');\n    class SliderView {\n        constructor(doc, config) {\n            this.onChange_ = this.onChange_.bind(this);\n            this.props_ = config.props;\n            this.props_.emitter.on('change', this.onChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$f());\n            config.viewProps.bindClassModifiers(this.element);\n            const trackElem = doc.createElement('div');\n            trackElem.classList.add(className$f('t'));\n            config.viewProps.bindTabIndex(trackElem);\n            this.element.appendChild(trackElem);\n            this.trackElement = trackElem;\n            const knobElem = doc.createElement('div');\n            knobElem.classList.add(className$f('k'));\n            this.trackElement.appendChild(knobElem);\n            this.knobElement = knobElem;\n            config.value.emitter.on('change', this.onChange_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            const p = constrainRange(mapRange(this.value.rawValue, this.props_.get('minValue'), this.props_.get('maxValue'), 0, 100), 0, 100);\n            this.knobElement.style.width = `${p}%`;\n        }\n        onChange_() {\n            this.update_();\n        }\n    }\n\n    class SliderController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDownOrMove_ = this.onPointerDownOrMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.baseStep_ = config.baseStep;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.props = config.props;\n            this.view = new SliderView(doc, {\n                props: this.props,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.trackElement);\n            this.ptHandler_.emitter.on('down', this.onPointerDownOrMove_);\n            this.ptHandler_.emitter.on('move', this.onPointerDownOrMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.trackElement.addEventListener('keydown', this.onKeyDown_);\n            this.view.trackElement.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            this.value.setRawValue(mapRange(constrainRange(d.point.x, 0, d.bounds.width), 0, d.bounds.width, this.props.get('minValue'), this.props.get('maxValue')), opts);\n        }\n        onPointerDownOrMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            const step = getStepForKey(this.baseStep_, getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue + step, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const step = getStepForKey(this.baseStep_, getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    const className$e = ClassName('sldtxt');\n    class SliderTextView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$e());\n            const sliderElem = doc.createElement('div');\n            sliderElem.classList.add(className$e('s'));\n            this.sliderView_ = config.sliderView;\n            sliderElem.appendChild(this.sliderView_.element);\n            this.element.appendChild(sliderElem);\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$e('t'));\n            this.textView_ = config.textView;\n            textElem.appendChild(this.textView_.element);\n            this.element.appendChild(textElem);\n        }\n    }\n\n    class SliderTextController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.sliderC_ = new SliderController(doc, {\n                baseStep: config.baseStep,\n                props: config.sliderProps,\n                value: config.value,\n                viewProps: this.viewProps,\n            });\n            this.textC_ = new NumberTextController(doc, {\n                baseStep: config.baseStep,\n                parser: config.parser,\n                props: config.textProps,\n                value: config.value,\n                viewProps: config.viewProps,\n            });\n            this.view = new SliderTextView(doc, {\n                sliderView: this.sliderC_.view,\n                textView: this.textC_.view,\n            });\n        }\n        get sliderController() {\n            return this.sliderC_;\n        }\n        get textController() {\n            return this.textC_;\n        }\n    }\n\n    function writePrimitive(target, value) {\n        target.write(value);\n    }\n\n    function parseListOptions(value) {\n        const p = ParamsParsers;\n        if (Array.isArray(value)) {\n            return p.required.array(p.required.object({\n                text: p.required.string,\n                value: p.required.raw,\n            }))(value).value;\n        }\n        if (typeof value === 'object') {\n            return p.required.raw(value)\n                .value;\n        }\n        return undefined;\n    }\n    function parsePickerLayout(value) {\n        if (value === 'inline' || value === 'popup') {\n            return value;\n        }\n        return undefined;\n    }\n    function parsePointDimensionParams(value) {\n        const p = ParamsParsers;\n        return p.required.object({\n            max: p.optional.number,\n            min: p.optional.number,\n            step: p.optional.number,\n        })(value).value;\n    }\n    function normalizeListOptions(options) {\n        if (Array.isArray(options)) {\n            return options;\n        }\n        const items = [];\n        Object.keys(options).forEach((text) => {\n            items.push({ text: text, value: options[text] });\n        });\n        return items;\n    }\n    function createListConstraint(options) {\n        return !isEmpty(options)\n            ? new ListConstraint(normalizeListOptions(forceCast(options)))\n            : null;\n    }\n    function findListItems(constraint) {\n        const c = constraint\n            ? findConstraint(constraint, ListConstraint)\n            : null;\n        if (!c) {\n            return null;\n        }\n        return c.options;\n    }\n    function findStep(constraint) {\n        const c = constraint ? findConstraint(constraint, StepConstraint) : null;\n        if (!c) {\n            return null;\n        }\n        return c.step;\n    }\n    function getSuitableDecimalDigits(constraint, rawValue) {\n        const sc = constraint && findConstraint(constraint, StepConstraint);\n        if (sc) {\n            return getDecimalDigits(sc.step);\n        }\n        return Math.max(getDecimalDigits(rawValue), 2);\n    }\n    function getBaseStep(constraint) {\n        const step = findStep(constraint);\n        return step !== null && step !== void 0 ? step : 1;\n    }\n    function getSuitableDraggingScale(constraint, rawValue) {\n        var _a;\n        const sc = constraint && findConstraint(constraint, StepConstraint);\n        const base = Math.abs((_a = sc === null || sc === void 0 ? void 0 : sc.step) !== null && _a !== void 0 ? _a : rawValue);\n        return base === 0 ? 0.1 : Math.pow(10, Math.floor(Math.log10(base)) - 1);\n    }\n\n    const className$d = ClassName('ckb');\n    class CheckboxView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$d());\n            config.viewProps.bindClassModifiers(this.element);\n            const labelElem = doc.createElement('label');\n            labelElem.classList.add(className$d('l'));\n            this.element.appendChild(labelElem);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$d('i'));\n            inputElem.type = 'checkbox';\n            labelElem.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.viewProps.bindDisabled(this.inputElement);\n            const wrapperElem = doc.createElement('div');\n            wrapperElem.classList.add(className$d('w'));\n            labelElem.appendChild(wrapperElem);\n            const markElem = createSvgIconElement(doc, 'check');\n            wrapperElem.appendChild(markElem);\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            this.inputElement.checked = this.value.rawValue;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class CheckboxController {\n        constructor(doc, config) {\n            this.onInputChange_ = this.onInputChange_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new CheckboxView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view.inputElement.addEventListener('change', this.onInputChange_);\n        }\n        onInputChange_(e) {\n            const inputElem = forceCast(e.currentTarget);\n            this.value.rawValue = inputElem.checked;\n        }\n    }\n\n    function createConstraint$5(params) {\n        const constraints = [];\n        const lc = createListConstraint(params.options);\n        if (lc) {\n            constraints.push(lc);\n        }\n        return new CompositeConstraint(constraints);\n    }\n    const BooleanInputPlugin = {\n        id: 'input-bool',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'boolean') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                options: p.optional.custom(parseListOptions),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => boolFromUnknown,\n            constraint: (args) => createConstraint$5(args.params),\n            writer: (_args) => writePrimitive,\n        },\n        controller: (args) => {\n            var _a;\n            const doc = args.document;\n            const value = args.value;\n            const c = args.constraint;\n            if (c && findConstraint(c, ListConstraint)) {\n                return new ListController(doc, {\n                    props: ValueMap.fromObject({\n                        options: (_a = findListItems(c)) !== null && _a !== void 0 ? _a : [],\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new CheckboxController(doc, {\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    const className$c = ClassName('col');\n    class ColorView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$c());\n            config.foldable.bindExpandedClass(this.element, className$c(undefined, 'expanded'));\n            bindValueMap(config.foldable, 'completed', valueToClassName(this.element, className$c(undefined, 'cpl')));\n            const headElem = doc.createElement('div');\n            headElem.classList.add(className$c('h'));\n            this.element.appendChild(headElem);\n            const swatchElem = doc.createElement('div');\n            swatchElem.classList.add(className$c('s'));\n            headElem.appendChild(swatchElem);\n            this.swatchElement = swatchElem;\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$c('t'));\n            headElem.appendChild(textElem);\n            this.textElement = textElem;\n            if (config.pickerLayout === 'inline') {\n                const pickerElem = doc.createElement('div');\n                pickerElem.classList.add(className$c('p'));\n                this.element.appendChild(pickerElem);\n                this.pickerElement = pickerElem;\n            }\n            else {\n                this.pickerElement = null;\n            }\n        }\n    }\n\n    function rgbToHsl(r, g, b) {\n        const rp = constrainRange(r / 255, 0, 1);\n        const gp = constrainRange(g / 255, 0, 1);\n        const bp = constrainRange(b / 255, 0, 1);\n        const cmax = Math.max(rp, gp, bp);\n        const cmin = Math.min(rp, gp, bp);\n        const c = cmax - cmin;\n        let h = 0;\n        let s = 0;\n        const l = (cmin + cmax) / 2;\n        if (c !== 0) {\n            s = c / (1 - Math.abs(cmax + cmin - 1));\n            if (rp === cmax) {\n                h = (gp - bp) / c;\n            }\n            else if (gp === cmax) {\n                h = 2 + (bp - rp) / c;\n            }\n            else {\n                h = 4 + (rp - gp) / c;\n            }\n            h = h / 6 + (h < 0 ? 1 : 0);\n        }\n        return [h * 360, s * 100, l * 100];\n    }\n    function hslToRgb(h, s, l) {\n        const hp = ((h % 360) + 360) % 360;\n        const sp = constrainRange(s / 100, 0, 1);\n        const lp = constrainRange(l / 100, 0, 1);\n        const c = (1 - Math.abs(2 * lp - 1)) * sp;\n        const x = c * (1 - Math.abs(((hp / 60) % 2) - 1));\n        const m = lp - c / 2;\n        let rp, gp, bp;\n        if (hp >= 0 && hp < 60) {\n            [rp, gp, bp] = [c, x, 0];\n        }\n        else if (hp >= 60 && hp < 120) {\n            [rp, gp, bp] = [x, c, 0];\n        }\n        else if (hp >= 120 && hp < 180) {\n            [rp, gp, bp] = [0, c, x];\n        }\n        else if (hp >= 180 && hp < 240) {\n            [rp, gp, bp] = [0, x, c];\n        }\n        else if (hp >= 240 && hp < 300) {\n            [rp, gp, bp] = [x, 0, c];\n        }\n        else {\n            [rp, gp, bp] = [c, 0, x];\n        }\n        return [(rp + m) * 255, (gp + m) * 255, (bp + m) * 255];\n    }\n    function rgbToHsv(r, g, b) {\n        const rp = constrainRange(r / 255, 0, 1);\n        const gp = constrainRange(g / 255, 0, 1);\n        const bp = constrainRange(b / 255, 0, 1);\n        const cmax = Math.max(rp, gp, bp);\n        const cmin = Math.min(rp, gp, bp);\n        const d = cmax - cmin;\n        let h;\n        if (d === 0) {\n            h = 0;\n        }\n        else if (cmax === rp) {\n            h = 60 * (((((gp - bp) / d) % 6) + 6) % 6);\n        }\n        else if (cmax === gp) {\n            h = 60 * ((bp - rp) / d + 2);\n        }\n        else {\n            h = 60 * ((rp - gp) / d + 4);\n        }\n        const s = cmax === 0 ? 0 : d / cmax;\n        const v = cmax;\n        return [h, s * 100, v * 100];\n    }\n    function hsvToRgb(h, s, v) {\n        const hp = loopRange(h, 360);\n        const sp = constrainRange(s / 100, 0, 1);\n        const vp = constrainRange(v / 100, 0, 1);\n        const c = vp * sp;\n        const x = c * (1 - Math.abs(((hp / 60) % 2) - 1));\n        const m = vp - c;\n        let rp, gp, bp;\n        if (hp >= 0 && hp < 60) {\n            [rp, gp, bp] = [c, x, 0];\n        }\n        else if (hp >= 60 && hp < 120) {\n            [rp, gp, bp] = [x, c, 0];\n        }\n        else if (hp >= 120 && hp < 180) {\n            [rp, gp, bp] = [0, c, x];\n        }\n        else if (hp >= 180 && hp < 240) {\n            [rp, gp, bp] = [0, x, c];\n        }\n        else if (hp >= 240 && hp < 300) {\n            [rp, gp, bp] = [x, 0, c];\n        }\n        else {\n            [rp, gp, bp] = [c, 0, x];\n        }\n        return [(rp + m) * 255, (gp + m) * 255, (bp + m) * 255];\n    }\n    function hslToHsv(h, s, l) {\n        const sd = l + (s * (100 - Math.abs(2 * l - 100))) / (2 * 100);\n        return [\n            h,\n            sd !== 0 ? (s * (100 - Math.abs(2 * l - 100))) / sd : 0,\n            l + (s * (100 - Math.abs(2 * l - 100))) / (2 * 100),\n        ];\n    }\n    function hsvToHsl(h, s, v) {\n        const sd = 100 - Math.abs((v * (200 - s)) / 100 - 100);\n        return [h, sd !== 0 ? (s * v) / sd : 0, (v * (200 - s)) / (2 * 100)];\n    }\n    function removeAlphaComponent(comps) {\n        return [comps[0], comps[1], comps[2]];\n    }\n    function appendAlphaComponent(comps, alpha) {\n        return [comps[0], comps[1], comps[2], alpha];\n    }\n    const MODE_CONVERTER_MAP = {\n        hsl: {\n            hsl: (h, s, l) => [h, s, l],\n            hsv: hslToHsv,\n            rgb: hslToRgb,\n        },\n        hsv: {\n            hsl: hsvToHsl,\n            hsv: (h, s, v) => [h, s, v],\n            rgb: hsvToRgb,\n        },\n        rgb: {\n            hsl: rgbToHsl,\n            hsv: rgbToHsv,\n            rgb: (r, g, b) => [r, g, b],\n        },\n    };\n    function convertColorMode(components, fromMode, toMode) {\n        return MODE_CONVERTER_MAP[fromMode][toMode](...components);\n    }\n\n    const CONSTRAINT_MAP = {\n        hsl: (comps) => {\n            var _a;\n            return [\n                loopRange(comps[0], 360),\n                constrainRange(comps[1], 0, 100),\n                constrainRange(comps[2], 0, 100),\n                constrainRange((_a = comps[3]) !== null && _a !== void 0 ? _a : 1, 0, 1),\n            ];\n        },\n        hsv: (comps) => {\n            var _a;\n            return [\n                loopRange(comps[0], 360),\n                constrainRange(comps[1], 0, 100),\n                constrainRange(comps[2], 0, 100),\n                constrainRange((_a = comps[3]) !== null && _a !== void 0 ? _a : 1, 0, 1),\n            ];\n        },\n        rgb: (comps) => {\n            var _a;\n            return [\n                constrainRange(comps[0], 0, 255),\n                constrainRange(comps[1], 0, 255),\n                constrainRange(comps[2], 0, 255),\n                constrainRange((_a = comps[3]) !== null && _a !== void 0 ? _a : 1, 0, 1),\n            ];\n        },\n    };\n    function isRgbColorComponent(obj, key) {\n        if (typeof obj !== 'object' || isEmpty(obj)) {\n            return false;\n        }\n        return key in obj && typeof obj[key] === 'number';\n    }\n    class Color {\n        constructor(comps, mode) {\n            this.mode_ = mode;\n            this.comps_ = CONSTRAINT_MAP[mode](comps);\n        }\n        static black() {\n            return new Color([0, 0, 0], 'rgb');\n        }\n        static fromObject(obj) {\n            const comps = 'a' in obj ? [obj.r, obj.g, obj.b, obj.a] : [obj.r, obj.g, obj.b];\n            return new Color(comps, 'rgb');\n        }\n        static toRgbaObject(color) {\n            return color.toRgbaObject();\n        }\n        static isRgbColorObject(obj) {\n            return (isRgbColorComponent(obj, 'r') &&\n                isRgbColorComponent(obj, 'g') &&\n                isRgbColorComponent(obj, 'b'));\n        }\n        static isRgbaColorObject(obj) {\n            return this.isRgbColorObject(obj) && isRgbColorComponent(obj, 'a');\n        }\n        static isColorObject(obj) {\n            return this.isRgbColorObject(obj);\n        }\n        static equals(v1, v2) {\n            if (v1.mode_ !== v2.mode_) {\n                return false;\n            }\n            const comps1 = v1.comps_;\n            const comps2 = v2.comps_;\n            for (let i = 0; i < comps1.length; i++) {\n                if (comps1[i] !== comps2[i]) {\n                    return false;\n                }\n            }\n            return true;\n        }\n        get mode() {\n            return this.mode_;\n        }\n        getComponents(opt_mode) {\n            return appendAlphaComponent(convertColorMode(removeAlphaComponent(this.comps_), this.mode_, opt_mode || this.mode_), this.comps_[3]);\n        }\n        toRgbaObject() {\n            const rgbComps = this.getComponents('rgb');\n            return {\n                r: rgbComps[0],\n                g: rgbComps[1],\n                b: rgbComps[2],\n                a: rgbComps[3],\n            };\n        }\n    }\n\n    const className$b = ClassName('colp');\n    class ColorPickerView {\n        constructor(doc, config) {\n            this.alphaViews_ = null;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$b());\n            const hsvElem = doc.createElement('div');\n            hsvElem.classList.add(className$b('hsv'));\n            const svElem = doc.createElement('div');\n            svElem.classList.add(className$b('sv'));\n            this.svPaletteView_ = config.svPaletteView;\n            svElem.appendChild(this.svPaletteView_.element);\n            hsvElem.appendChild(svElem);\n            const hElem = doc.createElement('div');\n            hElem.classList.add(className$b('h'));\n            this.hPaletteView_ = config.hPaletteView;\n            hElem.appendChild(this.hPaletteView_.element);\n            hsvElem.appendChild(hElem);\n            this.element.appendChild(hsvElem);\n            const rgbElem = doc.createElement('div');\n            rgbElem.classList.add(className$b('rgb'));\n            this.textView_ = config.textView;\n            rgbElem.appendChild(this.textView_.element);\n            this.element.appendChild(rgbElem);\n            if (config.alphaViews) {\n                this.alphaViews_ = {\n                    palette: config.alphaViews.palette,\n                    text: config.alphaViews.text,\n                };\n                const aElem = doc.createElement('div');\n                aElem.classList.add(className$b('a'));\n                const apElem = doc.createElement('div');\n                apElem.classList.add(className$b('ap'));\n                apElem.appendChild(this.alphaViews_.palette.element);\n                aElem.appendChild(apElem);\n                const atElem = doc.createElement('div');\n                atElem.classList.add(className$b('at'));\n                atElem.appendChild(this.alphaViews_.text.element);\n                aElem.appendChild(atElem);\n                this.element.appendChild(aElem);\n            }\n        }\n        get allFocusableElements() {\n            const elems = [\n                this.svPaletteView_.element,\n                this.hPaletteView_.element,\n                this.textView_.modeSelectElement,\n                ...this.textView_.textViews.map((v) => v.inputElement),\n            ];\n            if (this.alphaViews_) {\n                elems.push(this.alphaViews_.palette.element, this.alphaViews_.text.inputElement);\n            }\n            return elems;\n        }\n    }\n\n    function parseColorInputParams(params) {\n        const p = ParamsParsers;\n        return parseParams(params, {\n            alpha: p.optional.boolean,\n            expanded: p.optional.boolean,\n            picker: p.optional.custom(parsePickerLayout),\n        });\n    }\n    function getBaseStepForColor(forAlpha) {\n        return forAlpha ? 0.1 : 1;\n    }\n\n    function parseCssNumberOrPercentage(text, maxValue) {\n        const m = text.match(/^(.+)%$/);\n        if (!m) {\n            return Math.min(parseFloat(text), maxValue);\n        }\n        return Math.min(parseFloat(m[1]) * 0.01 * maxValue, maxValue);\n    }\n    const ANGLE_TO_DEG_MAP = {\n        deg: (angle) => angle,\n        grad: (angle) => (angle * 360) / 400,\n        rad: (angle) => (angle * 360) / (2 * Math.PI),\n        turn: (angle) => angle * 360,\n    };\n    function parseCssNumberOrAngle(text) {\n        const m = text.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);\n        if (!m) {\n            return parseFloat(text);\n        }\n        const angle = parseFloat(m[1]);\n        const unit = m[2];\n        return ANGLE_TO_DEG_MAP[unit](angle);\n    }\n    const NOTATION_TO_PARSER_MAP = {\n        'func.rgb': (text) => {\n            const m = text.match(/^rgb\\(\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n            if (!m) {\n                return null;\n            }\n            const comps = [\n                parseCssNumberOrPercentage(m[1], 255),\n                parseCssNumberOrPercentage(m[2], 255),\n                parseCssNumberOrPercentage(m[3], 255),\n            ];\n            if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n                return null;\n            }\n            return new Color(comps, 'rgb');\n        },\n        'func.rgba': (text) => {\n            const m = text.match(/^rgba\\(\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n            if (!m) {\n                return null;\n            }\n            const comps = [\n                parseCssNumberOrPercentage(m[1], 255),\n                parseCssNumberOrPercentage(m[2], 255),\n                parseCssNumberOrPercentage(m[3], 255),\n                parseCssNumberOrPercentage(m[4], 1),\n            ];\n            if (isNaN(comps[0]) ||\n                isNaN(comps[1]) ||\n                isNaN(comps[2]) ||\n                isNaN(comps[3])) {\n                return null;\n            }\n            return new Color(comps, 'rgb');\n        },\n        'func.hsl': (text) => {\n            const m = text.match(/^hsl\\(\\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n            if (!m) {\n                return null;\n            }\n            const comps = [\n                parseCssNumberOrAngle(m[1]),\n                parseCssNumberOrPercentage(m[2], 100),\n                parseCssNumberOrPercentage(m[3], 100),\n            ];\n            if (isNaN(comps[0]) || isNaN(comps[1]) || isNaN(comps[2])) {\n                return null;\n            }\n            return new Color(comps, 'hsl');\n        },\n        'func.hsla': (text) => {\n            const m = text.match(/^hsla\\(\\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*,\\s*([0-9A-Fa-f.]+%?)\\s*\\)$/);\n            if (!m) {\n                return null;\n            }\n            const comps = [\n                parseCssNumberOrAngle(m[1]),\n                parseCssNumberOrPercentage(m[2], 100),\n                parseCssNumberOrPercentage(m[3], 100),\n                parseCssNumberOrPercentage(m[4], 1),\n            ];\n            if (isNaN(comps[0]) ||\n                isNaN(comps[1]) ||\n                isNaN(comps[2]) ||\n                isNaN(comps[3])) {\n                return null;\n            }\n            return new Color(comps, 'hsl');\n        },\n        'hex.rgb': (text) => {\n            const mRgb = text.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);\n            if (mRgb) {\n                return new Color([\n                    parseInt(mRgb[1] + mRgb[1], 16),\n                    parseInt(mRgb[2] + mRgb[2], 16),\n                    parseInt(mRgb[3] + mRgb[3], 16),\n                ], 'rgb');\n            }\n            const mRrggbb = text.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);\n            if (mRrggbb) {\n                return new Color([\n                    parseInt(mRrggbb[1], 16),\n                    parseInt(mRrggbb[2], 16),\n                    parseInt(mRrggbb[3], 16),\n                ], 'rgb');\n            }\n            return null;\n        },\n        'hex.rgba': (text) => {\n            const mRgb = text.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);\n            if (mRgb) {\n                return new Color([\n                    parseInt(mRgb[1] + mRgb[1], 16),\n                    parseInt(mRgb[2] + mRgb[2], 16),\n                    parseInt(mRgb[3] + mRgb[3], 16),\n                    mapRange(parseInt(mRgb[4] + mRgb[4], 16), 0, 255, 0, 1),\n                ], 'rgb');\n            }\n            const mRrggbb = text.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);\n            if (mRrggbb) {\n                return new Color([\n                    parseInt(mRrggbb[1], 16),\n                    parseInt(mRrggbb[2], 16),\n                    parseInt(mRrggbb[3], 16),\n                    mapRange(parseInt(mRrggbb[4], 16), 0, 255, 0, 1),\n                ], 'rgb');\n            }\n            return null;\n        },\n    };\n    function getColorNotation(text) {\n        const notations = Object.keys(NOTATION_TO_PARSER_MAP);\n        return notations.reduce((result, notation) => {\n            if (result) {\n                return result;\n            }\n            const subparser = NOTATION_TO_PARSER_MAP[notation];\n            return subparser(text) ? notation : null;\n        }, null);\n    }\n    const CompositeColorParser = (text) => {\n        const notation = getColorNotation(text);\n        return notation ? NOTATION_TO_PARSER_MAP[notation](text) : null;\n    };\n    function hasAlphaComponent(notation) {\n        return (notation === 'func.hsla' ||\n            notation === 'func.rgba' ||\n            notation === 'hex.rgba');\n    }\n    function colorFromString(value) {\n        if (typeof value === 'string') {\n            const cv = CompositeColorParser(value);\n            if (cv) {\n                return cv;\n            }\n        }\n        return Color.black();\n    }\n    function zerofill(comp) {\n        const hex = constrainRange(Math.floor(comp), 0, 255).toString(16);\n        return hex.length === 1 ? `0${hex}` : hex;\n    }\n    function colorToHexRgbString(value, prefix = '#') {\n        const hexes = removeAlphaComponent(value.getComponents('rgb'))\n            .map(zerofill)\n            .join('');\n        return `${prefix}${hexes}`;\n    }\n    function colorToHexRgbaString(value, prefix = '#') {\n        const rgbaComps = value.getComponents('rgb');\n        const hexes = [rgbaComps[0], rgbaComps[1], rgbaComps[2], rgbaComps[3] * 255]\n            .map(zerofill)\n            .join('');\n        return `${prefix}${hexes}`;\n    }\n    function colorToFunctionalRgbString(value) {\n        const formatter = createNumberFormatter(0);\n        const comps = removeAlphaComponent(value.getComponents('rgb')).map((comp) => formatter(comp));\n        return `rgb(${comps.join(', ')})`;\n    }\n    function colorToFunctionalRgbaString(value) {\n        const aFormatter = createNumberFormatter(2);\n        const rgbFormatter = createNumberFormatter(0);\n        const comps = value.getComponents('rgb').map((comp, index) => {\n            const formatter = index === 3 ? aFormatter : rgbFormatter;\n            return formatter(comp);\n        });\n        return `rgba(${comps.join(', ')})`;\n    }\n    function colorToFunctionalHslString(value) {\n        const formatters = [\n            createNumberFormatter(0),\n            formatPercentage,\n            formatPercentage,\n        ];\n        const comps = removeAlphaComponent(value.getComponents('hsl')).map((comp, index) => formatters[index](comp));\n        return `hsl(${comps.join(', ')})`;\n    }\n    function colorToFunctionalHslaString(value) {\n        const formatters = [\n            createNumberFormatter(0),\n            formatPercentage,\n            formatPercentage,\n            createNumberFormatter(2),\n        ];\n        const comps = value\n            .getComponents('hsl')\n            .map((comp, index) => formatters[index](comp));\n        return `hsla(${comps.join(', ')})`;\n    }\n    const NOTATION_TO_STRINGIFIER_MAP = {\n        'func.hsl': colorToFunctionalHslString,\n        'func.hsla': colorToFunctionalHslaString,\n        'func.rgb': colorToFunctionalRgbString,\n        'func.rgba': colorToFunctionalRgbaString,\n        'hex.rgb': colorToHexRgbString,\n        'hex.rgba': colorToHexRgbaString,\n    };\n    function getColorStringifier(notation) {\n        return NOTATION_TO_STRINGIFIER_MAP[notation];\n    }\n\n    const className$a = ClassName('apl');\n    class APaletteView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$a());\n            config.viewProps.bindTabIndex(this.element);\n            const barElem = doc.createElement('div');\n            barElem.classList.add(className$a('b'));\n            this.element.appendChild(barElem);\n            const colorElem = doc.createElement('div');\n            colorElem.classList.add(className$a('c'));\n            barElem.appendChild(colorElem);\n            this.colorElem_ = colorElem;\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$a('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            const previewElem = doc.createElement('div');\n            previewElem.classList.add(className$a('p'));\n            this.markerElem_.appendChild(previewElem);\n            this.previewElem_ = previewElem;\n            this.update_();\n        }\n        update_() {\n            const c = this.value.rawValue;\n            const rgbaComps = c.getComponents('rgb');\n            const leftColor = new Color([rgbaComps[0], rgbaComps[1], rgbaComps[2], 0], 'rgb');\n            const rightColor = new Color([rgbaComps[0], rgbaComps[1], rgbaComps[2], 255], 'rgb');\n            const gradientComps = [\n                'to right',\n                colorToFunctionalRgbaString(leftColor),\n                colorToFunctionalRgbaString(rightColor),\n            ];\n            this.colorElem_.style.background = `linear-gradient(${gradientComps.join(',')})`;\n            this.previewElem_.style.backgroundColor = colorToFunctionalRgbaString(c);\n            const left = mapRange(rgbaComps[3], 0, 1, 0, 100);\n            this.markerElem_.style.left = `${left}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class APaletteController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new APaletteView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.element);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n            this.view.element.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const alpha = d.point.x / d.bounds.width;\n            const c = this.value.rawValue;\n            const [h, s, v] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([h, s, v, alpha], 'hsv'), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            const step = getStepForKey(getBaseStepForColor(true), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            const c = this.value.rawValue;\n            const [h, s, v, a] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([h, s, v, a + step], 'hsv'), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const step = getStepForKey(getBaseStepForColor(true), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    const className$9 = ClassName('coltxt');\n    function createModeSelectElement(doc) {\n        const selectElem = doc.createElement('select');\n        const items = [\n            { text: 'RGB', value: 'rgb' },\n            { text: 'HSL', value: 'hsl' },\n            { text: 'HSV', value: 'hsv' },\n        ];\n        selectElem.appendChild(items.reduce((frag, item) => {\n            const optElem = doc.createElement('option');\n            optElem.textContent = item.text;\n            optElem.value = item.value;\n            frag.appendChild(optElem);\n            return frag;\n        }, doc.createDocumentFragment()));\n        return selectElem;\n    }\n    class ColorTextView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$9());\n            const modeElem = doc.createElement('div');\n            modeElem.classList.add(className$9('m'));\n            this.modeElem_ = createModeSelectElement(doc);\n            this.modeElem_.classList.add(className$9('ms'));\n            modeElem.appendChild(this.modeSelectElement);\n            const modeMarkerElem = doc.createElement('div');\n            modeMarkerElem.classList.add(className$9('mm'));\n            modeMarkerElem.appendChild(createSvgIconElement(doc, 'dropdown'));\n            modeElem.appendChild(modeMarkerElem);\n            this.element.appendChild(modeElem);\n            const textsElem = doc.createElement('div');\n            textsElem.classList.add(className$9('w'));\n            this.element.appendChild(textsElem);\n            this.textsElem_ = textsElem;\n            this.textViews_ = config.textViews;\n            this.applyTextViews_();\n            bindValue(config.colorMode, (mode) => {\n                this.modeElem_.value = mode;\n            });\n        }\n        get modeSelectElement() {\n            return this.modeElem_;\n        }\n        get textViews() {\n            return this.textViews_;\n        }\n        set textViews(textViews) {\n            this.textViews_ = textViews;\n            this.applyTextViews_();\n        }\n        applyTextViews_() {\n            removeChildElements(this.textsElem_);\n            const doc = this.element.ownerDocument;\n            this.textViews_.forEach((v) => {\n                const compElem = doc.createElement('div');\n                compElem.classList.add(className$9('c'));\n                compElem.appendChild(v.element);\n                this.textsElem_.appendChild(compElem);\n            });\n        }\n    }\n\n    const FORMATTER = createNumberFormatter(0);\n    const MODE_TO_CONSTRAINT_MAP = {\n        rgb: () => {\n            return new RangeConstraint({ min: 0, max: 255 });\n        },\n        hsl: (index) => {\n            return index === 0\n                ? new RangeConstraint({ min: 0, max: 360 })\n                : new RangeConstraint({ min: 0, max: 100 });\n        },\n        hsv: (index) => {\n            return index === 0\n                ? new RangeConstraint({ min: 0, max: 360 })\n                : new RangeConstraint({ min: 0, max: 100 });\n        },\n    };\n    function createComponentController(doc, config, index) {\n        return new NumberTextController(doc, {\n            arrayPosition: index === 0 ? 'fst' : index === 3 - 1 ? 'lst' : 'mid',\n            baseStep: getBaseStepForColor(false),\n            parser: config.parser,\n            props: ValueMap.fromObject({\n                draggingScale: 1,\n                formatter: FORMATTER,\n            }),\n            value: createValue(0, {\n                constraint: MODE_TO_CONSTRAINT_MAP[config.colorMode](index),\n            }),\n            viewProps: config.viewProps,\n        });\n    }\n    class ColorTextController {\n        constructor(doc, config) {\n            this.onModeSelectChange_ = this.onModeSelectChange_.bind(this);\n            this.parser_ = config.parser;\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.colorMode = createValue(this.value.rawValue.mode);\n            this.ccs_ = this.createComponentControllers_(doc);\n            this.view = new ColorTextView(doc, {\n                colorMode: this.colorMode,\n                textViews: [this.ccs_[0].view, this.ccs_[1].view, this.ccs_[2].view],\n            });\n            this.view.modeSelectElement.addEventListener('change', this.onModeSelectChange_);\n        }\n        createComponentControllers_(doc) {\n            const cc = {\n                colorMode: this.colorMode.rawValue,\n                parser: this.parser_,\n                viewProps: this.viewProps,\n            };\n            const ccs = [\n                createComponentController(doc, cc, 0),\n                createComponentController(doc, cc, 1),\n                createComponentController(doc, cc, 2),\n            ];\n            ccs.forEach((cs, index) => {\n                connectValues({\n                    primary: this.value,\n                    secondary: cs.value,\n                    forward: (p) => {\n                        return p.rawValue.getComponents(this.colorMode.rawValue)[index];\n                    },\n                    backward: (p, s) => {\n                        const pickedMode = this.colorMode.rawValue;\n                        const comps = p.rawValue.getComponents(pickedMode);\n                        comps[index] = s.rawValue;\n                        return new Color(appendAlphaComponent(removeAlphaComponent(comps), comps[3]), pickedMode);\n                    },\n                });\n            });\n            return ccs;\n        }\n        onModeSelectChange_(ev) {\n            const selectElem = ev.currentTarget;\n            this.colorMode.rawValue = selectElem.value;\n            this.ccs_ = this.createComponentControllers_(this.view.element.ownerDocument);\n            this.view.textViews = [\n                this.ccs_[0].view,\n                this.ccs_[1].view,\n                this.ccs_[2].view,\n            ];\n        }\n    }\n\n    const className$8 = ClassName('hpl');\n    class HPaletteView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$8());\n            config.viewProps.bindTabIndex(this.element);\n            const colorElem = doc.createElement('div');\n            colorElem.classList.add(className$8('c'));\n            this.element.appendChild(colorElem);\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$8('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            this.update_();\n        }\n        update_() {\n            const c = this.value.rawValue;\n            const [h] = c.getComponents('hsv');\n            this.markerElem_.style.backgroundColor = colorToFunctionalRgbString(new Color([h, 100, 100], 'hsv'));\n            const left = mapRange(h, 0, 360, 0, 100);\n            this.markerElem_.style.left = `${left}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class HPaletteController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new HPaletteView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.element);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n            this.view.element.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const hue = mapRange(d.point.x, 0, d.bounds.width, 0, 360);\n            const c = this.value.rawValue;\n            const [, s, v, a] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([hue, s, v, a], 'hsv'), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            const step = getStepForKey(getBaseStepForColor(false), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            const c = this.value.rawValue;\n            const [h, s, v, a] = c.getComponents('hsv');\n            this.value.setRawValue(new Color([h + step, s, v, a], 'hsv'), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const step = getStepForKey(getBaseStepForColor(false), getHorizontalStepKeys(ev));\n            if (step === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    const className$7 = ClassName('svp');\n    const CANVAS_RESOL = 64;\n    class SvPaletteView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$7());\n            config.viewProps.bindTabIndex(this.element);\n            const canvasElem = doc.createElement('canvas');\n            canvasElem.height = CANVAS_RESOL;\n            canvasElem.width = CANVAS_RESOL;\n            canvasElem.classList.add(className$7('c'));\n            this.element.appendChild(canvasElem);\n            this.canvasElement = canvasElem;\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$7('m'));\n            this.element.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            this.update_();\n        }\n        update_() {\n            const ctx = getCanvasContext(this.canvasElement);\n            if (!ctx) {\n                return;\n            }\n            const c = this.value.rawValue;\n            const hsvComps = c.getComponents('hsv');\n            const width = this.canvasElement.width;\n            const height = this.canvasElement.height;\n            const imgData = ctx.getImageData(0, 0, width, height);\n            const data = imgData.data;\n            for (let iy = 0; iy < height; iy++) {\n                for (let ix = 0; ix < width; ix++) {\n                    const s = mapRange(ix, 0, width, 0, 100);\n                    const v = mapRange(iy, 0, height, 100, 0);\n                    const rgbComps = hsvToRgb(hsvComps[0], s, v);\n                    const i = (iy * width + ix) * 4;\n                    data[i] = rgbComps[0];\n                    data[i + 1] = rgbComps[1];\n                    data[i + 2] = rgbComps[2];\n                    data[i + 3] = 255;\n                }\n            }\n            ctx.putImageData(imgData, 0, 0);\n            const left = mapRange(hsvComps[1], 0, 100, 0, 100);\n            this.markerElem_.style.left = `${left}%`;\n            const top = mapRange(hsvComps[2], 0, 100, 100, 0);\n            this.markerElem_.style.top = `${top}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class SvPaletteController {\n        constructor(doc, config) {\n            this.onKeyDown_ = this.onKeyDown_.bind(this);\n            this.onKeyUp_ = this.onKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new SvPaletteView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.element);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.element.addEventListener('keydown', this.onKeyDown_);\n            this.view.element.addEventListener('keyup', this.onKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const saturation = mapRange(d.point.x, 0, d.bounds.width, 0, 100);\n            const value = mapRange(d.point.y, 0, d.bounds.height, 100, 0);\n            const [h, , , a] = this.value.rawValue.getComponents('hsv');\n            this.value.setRawValue(new Color([h, saturation, value, a], 'hsv'), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onKeyDown_(ev) {\n            if (isArrowKey(ev.key)) {\n                ev.preventDefault();\n            }\n            const [h, s, v, a] = this.value.rawValue.getComponents('hsv');\n            const baseStep = getBaseStepForColor(false);\n            const ds = getStepForKey(baseStep, getHorizontalStepKeys(ev));\n            const dv = getStepForKey(baseStep, getVerticalStepKeys(ev));\n            if (ds === 0 && dv === 0) {\n                return;\n            }\n            this.value.setRawValue(new Color([h, s + ds, v + dv, a], 'hsv'), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onKeyUp_(ev) {\n            const baseStep = getBaseStepForColor(false);\n            const ds = getStepForKey(baseStep, getHorizontalStepKeys(ev));\n            const dv = getStepForKey(baseStep, getVerticalStepKeys(ev));\n            if (ds === 0 && dv === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    class ColorPickerController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.hPaletteC_ = new HPaletteController(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.svPaletteC_ = new SvPaletteController(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.alphaIcs_ = config.supportsAlpha\n                ? {\n                    palette: new APaletteController(doc, {\n                        value: this.value,\n                        viewProps: this.viewProps,\n                    }),\n                    text: new NumberTextController(doc, {\n                        parser: parseNumber,\n                        baseStep: 0.1,\n                        props: ValueMap.fromObject({\n                            draggingScale: 0.01,\n                            formatter: createNumberFormatter(2),\n                        }),\n                        value: createValue(0, {\n                            constraint: new RangeConstraint({ min: 0, max: 1 }),\n                        }),\n                        viewProps: this.viewProps,\n                    }),\n                }\n                : null;\n            if (this.alphaIcs_) {\n                connectValues({\n                    primary: this.value,\n                    secondary: this.alphaIcs_.text.value,\n                    forward: (p) => {\n                        return p.rawValue.getComponents()[3];\n                    },\n                    backward: (p, s) => {\n                        const comps = p.rawValue.getComponents();\n                        comps[3] = s.rawValue;\n                        return new Color(comps, p.rawValue.mode);\n                    },\n                });\n            }\n            this.textC_ = new ColorTextController(doc, {\n                parser: parseNumber,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view = new ColorPickerView(doc, {\n                alphaViews: this.alphaIcs_\n                    ? {\n                        palette: this.alphaIcs_.palette.view,\n                        text: this.alphaIcs_.text.view,\n                    }\n                    : null,\n                hPaletteView: this.hPaletteC_.view,\n                supportsAlpha: config.supportsAlpha,\n                svPaletteView: this.svPaletteC_.view,\n                textView: this.textC_.view,\n            });\n        }\n        get textController() {\n            return this.textC_;\n        }\n    }\n\n    const className$6 = ClassName('colsw');\n    class ColorSwatchView {\n        constructor(doc, config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$6());\n            config.viewProps.bindClassModifiers(this.element);\n            const swatchElem = doc.createElement('div');\n            swatchElem.classList.add(className$6('sw'));\n            this.element.appendChild(swatchElem);\n            this.swatchElem_ = swatchElem;\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$6('b'));\n            config.viewProps.bindDisabled(buttonElem);\n            this.element.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            this.update_();\n        }\n        update_() {\n            const value = this.value.rawValue;\n            this.swatchElem_.style.backgroundColor = colorToHexRgbaString(value);\n        }\n        onValueChange_() {\n            this.update_();\n        }\n    }\n\n    class ColorSwatchController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new ColorSwatchView(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    class ColorController {\n        constructor(doc, config) {\n            this.onButtonBlur_ = this.onButtonBlur_.bind(this);\n            this.onButtonClick_ = this.onButtonClick_.bind(this);\n            this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\n            this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.foldable_ = Foldable.create(config.expanded);\n            this.swatchC_ = new ColorSwatchController(doc, {\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            const buttonElem = this.swatchC_.view.buttonElement;\n            buttonElem.addEventListener('blur', this.onButtonBlur_);\n            buttonElem.addEventListener('click', this.onButtonClick_);\n            this.textC_ = new TextController(doc, {\n                parser: config.parser,\n                props: ValueMap.fromObject({\n                    formatter: config.formatter,\n                }),\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view = new ColorView(doc, {\n                foldable: this.foldable_,\n                pickerLayout: config.pickerLayout,\n            });\n            this.view.swatchElement.appendChild(this.swatchC_.view.element);\n            this.view.textElement.appendChild(this.textC_.view.element);\n            this.popC_ =\n                config.pickerLayout === 'popup'\n                    ? new PopupController(doc, {\n                        viewProps: this.viewProps,\n                    })\n                    : null;\n            const pickerC = new ColorPickerController(doc, {\n                supportsAlpha: config.supportsAlpha,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            pickerC.view.allFocusableElements.forEach((elem) => {\n                elem.addEventListener('blur', this.onPopupChildBlur_);\n                elem.addEventListener('keydown', this.onPopupChildKeydown_);\n            });\n            this.pickerC_ = pickerC;\n            if (this.popC_) {\n                this.view.element.appendChild(this.popC_.view.element);\n                this.popC_.view.element.appendChild(pickerC.view.element);\n                connectValues({\n                    primary: this.foldable_.value('expanded'),\n                    secondary: this.popC_.shows,\n                    forward: (p) => p.rawValue,\n                    backward: (_, s) => s.rawValue,\n                });\n            }\n            else if (this.view.pickerElement) {\n                this.view.pickerElement.appendChild(this.pickerC_.view.element);\n                bindFoldable(this.foldable_, this.view.pickerElement);\n            }\n        }\n        get textController() {\n            return this.textC_;\n        }\n        onButtonBlur_(e) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.view.element;\n            const nextTarget = forceCast(e.relatedTarget);\n            if (!nextTarget || !elem.contains(nextTarget)) {\n                this.popC_.shows.rawValue = false;\n            }\n        }\n        onButtonClick_() {\n            this.foldable_.set('expanded', !this.foldable_.get('expanded'));\n            if (this.foldable_.get('expanded')) {\n                this.pickerC_.view.allFocusableElements[0].focus();\n            }\n        }\n        onPopupChildBlur_(ev) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.popC_.view.element;\n            const nextTarget = findNextTarget(ev);\n            if (nextTarget && elem.contains(nextTarget)) {\n                return;\n            }\n            if (nextTarget &&\n                nextTarget === this.swatchC_.view.buttonElement &&\n                !supportsTouch(elem.ownerDocument)) {\n                return;\n            }\n            this.popC_.shows.rawValue = false;\n        }\n        onPopupChildKeydown_(ev) {\n            if (this.popC_) {\n                if (ev.key === 'Escape') {\n                    this.popC_.shows.rawValue = false;\n                }\n            }\n            else if (this.view.pickerElement) {\n                if (ev.key === 'Escape') {\n                    this.swatchC_.view.buttonElement.focus();\n                }\n            }\n        }\n    }\n\n    function colorFromObject(value) {\n        if (Color.isColorObject(value)) {\n            return Color.fromObject(value);\n        }\n        return Color.black();\n    }\n    function colorToRgbNumber(value) {\n        return removeAlphaComponent(value.getComponents('rgb')).reduce((result, comp) => {\n            return (result << 8) | (Math.floor(comp) & 0xff);\n        }, 0);\n    }\n    function colorToRgbaNumber(value) {\n        return (value.getComponents('rgb').reduce((result, comp, index) => {\n            const hex = Math.floor(index === 3 ? comp * 255 : comp) & 0xff;\n            return (result << 8) | hex;\n        }, 0) >>> 0);\n    }\n    function numberToRgbColor(num) {\n        return new Color([(num >> 16) & 0xff, (num >> 8) & 0xff, num & 0xff], 'rgb');\n    }\n    function numberToRgbaColor(num) {\n        return new Color([\n            (num >> 24) & 0xff,\n            (num >> 16) & 0xff,\n            (num >> 8) & 0xff,\n            mapRange(num & 0xff, 0, 255, 0, 1),\n        ], 'rgb');\n    }\n    function colorFromRgbNumber(value) {\n        if (typeof value !== 'number') {\n            return Color.black();\n        }\n        return numberToRgbColor(value);\n    }\n    function colorFromRgbaNumber(value) {\n        if (typeof value !== 'number') {\n            return Color.black();\n        }\n        return numberToRgbaColor(value);\n    }\n\n    function createColorStringWriter(notation) {\n        const stringify = getColorStringifier(notation);\n        return (target, value) => {\n            writePrimitive(target, stringify(value));\n        };\n    }\n    function createColorNumberWriter(supportsAlpha) {\n        const colorToNumber = supportsAlpha ? colorToRgbaNumber : colorToRgbNumber;\n        return (target, value) => {\n            writePrimitive(target, colorToNumber(value));\n        };\n    }\n    function writeRgbaColorObject(target, value) {\n        const obj = value.toRgbaObject();\n        target.writeProperty('r', obj.r);\n        target.writeProperty('g', obj.g);\n        target.writeProperty('b', obj.b);\n        target.writeProperty('a', obj.a);\n    }\n    function writeRgbColorObject(target, value) {\n        const obj = value.toRgbaObject();\n        target.writeProperty('r', obj.r);\n        target.writeProperty('g', obj.g);\n        target.writeProperty('b', obj.b);\n    }\n    function createColorObjectWriter(supportsAlpha) {\n        return supportsAlpha ? writeRgbaColorObject : writeRgbColorObject;\n    }\n\n    function shouldSupportAlpha$1(inputParams) {\n        return 'alpha' in inputParams && inputParams.alpha === true;\n    }\n    function createFormatter$1(supportsAlpha) {\n        return supportsAlpha\n            ? (v) => colorToHexRgbaString(v, '0x')\n            : (v) => colorToHexRgbString(v, '0x');\n    }\n    const NumberColorInputPlugin = {\n        id: 'input-color-number',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'number') {\n                return null;\n            }\n            if (!('view' in params)) {\n                return null;\n            }\n            if (params.view !== 'color') {\n                return null;\n            }\n            const result = parseColorInputParams(params);\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (args) => {\n                return shouldSupportAlpha$1(args.params)\n                    ? colorFromRgbaNumber\n                    : colorFromRgbNumber;\n            },\n            equals: Color.equals,\n            writer: (args) => {\n                return createColorNumberWriter(shouldSupportAlpha$1(args.params));\n            },\n        },\n        controller: (args) => {\n            const supportsAlpha = shouldSupportAlpha$1(args.params);\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            return new ColorController(args.document, {\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                formatter: createFormatter$1(supportsAlpha),\n                parser: CompositeColorParser,\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                supportsAlpha: supportsAlpha,\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    function shouldSupportAlpha(initialValue) {\n        return Color.isRgbaColorObject(initialValue);\n    }\n    const ObjectColorInputPlugin = {\n        id: 'input-color-object',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Color.isColorObject(value)) {\n                return null;\n            }\n            const result = parseColorInputParams(params);\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => colorFromObject,\n            equals: Color.equals,\n            writer: (args) => createColorObjectWriter(shouldSupportAlpha(args.initialValue)),\n        },\n        controller: (args) => {\n            const supportsAlpha = Color.isRgbaColorObject(args.initialValue);\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            const formatter = supportsAlpha\n                ? colorToHexRgbaString\n                : colorToHexRgbString;\n            return new ColorController(args.document, {\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                formatter: formatter,\n                parser: CompositeColorParser,\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                supportsAlpha: supportsAlpha,\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    const StringColorInputPlugin = {\n        id: 'input-color-string',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'string') {\n                return null;\n            }\n            if ('view' in params && params.view === 'text') {\n                return null;\n            }\n            const notation = getColorNotation(value);\n            if (!notation) {\n                return null;\n            }\n            const result = parseColorInputParams(params);\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => colorFromString,\n            equals: Color.equals,\n            writer: (args) => {\n                const notation = getColorNotation(args.initialValue);\n                if (!notation) {\n                    throw TpError.shouldNeverHappen();\n                }\n                return createColorStringWriter(notation);\n            },\n        },\n        controller: (args) => {\n            const notation = getColorNotation(args.initialValue);\n            if (!notation) {\n                throw TpError.shouldNeverHappen();\n            }\n            const stringifier = getColorStringifier(notation);\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            return new ColorController(args.document, {\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                formatter: stringifier,\n                parser: CompositeColorParser,\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                supportsAlpha: hasAlphaComponent(notation),\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class PointNdConstraint {\n        constructor(config) {\n            this.components = config.components;\n            this.asm_ = config.assembly;\n        }\n        constrain(value) {\n            const comps = this.asm_\n                .toComponents(value)\n                .map((comp, index) => { var _a, _b; return (_b = (_a = this.components[index]) === null || _a === void 0 ? void 0 : _a.constrain(comp)) !== null && _b !== void 0 ? _b : comp; });\n            return this.asm_.fromComponents(comps);\n        }\n    }\n\n    const className$5 = ClassName('pndtxt');\n    class PointNdTextView {\n        constructor(doc, config) {\n            this.textViews = config.textViews;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$5());\n            this.textViews.forEach((v) => {\n                const axisElem = doc.createElement('div');\n                axisElem.classList.add(className$5('a'));\n                axisElem.appendChild(v.element);\n                this.element.appendChild(axisElem);\n            });\n        }\n    }\n\n    function createAxisController(doc, config, index) {\n        return new NumberTextController(doc, {\n            arrayPosition: index === 0 ? 'fst' : index === config.axes.length - 1 ? 'lst' : 'mid',\n            baseStep: config.axes[index].baseStep,\n            parser: config.parser,\n            props: config.axes[index].textProps,\n            value: createValue(0, {\n                constraint: config.axes[index].constraint,\n            }),\n            viewProps: config.viewProps,\n        });\n    }\n    class PointNdTextController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.acs_ = config.axes.map((_, index) => createAxisController(doc, config, index));\n            this.acs_.forEach((c, index) => {\n                connectValues({\n                    primary: this.value,\n                    secondary: c.value,\n                    forward: (p) => {\n                        return config.assembly.toComponents(p.rawValue)[index];\n                    },\n                    backward: (p, s) => {\n                        const comps = config.assembly.toComponents(p.rawValue);\n                        comps[index] = s.rawValue;\n                        return config.assembly.fromComponents(comps);\n                    },\n                });\n            });\n            this.view = new PointNdTextView(doc, {\n                textViews: this.acs_.map((ac) => ac.view),\n            });\n        }\n    }\n\n    function createStepConstraint(params) {\n        if ('step' in params && !isEmpty(params.step)) {\n            return new StepConstraint(params.step);\n        }\n        return null;\n    }\n    function createRangeConstraint(params) {\n        if (('max' in params && !isEmpty(params.max)) ||\n            ('min' in params && !isEmpty(params.min))) {\n            return new RangeConstraint({\n                max: params.max,\n                min: params.min,\n            });\n        }\n        return null;\n    }\n    function createConstraint$4(params) {\n        const constraints = [];\n        const sc = createStepConstraint(params);\n        if (sc) {\n            constraints.push(sc);\n        }\n        const rc = createRangeConstraint(params);\n        if (rc) {\n            constraints.push(rc);\n        }\n        const lc = createListConstraint(params.options);\n        if (lc) {\n            constraints.push(lc);\n        }\n        return new CompositeConstraint(constraints);\n    }\n    function findRange(constraint) {\n        const c = constraint ? findConstraint(constraint, RangeConstraint) : null;\n        if (!c) {\n            return [undefined, undefined];\n        }\n        return [c.minValue, c.maxValue];\n    }\n    function estimateSuitableRange(constraint) {\n        const [min, max] = findRange(constraint);\n        return [min !== null && min !== void 0 ? min : 0, max !== null && max !== void 0 ? max : 100];\n    }\n    const NumberInputPlugin = {\n        id: 'input-number',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'number') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                format: p.optional.function,\n                max: p.optional.number,\n                min: p.optional.number,\n                options: p.optional.custom(parseListOptions),\n                step: p.optional.number,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => numberFromUnknown,\n            constraint: (args) => createConstraint$4(args.params),\n            writer: (_args) => writePrimitive,\n        },\n        controller: (args) => {\n            var _a, _b;\n            const value = args.value;\n            const c = args.constraint;\n            if (c && findConstraint(c, ListConstraint)) {\n                return new ListController(args.document, {\n                    props: ValueMap.fromObject({\n                        options: (_a = findListItems(c)) !== null && _a !== void 0 ? _a : [],\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            const formatter = (_b = ('format' in args.params ? args.params.format : undefined)) !== null && _b !== void 0 ? _b : createNumberFormatter(getSuitableDecimalDigits(c, value.rawValue));\n            if (c && findConstraint(c, RangeConstraint)) {\n                const [min, max] = estimateSuitableRange(c);\n                return new SliderTextController(args.document, {\n                    baseStep: getBaseStep(c),\n                    parser: parseNumber,\n                    sliderProps: ValueMap.fromObject({\n                        maxValue: max,\n                        minValue: min,\n                    }),\n                    textProps: ValueMap.fromObject({\n                        draggingScale: getSuitableDraggingScale(c, value.rawValue),\n                        formatter: formatter,\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new NumberTextController(args.document, {\n                baseStep: getBaseStep(c),\n                parser: parseNumber,\n                props: ValueMap.fromObject({\n                    draggingScale: getSuitableDraggingScale(c, value.rawValue),\n                    formatter: formatter,\n                }),\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class Point2d {\n        constructor(x = 0, y = 0) {\n            this.x = x;\n            this.y = y;\n        }\n        getComponents() {\n            return [this.x, this.y];\n        }\n        static isObject(obj) {\n            if (isEmpty(obj)) {\n                return false;\n            }\n            const x = obj.x;\n            const y = obj.y;\n            if (typeof x !== 'number' || typeof y !== 'number') {\n                return false;\n            }\n            return true;\n        }\n        static equals(v1, v2) {\n            return v1.x === v2.x && v1.y === v2.y;\n        }\n        toObject() {\n            return {\n                x: this.x,\n                y: this.y,\n            };\n        }\n    }\n    const Point2dAssembly = {\n        toComponents: (p) => p.getComponents(),\n        fromComponents: (comps) => new Point2d(...comps),\n    };\n\n    const className$4 = ClassName('p2d');\n    class Point2dView {\n        constructor(doc, config) {\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$4());\n            config.viewProps.bindClassModifiers(this.element);\n            bindValue(config.expanded, valueToClassName(this.element, className$4(undefined, 'expanded')));\n            const headElem = doc.createElement('div');\n            headElem.classList.add(className$4('h'));\n            this.element.appendChild(headElem);\n            const buttonElem = doc.createElement('button');\n            buttonElem.classList.add(className$4('b'));\n            buttonElem.appendChild(createSvgIconElement(doc, 'p2dpad'));\n            config.viewProps.bindDisabled(buttonElem);\n            headElem.appendChild(buttonElem);\n            this.buttonElement = buttonElem;\n            const textElem = doc.createElement('div');\n            textElem.classList.add(className$4('t'));\n            headElem.appendChild(textElem);\n            this.textElement = textElem;\n            if (config.pickerLayout === 'inline') {\n                const pickerElem = doc.createElement('div');\n                pickerElem.classList.add(className$4('p'));\n                this.element.appendChild(pickerElem);\n                this.pickerElement = pickerElem;\n            }\n            else {\n                this.pickerElement = null;\n            }\n        }\n    }\n\n    const className$3 = ClassName('p2dp');\n    class Point2dPickerView {\n        constructor(doc, config) {\n            this.onFoldableChange_ = this.onFoldableChange_.bind(this);\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.invertsY_ = config.invertsY;\n            this.maxValue_ = config.maxValue;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$3());\n            if (config.layout === 'popup') {\n                this.element.classList.add(className$3(undefined, 'p'));\n            }\n            const padElem = doc.createElement('div');\n            padElem.classList.add(className$3('p'));\n            config.viewProps.bindTabIndex(padElem);\n            this.element.appendChild(padElem);\n            this.padElement = padElem;\n            const svgElem = doc.createElementNS(SVG_NS, 'svg');\n            svgElem.classList.add(className$3('g'));\n            this.padElement.appendChild(svgElem);\n            this.svgElem_ = svgElem;\n            const xAxisElem = doc.createElementNS(SVG_NS, 'line');\n            xAxisElem.classList.add(className$3('ax'));\n            xAxisElem.setAttributeNS(null, 'x1', '0');\n            xAxisElem.setAttributeNS(null, 'y1', '50%');\n            xAxisElem.setAttributeNS(null, 'x2', '100%');\n            xAxisElem.setAttributeNS(null, 'y2', '50%');\n            this.svgElem_.appendChild(xAxisElem);\n            const yAxisElem = doc.createElementNS(SVG_NS, 'line');\n            yAxisElem.classList.add(className$3('ax'));\n            yAxisElem.setAttributeNS(null, 'x1', '50%');\n            yAxisElem.setAttributeNS(null, 'y1', '0');\n            yAxisElem.setAttributeNS(null, 'x2', '50%');\n            yAxisElem.setAttributeNS(null, 'y2', '100%');\n            this.svgElem_.appendChild(yAxisElem);\n            const lineElem = doc.createElementNS(SVG_NS, 'line');\n            lineElem.classList.add(className$3('l'));\n            lineElem.setAttributeNS(null, 'x1', '50%');\n            lineElem.setAttributeNS(null, 'y1', '50%');\n            this.svgElem_.appendChild(lineElem);\n            this.lineElem_ = lineElem;\n            const markerElem = doc.createElement('div');\n            markerElem.classList.add(className$3('m'));\n            this.padElement.appendChild(markerElem);\n            this.markerElem_ = markerElem;\n            config.value.emitter.on('change', this.onValueChange_);\n            this.value = config.value;\n            this.update_();\n        }\n        get allFocusableElements() {\n            return [this.padElement];\n        }\n        update_() {\n            const [x, y] = this.value.rawValue.getComponents();\n            const max = this.maxValue_;\n            const px = mapRange(x, -max, +max, 0, 100);\n            const py = mapRange(y, -max, +max, 0, 100);\n            const ipy = this.invertsY_ ? 100 - py : py;\n            this.lineElem_.setAttributeNS(null, 'x2', `${px}%`);\n            this.lineElem_.setAttributeNS(null, 'y2', `${ipy}%`);\n            this.markerElem_.style.left = `${px}%`;\n            this.markerElem_.style.top = `${ipy}%`;\n        }\n        onValueChange_() {\n            this.update_();\n        }\n        onFoldableChange_() {\n            this.update_();\n        }\n    }\n\n    function computeOffset(ev, baseSteps, invertsY) {\n        return [\n            getStepForKey(baseSteps[0], getHorizontalStepKeys(ev)),\n            getStepForKey(baseSteps[1], getVerticalStepKeys(ev)) * (invertsY ? 1 : -1),\n        ];\n    }\n    class Point2dPickerController {\n        constructor(doc, config) {\n            this.onPadKeyDown_ = this.onPadKeyDown_.bind(this);\n            this.onPadKeyUp_ = this.onPadKeyUp_.bind(this);\n            this.onPointerDown_ = this.onPointerDown_.bind(this);\n            this.onPointerMove_ = this.onPointerMove_.bind(this);\n            this.onPointerUp_ = this.onPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.baseSteps_ = config.baseSteps;\n            this.maxValue_ = config.maxValue;\n            this.invertsY_ = config.invertsY;\n            this.view = new Point2dPickerView(doc, {\n                invertsY: this.invertsY_,\n                layout: config.layout,\n                maxValue: this.maxValue_,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.ptHandler_ = new PointerHandler(this.view.padElement);\n            this.ptHandler_.emitter.on('down', this.onPointerDown_);\n            this.ptHandler_.emitter.on('move', this.onPointerMove_);\n            this.ptHandler_.emitter.on('up', this.onPointerUp_);\n            this.view.padElement.addEventListener('keydown', this.onPadKeyDown_);\n            this.view.padElement.addEventListener('keyup', this.onPadKeyUp_);\n        }\n        handlePointerEvent_(d, opts) {\n            if (!d.point) {\n                return;\n            }\n            const max = this.maxValue_;\n            const px = mapRange(d.point.x, 0, d.bounds.width, -max, +max);\n            const py = mapRange(this.invertsY_ ? d.bounds.height - d.point.y : d.point.y, 0, d.bounds.height, -max, +max);\n            this.value.setRawValue(new Point2d(px, py), opts);\n        }\n        onPointerDown_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerMove_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPointerUp_(ev) {\n            this.handlePointerEvent_(ev.data, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n        onPadKeyDown_(ev) {\n            if (isArrowKey(ev.key)) {\n                ev.preventDefault();\n            }\n            const [dx, dy] = computeOffset(ev, this.baseSteps_, this.invertsY_);\n            if (dx === 0 && dy === 0) {\n                return;\n            }\n            this.value.setRawValue(new Point2d(this.value.rawValue.x + dx, this.value.rawValue.y + dy), {\n                forceEmit: false,\n                last: false,\n            });\n        }\n        onPadKeyUp_(ev) {\n            const [dx, dy] = computeOffset(ev, this.baseSteps_, this.invertsY_);\n            if (dx === 0 && dy === 0) {\n                return;\n            }\n            this.value.setRawValue(this.value.rawValue, {\n                forceEmit: true,\n                last: true,\n            });\n        }\n    }\n\n    class Point2dController {\n        constructor(doc, config) {\n            var _a, _b;\n            this.onPopupChildBlur_ = this.onPopupChildBlur_.bind(this);\n            this.onPopupChildKeydown_ = this.onPopupChildKeydown_.bind(this);\n            this.onPadButtonBlur_ = this.onPadButtonBlur_.bind(this);\n            this.onPadButtonClick_ = this.onPadButtonClick_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.foldable_ = Foldable.create(config.expanded);\n            this.popC_ =\n                config.pickerLayout === 'popup'\n                    ? new PopupController(doc, {\n                        viewProps: this.viewProps,\n                    })\n                    : null;\n            const padC = new Point2dPickerController(doc, {\n                baseSteps: [config.axes[0].baseStep, config.axes[1].baseStep],\n                invertsY: config.invertsY,\n                layout: config.pickerLayout,\n                maxValue: config.maxValue,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            padC.view.allFocusableElements.forEach((elem) => {\n                elem.addEventListener('blur', this.onPopupChildBlur_);\n                elem.addEventListener('keydown', this.onPopupChildKeydown_);\n            });\n            this.pickerC_ = padC;\n            this.textC_ = new PointNdTextController(doc, {\n                assembly: Point2dAssembly,\n                axes: config.axes,\n                parser: config.parser,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            this.view = new Point2dView(doc, {\n                expanded: this.foldable_.value('expanded'),\n                pickerLayout: config.pickerLayout,\n                viewProps: this.viewProps,\n            });\n            this.view.textElement.appendChild(this.textC_.view.element);\n            (_a = this.view.buttonElement) === null || _a === void 0 ? void 0 : _a.addEventListener('blur', this.onPadButtonBlur_);\n            (_b = this.view.buttonElement) === null || _b === void 0 ? void 0 : _b.addEventListener('click', this.onPadButtonClick_);\n            if (this.popC_) {\n                this.view.element.appendChild(this.popC_.view.element);\n                this.popC_.view.element.appendChild(this.pickerC_.view.element);\n                connectValues({\n                    primary: this.foldable_.value('expanded'),\n                    secondary: this.popC_.shows,\n                    forward: (p) => p.rawValue,\n                    backward: (_, s) => s.rawValue,\n                });\n            }\n            else if (this.view.pickerElement) {\n                this.view.pickerElement.appendChild(this.pickerC_.view.element);\n                bindFoldable(this.foldable_, this.view.pickerElement);\n            }\n        }\n        onPadButtonBlur_(e) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.view.element;\n            const nextTarget = forceCast(e.relatedTarget);\n            if (!nextTarget || !elem.contains(nextTarget)) {\n                this.popC_.shows.rawValue = false;\n            }\n        }\n        onPadButtonClick_() {\n            this.foldable_.set('expanded', !this.foldable_.get('expanded'));\n            if (this.foldable_.get('expanded')) {\n                this.pickerC_.view.allFocusableElements[0].focus();\n            }\n        }\n        onPopupChildBlur_(ev) {\n            if (!this.popC_) {\n                return;\n            }\n            const elem = this.popC_.view.element;\n            const nextTarget = findNextTarget(ev);\n            if (nextTarget && elem.contains(nextTarget)) {\n                return;\n            }\n            if (nextTarget &&\n                nextTarget === this.view.buttonElement &&\n                !supportsTouch(elem.ownerDocument)) {\n                return;\n            }\n            this.popC_.shows.rawValue = false;\n        }\n        onPopupChildKeydown_(ev) {\n            if (this.popC_) {\n                if (ev.key === 'Escape') {\n                    this.popC_.shows.rawValue = false;\n                }\n            }\n            else if (this.view.pickerElement) {\n                if (ev.key === 'Escape') {\n                    this.view.buttonElement.focus();\n                }\n            }\n        }\n    }\n\n    function point2dFromUnknown(value) {\n        return Point2d.isObject(value)\n            ? new Point2d(value.x, value.y)\n            : new Point2d();\n    }\n    function writePoint2d(target, value) {\n        target.writeProperty('x', value.x);\n        target.writeProperty('y', value.y);\n    }\n\n    function createDimensionConstraint$2(params) {\n        if (!params) {\n            return undefined;\n        }\n        const constraints = [];\n        if (!isEmpty(params.step)) {\n            constraints.push(new StepConstraint(params.step));\n        }\n        if (!isEmpty(params.max) || !isEmpty(params.min)) {\n            constraints.push(new RangeConstraint({\n                max: params.max,\n                min: params.min,\n            }));\n        }\n        return new CompositeConstraint(constraints);\n    }\n    function createConstraint$3(params) {\n        return new PointNdConstraint({\n            assembly: Point2dAssembly,\n            components: [\n                createDimensionConstraint$2('x' in params ? params.x : undefined),\n                createDimensionConstraint$2('y' in params ? params.y : undefined),\n            ],\n        });\n    }\n    function getSuitableMaxDimensionValue(constraint, rawValue) {\n        const rc = constraint && findConstraint(constraint, RangeConstraint);\n        if (rc) {\n            return Math.max(Math.abs(rc.minValue || 0), Math.abs(rc.maxValue || 0));\n        }\n        const step = getBaseStep(constraint);\n        return Math.max(Math.abs(step) * 10, Math.abs(rawValue) * 10);\n    }\n    function getSuitableMaxValue(initialValue, constraint) {\n        const xc = constraint instanceof PointNdConstraint\n            ? constraint.components[0]\n            : undefined;\n        const yc = constraint instanceof PointNdConstraint\n            ? constraint.components[1]\n            : undefined;\n        const xr = getSuitableMaxDimensionValue(xc, initialValue.x);\n        const yr = getSuitableMaxDimensionValue(yc, initialValue.y);\n        return Math.max(xr, yr);\n    }\n    function createAxis$2(initialValue, constraint) {\n        return {\n            baseStep: getBaseStep(constraint),\n            constraint: constraint,\n            textProps: ValueMap.fromObject({\n                draggingScale: getSuitableDraggingScale(constraint, initialValue),\n                formatter: createNumberFormatter(getSuitableDecimalDigits(constraint, initialValue)),\n            }),\n        };\n    }\n    function shouldInvertY(params) {\n        if (!('y' in params)) {\n            return false;\n        }\n        const yParams = params.y;\n        if (!yParams) {\n            return false;\n        }\n        return 'inverted' in yParams ? !!yParams.inverted : false;\n    }\n    const Point2dInputPlugin = {\n        id: 'input-point2d',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Point2d.isObject(value)) {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                expanded: p.optional.boolean,\n                picker: p.optional.custom(parsePickerLayout),\n                x: p.optional.custom(parsePointDimensionParams),\n                y: p.optional.object({\n                    inverted: p.optional.boolean,\n                    max: p.optional.number,\n                    min: p.optional.number,\n                    step: p.optional.number,\n                }),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => point2dFromUnknown,\n            constraint: (args) => createConstraint$3(args.params),\n            equals: Point2d.equals,\n            writer: (_args) => writePoint2d,\n        },\n        controller: (args) => {\n            const doc = args.document;\n            const value = args.value;\n            const c = args.constraint;\n            if (!(c instanceof PointNdConstraint)) {\n                throw TpError.shouldNeverHappen();\n            }\n            const expanded = 'expanded' in args.params ? args.params.expanded : undefined;\n            const picker = 'picker' in args.params ? args.params.picker : undefined;\n            return new Point2dController(doc, {\n                axes: [\n                    createAxis$2(value.rawValue.x, c.components[0]),\n                    createAxis$2(value.rawValue.y, c.components[1]),\n                ],\n                expanded: expanded !== null && expanded !== void 0 ? expanded : false,\n                invertsY: shouldInvertY(args.params),\n                maxValue: getSuitableMaxValue(value.rawValue, c),\n                parser: parseNumber,\n                pickerLayout: picker !== null && picker !== void 0 ? picker : 'popup',\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class Point3d {\n        constructor(x = 0, y = 0, z = 0) {\n            this.x = x;\n            this.y = y;\n            this.z = z;\n        }\n        getComponents() {\n            return [this.x, this.y, this.z];\n        }\n        static isObject(obj) {\n            if (isEmpty(obj)) {\n                return false;\n            }\n            const x = obj.x;\n            const y = obj.y;\n            const z = obj.z;\n            if (typeof x !== 'number' ||\n                typeof y !== 'number' ||\n                typeof z !== 'number') {\n                return false;\n            }\n            return true;\n        }\n        static equals(v1, v2) {\n            return v1.x === v2.x && v1.y === v2.y && v1.z === v2.z;\n        }\n        toObject() {\n            return {\n                x: this.x,\n                y: this.y,\n                z: this.z,\n            };\n        }\n    }\n    const Point3dAssembly = {\n        toComponents: (p) => p.getComponents(),\n        fromComponents: (comps) => new Point3d(...comps),\n    };\n\n    function point3dFromUnknown(value) {\n        return Point3d.isObject(value)\n            ? new Point3d(value.x, value.y, value.z)\n            : new Point3d();\n    }\n    function writePoint3d(target, value) {\n        target.writeProperty('x', value.x);\n        target.writeProperty('y', value.y);\n        target.writeProperty('z', value.z);\n    }\n\n    function createDimensionConstraint$1(params) {\n        if (!params) {\n            return undefined;\n        }\n        const constraints = [];\n        if (!isEmpty(params.step)) {\n            constraints.push(new StepConstraint(params.step));\n        }\n        if (!isEmpty(params.max) || !isEmpty(params.min)) {\n            constraints.push(new RangeConstraint({\n                max: params.max,\n                min: params.min,\n            }));\n        }\n        return new CompositeConstraint(constraints);\n    }\n    function createConstraint$2(params) {\n        return new PointNdConstraint({\n            assembly: Point3dAssembly,\n            components: [\n                createDimensionConstraint$1('x' in params ? params.x : undefined),\n                createDimensionConstraint$1('y' in params ? params.y : undefined),\n                createDimensionConstraint$1('z' in params ? params.z : undefined),\n            ],\n        });\n    }\n    function createAxis$1(initialValue, constraint) {\n        return {\n            baseStep: getBaseStep(constraint),\n            constraint: constraint,\n            textProps: ValueMap.fromObject({\n                draggingScale: getSuitableDraggingScale(constraint, initialValue),\n                formatter: createNumberFormatter(getSuitableDecimalDigits(constraint, initialValue)),\n            }),\n        };\n    }\n    const Point3dInputPlugin = {\n        id: 'input-point3d',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Point3d.isObject(value)) {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                x: p.optional.custom(parsePointDimensionParams),\n                y: p.optional.custom(parsePointDimensionParams),\n                z: p.optional.custom(parsePointDimensionParams),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => point3dFromUnknown,\n            constraint: (args) => createConstraint$2(args.params),\n            equals: Point3d.equals,\n            writer: (_args) => writePoint3d,\n        },\n        controller: (args) => {\n            const value = args.value;\n            const c = args.constraint;\n            if (!(c instanceof PointNdConstraint)) {\n                throw TpError.shouldNeverHappen();\n            }\n            return new PointNdTextController(args.document, {\n                assembly: Point3dAssembly,\n                axes: [\n                    createAxis$1(value.rawValue.x, c.components[0]),\n                    createAxis$1(value.rawValue.y, c.components[1]),\n                    createAxis$1(value.rawValue.z, c.components[2]),\n                ],\n                parser: parseNumber,\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class Point4d {\n        constructor(x = 0, y = 0, z = 0, w = 0) {\n            this.x = x;\n            this.y = y;\n            this.z = z;\n            this.w = w;\n        }\n        getComponents() {\n            return [this.x, this.y, this.z, this.w];\n        }\n        static isObject(obj) {\n            if (isEmpty(obj)) {\n                return false;\n            }\n            const x = obj.x;\n            const y = obj.y;\n            const z = obj.z;\n            const w = obj.w;\n            if (typeof x !== 'number' ||\n                typeof y !== 'number' ||\n                typeof z !== 'number' ||\n                typeof w !== 'number') {\n                return false;\n            }\n            return true;\n        }\n        static equals(v1, v2) {\n            return v1.x === v2.x && v1.y === v2.y && v1.z === v2.z && v1.w === v2.w;\n        }\n        toObject() {\n            return {\n                x: this.x,\n                y: this.y,\n                z: this.z,\n                w: this.w,\n            };\n        }\n    }\n    const Point4dAssembly = {\n        toComponents: (p) => p.getComponents(),\n        fromComponents: (comps) => new Point4d(...comps),\n    };\n\n    function point4dFromUnknown(value) {\n        return Point4d.isObject(value)\n            ? new Point4d(value.x, value.y, value.z, value.w)\n            : new Point4d();\n    }\n    function writePoint4d(target, value) {\n        target.writeProperty('x', value.x);\n        target.writeProperty('y', value.y);\n        target.writeProperty('z', value.z);\n        target.writeProperty('w', value.w);\n    }\n\n    function createDimensionConstraint(params) {\n        if (!params) {\n            return undefined;\n        }\n        const constraints = [];\n        if (!isEmpty(params.step)) {\n            constraints.push(new StepConstraint(params.step));\n        }\n        if (!isEmpty(params.max) || !isEmpty(params.min)) {\n            constraints.push(new RangeConstraint({\n                max: params.max,\n                min: params.min,\n            }));\n        }\n        return new CompositeConstraint(constraints);\n    }\n    function createConstraint$1(params) {\n        return new PointNdConstraint({\n            assembly: Point4dAssembly,\n            components: [\n                createDimensionConstraint('x' in params ? params.x : undefined),\n                createDimensionConstraint('y' in params ? params.y : undefined),\n                createDimensionConstraint('z' in params ? params.z : undefined),\n                createDimensionConstraint('w' in params ? params.w : undefined),\n            ],\n        });\n    }\n    function createAxis(initialValue, constraint) {\n        return {\n            baseStep: getBaseStep(constraint),\n            constraint: constraint,\n            textProps: ValueMap.fromObject({\n                draggingScale: getSuitableDraggingScale(constraint, initialValue),\n                formatter: createNumberFormatter(getSuitableDecimalDigits(constraint, initialValue)),\n            }),\n        };\n    }\n    const Point4dInputPlugin = {\n        id: 'input-point4d',\n        type: 'input',\n        accept: (value, params) => {\n            if (!Point4d.isObject(value)) {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                x: p.optional.custom(parsePointDimensionParams),\n                y: p.optional.custom(parsePointDimensionParams),\n                z: p.optional.custom(parsePointDimensionParams),\n                w: p.optional.custom(parsePointDimensionParams),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => point4dFromUnknown,\n            constraint: (args) => createConstraint$1(args.params),\n            equals: Point4d.equals,\n            writer: (_args) => writePoint4d,\n        },\n        controller: (args) => {\n            const value = args.value;\n            const c = args.constraint;\n            if (!(c instanceof PointNdConstraint)) {\n                throw TpError.shouldNeverHappen();\n            }\n            return new PointNdTextController(args.document, {\n                assembly: Point4dAssembly,\n                axes: value.rawValue\n                    .getComponents()\n                    .map((comp, index) => createAxis(comp, c.components[index])),\n                parser: parseNumber,\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    function createConstraint(params) {\n        const constraints = [];\n        const lc = createListConstraint(params.options);\n        if (lc) {\n            constraints.push(lc);\n        }\n        return new CompositeConstraint(constraints);\n    }\n    const StringInputPlugin = {\n        id: 'input-string',\n        type: 'input',\n        accept: (value, params) => {\n            if (typeof value !== 'string') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                options: p.optional.custom(parseListOptions),\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => stringFromUnknown,\n            constraint: (args) => createConstraint(args.params),\n            writer: (_args) => writePrimitive,\n        },\n        controller: (args) => {\n            var _a;\n            const doc = args.document;\n            const value = args.value;\n            const c = args.constraint;\n            if (c && findConstraint(c, ListConstraint)) {\n                return new ListController(doc, {\n                    props: ValueMap.fromObject({\n                        options: (_a = findListItems(c)) !== null && _a !== void 0 ? _a : [],\n                    }),\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new TextController(doc, {\n                parser: (v) => v,\n                props: ValueMap.fromObject({\n                    formatter: formatString,\n                }),\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    const Constants = {\n        monitor: {\n            defaultInterval: 200,\n            defaultLineCount: 3,\n        },\n    };\n\n    const className$2 = ClassName('mll');\n    class MultiLogView {\n        constructor(doc, config) {\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.formatter_ = config.formatter;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$2());\n            config.viewProps.bindClassModifiers(this.element);\n            const textareaElem = doc.createElement('textarea');\n            textareaElem.classList.add(className$2('i'));\n            textareaElem.style.height = `calc(var(--bld-us) * ${config.lineCount})`;\n            textareaElem.readOnly = true;\n            config.viewProps.bindDisabled(textareaElem);\n            this.element.appendChild(textareaElem);\n            this.textareaElem_ = textareaElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            const elem = this.textareaElem_;\n            const shouldScroll = elem.scrollTop === elem.scrollHeight - elem.clientHeight;\n            const lines = [];\n            this.value.rawValue.forEach((value) => {\n                if (value !== undefined) {\n                    lines.push(this.formatter_(value));\n                }\n            });\n            elem.textContent = lines.join('\\n');\n            if (shouldScroll) {\n                elem.scrollTop = elem.scrollHeight;\n            }\n        }\n        onValueUpdate_() {\n            this.update_();\n        }\n    }\n\n    class MultiLogController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new MultiLogView(doc, {\n                formatter: config.formatter,\n                lineCount: config.lineCount,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    const className$1 = ClassName('sgl');\n    class SingleLogView {\n        constructor(doc, config) {\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.formatter_ = config.formatter;\n            this.element = doc.createElement('div');\n            this.element.classList.add(className$1());\n            config.viewProps.bindClassModifiers(this.element);\n            const inputElem = doc.createElement('input');\n            inputElem.classList.add(className$1('i'));\n            inputElem.readOnly = true;\n            inputElem.type = 'text';\n            config.viewProps.bindDisabled(inputElem);\n            this.element.appendChild(inputElem);\n            this.inputElement = inputElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update_();\n        }\n        update_() {\n            const values = this.value.rawValue;\n            const lastValue = values[values.length - 1];\n            this.inputElement.value =\n                lastValue !== undefined ? this.formatter_(lastValue) : '';\n        }\n        onValueUpdate_() {\n            this.update_();\n        }\n    }\n\n    class SingleLogController {\n        constructor(doc, config) {\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.view = new SingleLogView(doc, {\n                formatter: config.formatter,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n        }\n    }\n\n    const BooleanMonitorPlugin = {\n        id: 'monitor-bool',\n        type: 'monitor',\n        accept: (value, params) => {\n            if (typeof value !== 'boolean') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                lineCount: p.optional.number,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => boolFromUnknown,\n        },\n        controller: (args) => {\n            var _a;\n            if (args.value.rawValue.length === 1) {\n                return new SingleLogController(args.document, {\n                    formatter: BooleanFormatter,\n                    value: args.value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new MultiLogController(args.document, {\n                formatter: BooleanFormatter,\n                lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class GraphCursor {\n        constructor() {\n            this.emitter = new Emitter();\n            this.index_ = -1;\n        }\n        get index() {\n            return this.index_;\n        }\n        set index(index) {\n            const changed = this.index_ !== index;\n            if (changed) {\n                this.index_ = index;\n                this.emitter.emit('change', {\n                    index: index,\n                    sender: this,\n                });\n            }\n        }\n    }\n\n    const className = ClassName('grl');\n    class GraphLogView {\n        constructor(doc, config) {\n            this.onCursorChange_ = this.onCursorChange_.bind(this);\n            this.onValueUpdate_ = this.onValueUpdate_.bind(this);\n            this.element = doc.createElement('div');\n            this.element.classList.add(className());\n            config.viewProps.bindClassModifiers(this.element);\n            this.formatter_ = config.formatter;\n            this.minValue_ = config.minValue;\n            this.maxValue_ = config.maxValue;\n            this.cursor_ = config.cursor;\n            this.cursor_.emitter.on('change', this.onCursorChange_);\n            const svgElem = doc.createElementNS(SVG_NS, 'svg');\n            svgElem.classList.add(className('g'));\n            svgElem.style.height = `calc(var(--bld-us) * ${config.lineCount})`;\n            this.element.appendChild(svgElem);\n            this.svgElem_ = svgElem;\n            const lineElem = doc.createElementNS(SVG_NS, 'polyline');\n            this.svgElem_.appendChild(lineElem);\n            this.lineElem_ = lineElem;\n            const tooltipElem = doc.createElement('div');\n            tooltipElem.classList.add(className('t'), ClassName('tt')());\n            this.element.appendChild(tooltipElem);\n            this.tooltipElem_ = tooltipElem;\n            config.value.emitter.on('change', this.onValueUpdate_);\n            this.value = config.value;\n            this.update_();\n        }\n        get graphElement() {\n            return this.svgElem_;\n        }\n        update_() {\n            const bounds = this.svgElem_.getBoundingClientRect();\n            const maxIndex = this.value.rawValue.length - 1;\n            const min = this.minValue_;\n            const max = this.maxValue_;\n            const points = [];\n            this.value.rawValue.forEach((v, index) => {\n                if (v === undefined) {\n                    return;\n                }\n                const x = mapRange(index, 0, maxIndex, 0, bounds.width);\n                const y = mapRange(v, min, max, bounds.height, 0);\n                points.push([x, y].join(','));\n            });\n            this.lineElem_.setAttributeNS(null, 'points', points.join(' '));\n            const tooltipElem = this.tooltipElem_;\n            const value = this.value.rawValue[this.cursor_.index];\n            if (value === undefined) {\n                tooltipElem.classList.remove(className('t', 'a'));\n                return;\n            }\n            const tx = mapRange(this.cursor_.index, 0, maxIndex, 0, bounds.width);\n            const ty = mapRange(value, min, max, bounds.height, 0);\n            tooltipElem.style.left = `${tx}px`;\n            tooltipElem.style.top = `${ty}px`;\n            tooltipElem.textContent = `${this.formatter_(value)}`;\n            if (!tooltipElem.classList.contains(className('t', 'a'))) {\n                tooltipElem.classList.add(className('t', 'a'), className('t', 'in'));\n                forceReflow(tooltipElem);\n                tooltipElem.classList.remove(className('t', 'in'));\n            }\n        }\n        onValueUpdate_() {\n            this.update_();\n        }\n        onCursorChange_() {\n            this.update_();\n        }\n    }\n\n    class GraphLogController {\n        constructor(doc, config) {\n            this.onGraphMouseMove_ = this.onGraphMouseMove_.bind(this);\n            this.onGraphMouseLeave_ = this.onGraphMouseLeave_.bind(this);\n            this.onGraphPointerDown_ = this.onGraphPointerDown_.bind(this);\n            this.onGraphPointerMove_ = this.onGraphPointerMove_.bind(this);\n            this.onGraphPointerUp_ = this.onGraphPointerUp_.bind(this);\n            this.value = config.value;\n            this.viewProps = config.viewProps;\n            this.cursor_ = new GraphCursor();\n            this.view = new GraphLogView(doc, {\n                cursor: this.cursor_,\n                formatter: config.formatter,\n                lineCount: config.lineCount,\n                maxValue: config.maxValue,\n                minValue: config.minValue,\n                value: this.value,\n                viewProps: this.viewProps,\n            });\n            if (!supportsTouch(doc)) {\n                this.view.element.addEventListener('mousemove', this.onGraphMouseMove_);\n                this.view.element.addEventListener('mouseleave', this.onGraphMouseLeave_);\n            }\n            else {\n                const ph = new PointerHandler(this.view.element);\n                ph.emitter.on('down', this.onGraphPointerDown_);\n                ph.emitter.on('move', this.onGraphPointerMove_);\n                ph.emitter.on('up', this.onGraphPointerUp_);\n            }\n        }\n        onGraphMouseLeave_() {\n            this.cursor_.index = -1;\n        }\n        onGraphMouseMove_(ev) {\n            const bounds = this.view.element.getBoundingClientRect();\n            this.cursor_.index = Math.floor(mapRange(ev.offsetX, 0, bounds.width, 0, this.value.rawValue.length));\n        }\n        onGraphPointerDown_(ev) {\n            this.onGraphPointerMove_(ev);\n        }\n        onGraphPointerMove_(ev) {\n            if (!ev.data.point) {\n                this.cursor_.index = -1;\n                return;\n            }\n            this.cursor_.index = Math.floor(mapRange(ev.data.point.x, 0, ev.data.bounds.width, 0, this.value.rawValue.length));\n        }\n        onGraphPointerUp_() {\n            this.cursor_.index = -1;\n        }\n    }\n\n    function createFormatter(params) {\n        return 'format' in params && !isEmpty(params.format)\n            ? params.format\n            : createNumberFormatter(2);\n    }\n    function createTextMonitor(args) {\n        var _a;\n        if (args.value.rawValue.length === 1) {\n            return new SingleLogController(args.document, {\n                formatter: createFormatter(args.params),\n                value: args.value,\n                viewProps: args.viewProps,\n            });\n        }\n        return new MultiLogController(args.document, {\n            formatter: createFormatter(args.params),\n            lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    }\n    function createGraphMonitor(args) {\n        var _a, _b, _c;\n        return new GraphLogController(args.document, {\n            formatter: createFormatter(args.params),\n            lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n            maxValue: (_b = ('max' in args.params ? args.params.max : null)) !== null && _b !== void 0 ? _b : 100,\n            minValue: (_c = ('min' in args.params ? args.params.min : null)) !== null && _c !== void 0 ? _c : 0,\n            value: args.value,\n            viewProps: args.viewProps,\n        });\n    }\n    function shouldShowGraph(params) {\n        return 'view' in params && params.view === 'graph';\n    }\n    const NumberMonitorPlugin = {\n        id: 'monitor-number',\n        type: 'monitor',\n        accept: (value, params) => {\n            if (typeof value !== 'number') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                format: p.optional.function,\n                lineCount: p.optional.number,\n                max: p.optional.number,\n                min: p.optional.number,\n                view: p.optional.string,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            defaultBufferSize: (params) => (shouldShowGraph(params) ? 64 : 1),\n            reader: (_args) => numberFromUnknown,\n        },\n        controller: (args) => {\n            if (shouldShowGraph(args.params)) {\n                return createGraphMonitor(args);\n            }\n            return createTextMonitor(args);\n        },\n    };\n\n    const StringMonitorPlugin = {\n        id: 'monitor-string',\n        type: 'monitor',\n        accept: (value, params) => {\n            if (typeof value !== 'string') {\n                return null;\n            }\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                lineCount: p.optional.number,\n                multiline: p.optional.boolean,\n            });\n            return result\n                ? {\n                    initialValue: value,\n                    params: result,\n                }\n                : null;\n        },\n        binding: {\n            reader: (_args) => stringFromUnknown,\n        },\n        controller: (args) => {\n            var _a;\n            const value = args.value;\n            const multiline = value.rawValue.length > 1 ||\n                ('multiline' in args.params && args.params.multiline);\n            if (multiline) {\n                return new MultiLogController(args.document, {\n                    formatter: formatString,\n                    lineCount: (_a = args.params.lineCount) !== null && _a !== void 0 ? _a : Constants.monitor.defaultLineCount,\n                    value: value,\n                    viewProps: args.viewProps,\n                });\n            }\n            return new SingleLogController(args.document, {\n                formatter: formatString,\n                value: value,\n                viewProps: args.viewProps,\n            });\n        },\n    };\n\n    class InputBinding {\n        constructor(config) {\n            this.onValueChange_ = this.onValueChange_.bind(this);\n            this.reader = config.reader;\n            this.writer = config.writer;\n            this.emitter = new Emitter();\n            this.value = config.value;\n            this.value.emitter.on('change', this.onValueChange_);\n            this.target = config.target;\n            this.read();\n        }\n        read() {\n            const targetValue = this.target.read();\n            if (targetValue !== undefined) {\n                this.value.rawValue = this.reader(targetValue);\n            }\n        }\n        write_(rawValue) {\n            this.writer(this.target, rawValue);\n        }\n        onValueChange_(ev) {\n            this.write_(ev.rawValue);\n            this.emitter.emit('change', {\n                options: ev.options,\n                rawValue: ev.rawValue,\n                sender: this,\n            });\n        }\n    }\n\n    function createInputBindingController(plugin, args) {\n        const result = plugin.accept(args.target.read(), args.params);\n        if (isEmpty(result)) {\n            return null;\n        }\n        const p = ParamsParsers;\n        const valueArgs = {\n            target: args.target,\n            initialValue: result.initialValue,\n            params: result.params,\n        };\n        const reader = plugin.binding.reader(valueArgs);\n        const constraint = plugin.binding.constraint\n            ? plugin.binding.constraint(valueArgs)\n            : undefined;\n        const value = createValue(reader(result.initialValue), {\n            constraint: constraint,\n            equals: plugin.binding.equals,\n        });\n        const binding = new InputBinding({\n            reader: reader,\n            target: args.target,\n            value: value,\n            writer: plugin.binding.writer(valueArgs),\n        });\n        const disabled = p.optional.boolean(args.params.disabled).value;\n        const hidden = p.optional.boolean(args.params.hidden).value;\n        const controller = plugin.controller({\n            constraint: constraint,\n            document: args.document,\n            initialValue: result.initialValue,\n            params: result.params,\n            value: binding.value,\n            viewProps: ViewProps.create({\n                disabled: disabled,\n                hidden: hidden,\n            }),\n        });\n        const label = p.optional.string(args.params.label).value;\n        return new InputBindingController(args.document, {\n            binding: binding,\n            blade: createBlade(),\n            props: ValueMap.fromObject({\n                label: label || args.target.key,\n            }),\n            valueController: controller,\n        });\n    }\n\n    class MonitorBinding {\n        constructor(config) {\n            this.onTick_ = this.onTick_.bind(this);\n            this.reader_ = config.reader;\n            this.target = config.target;\n            this.emitter = new Emitter();\n            this.value = config.value;\n            this.ticker = config.ticker;\n            this.ticker.emitter.on('tick', this.onTick_);\n            this.read();\n        }\n        dispose() {\n            this.ticker.dispose();\n        }\n        read() {\n            const targetValue = this.target.read();\n            if (targetValue === undefined) {\n                return;\n            }\n            const buffer = this.value.rawValue;\n            const newValue = this.reader_(targetValue);\n            this.value.rawValue = createPushedBuffer(buffer, newValue);\n            this.emitter.emit('update', {\n                rawValue: newValue,\n                sender: this,\n            });\n        }\n        onTick_(_) {\n            this.read();\n        }\n    }\n\n    function createTicker(document, interval) {\n        return interval === 0\n            ? new ManualTicker()\n            : new IntervalTicker(document, interval !== null && interval !== void 0 ? interval : Constants.monitor.defaultInterval);\n    }\n    function createMonitorBindingController(plugin, args) {\n        var _a, _b, _c;\n        const P = ParamsParsers;\n        const result = plugin.accept(args.target.read(), args.params);\n        if (isEmpty(result)) {\n            return null;\n        }\n        const bindingArgs = {\n            target: args.target,\n            initialValue: result.initialValue,\n            params: result.params,\n        };\n        const reader = plugin.binding.reader(bindingArgs);\n        const bufferSize = (_b = (_a = P.optional.number(args.params.bufferSize).value) !== null && _a !== void 0 ? _a : (plugin.binding.defaultBufferSize &&\n            plugin.binding.defaultBufferSize(result.params))) !== null && _b !== void 0 ? _b : 1;\n        const interval = P.optional.number(args.params.interval).value;\n        const binding = new MonitorBinding({\n            reader: reader,\n            target: args.target,\n            ticker: createTicker(args.document, interval),\n            value: initializeBuffer(bufferSize),\n        });\n        const disabled = P.optional.boolean(args.params.disabled).value;\n        const hidden = P.optional.boolean(args.params.hidden).value;\n        const controller = plugin.controller({\n            document: args.document,\n            params: result.params,\n            value: binding.value,\n            viewProps: ViewProps.create({\n                disabled: disabled,\n                hidden: hidden,\n            }),\n        });\n        const label = (_c = P.optional.string(args.params.label).value) !== null && _c !== void 0 ? _c : args.target.key;\n        return new MonitorBindingController(args.document, {\n            binding: binding,\n            blade: createBlade(),\n            props: ValueMap.fromObject({\n                label: label,\n            }),\n            valueController: controller,\n        });\n    }\n\n    class PluginPool {\n        constructor() {\n            this.pluginsMap_ = {\n                blades: [],\n                inputs: [],\n                monitors: [],\n            };\n        }\n        getAll() {\n            return [\n                ...this.pluginsMap_.blades,\n                ...this.pluginsMap_.inputs,\n                ...this.pluginsMap_.monitors,\n            ];\n        }\n        register(r) {\n            if (r.type === 'blade') {\n                this.pluginsMap_.blades.unshift(r);\n            }\n            else if (r.type === 'input') {\n                this.pluginsMap_.inputs.unshift(r);\n            }\n            else if (r.type === 'monitor') {\n                this.pluginsMap_.monitors.unshift(r);\n            }\n        }\n        createInput(document, target, params) {\n            const initialValue = target.read();\n            if (isEmpty(initialValue)) {\n                throw new TpError({\n                    context: {\n                        key: target.key,\n                    },\n                    type: 'nomatchingcontroller',\n                });\n            }\n            const bc = this.pluginsMap_.inputs.reduce((result, plugin) => result ||\n                createInputBindingController(plugin, {\n                    document: document,\n                    target: target,\n                    params: params,\n                }), null);\n            if (bc) {\n                return bc;\n            }\n            throw new TpError({\n                context: {\n                    key: target.key,\n                },\n                type: 'nomatchingcontroller',\n            });\n        }\n        createMonitor(document, target, params) {\n            const bc = this.pluginsMap_.monitors.reduce((result, plugin) => result ||\n                createMonitorBindingController(plugin, {\n                    document: document,\n                    params: params,\n                    target: target,\n                }), null);\n            if (bc) {\n                return bc;\n            }\n            throw new TpError({\n                context: {\n                    key: target.key,\n                },\n                type: 'nomatchingcontroller',\n            });\n        }\n        createBlade(document, params) {\n            const bc = this.pluginsMap_.blades.reduce((result, plugin) => result ||\n                createBladeController(plugin, {\n                    document: document,\n                    params: params,\n                }), null);\n            if (!bc) {\n                throw new TpError({\n                    type: 'nomatchingview',\n                    context: {\n                        params: params,\n                    },\n                });\n            }\n            return bc;\n        }\n        createBladeApi(bc) {\n            if (bc instanceof InputBindingController) {\n                return new InputBindingApi(bc);\n            }\n            if (bc instanceof MonitorBindingController) {\n                return new MonitorBindingApi(bc);\n            }\n            if (bc instanceof RackController) {\n                return new RackApi(bc, this);\n            }\n            const api = this.pluginsMap_.blades.reduce((result, plugin) => result ||\n                plugin.api({\n                    controller: bc,\n                    pool: this,\n                }), null);\n            if (!api) {\n                throw TpError.shouldNeverHappen();\n            }\n            return api;\n        }\n    }\n\n    function createDefaultPluginPool() {\n        const pool = new PluginPool();\n        [\n            Point2dInputPlugin,\n            Point3dInputPlugin,\n            Point4dInputPlugin,\n            StringInputPlugin,\n            NumberInputPlugin,\n            StringColorInputPlugin,\n            ObjectColorInputPlugin,\n            NumberColorInputPlugin,\n            BooleanInputPlugin,\n            BooleanMonitorPlugin,\n            StringMonitorPlugin,\n            NumberMonitorPlugin,\n            ButtonBladePlugin,\n            FolderBladePlugin,\n            SeparatorBladePlugin,\n            TabBladePlugin,\n        ].forEach((p) => {\n            pool.register(p);\n        });\n        return pool;\n    }\n\n    class ListApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.emitter_ = new Emitter();\n            this.controller_.valueController.value.emitter.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(this, ev.rawValue),\n                });\n            });\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get options() {\n            return this.controller_.valueController.props.get('options');\n        }\n        set options(options) {\n            this.controller_.valueController.props.set('options', options);\n        }\n        get value() {\n            return this.controller_.valueController.value.rawValue;\n        }\n        set value(value) {\n            this.controller_.valueController.value.rawValue = value;\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    class SliderApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.emitter_ = new Emitter();\n            this.controller_.valueController.value.emitter.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(this, ev.rawValue),\n                });\n            });\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get maxValue() {\n            return this.controller_.valueController.sliderController.props.get('maxValue');\n        }\n        set maxValue(maxValue) {\n            this.controller_.valueController.sliderController.props.set('maxValue', maxValue);\n        }\n        get minValue() {\n            return this.controller_.valueController.sliderController.props.get('minValue');\n        }\n        set minValue(minValue) {\n            this.controller_.valueController.sliderController.props.set('minValue', minValue);\n        }\n        get value() {\n            return this.controller_.valueController.value.rawValue;\n        }\n        set value(value) {\n            this.controller_.valueController.value.rawValue = value;\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    class TextApi extends BladeApi {\n        constructor(controller) {\n            super(controller);\n            this.emitter_ = new Emitter();\n            this.controller_.valueController.value.emitter.on('change', (ev) => {\n                this.emitter_.emit('change', {\n                    event: new TpChangeEvent(this, ev.rawValue),\n                });\n            });\n        }\n        get label() {\n            return this.controller_.props.get('label');\n        }\n        set label(label) {\n            this.controller_.props.set('label', label);\n        }\n        get formatter() {\n            return this.controller_.valueController.props.get('formatter');\n        }\n        set formatter(formatter) {\n            this.controller_.valueController.props.set('formatter', formatter);\n        }\n        get value() {\n            return this.controller_.valueController.value.rawValue;\n        }\n        set value(value) {\n            this.controller_.valueController.value.rawValue = value;\n        }\n        on(eventName, handler) {\n            const bh = handler.bind(this);\n            this.emitter_.on(eventName, (ev) => {\n                bh(ev.event);\n            });\n            return this;\n        }\n    }\n\n    const ListBladePlugin = (function () {\n        return {\n            id: 'list',\n            type: 'blade',\n            accept(params) {\n                const p = ParamsParsers;\n                const result = parseParams(params, {\n                    options: p.required.custom(parseListOptions),\n                    value: p.required.raw,\n                    view: p.required.constant('list'),\n                    label: p.optional.string,\n                });\n                return result ? { params: result } : null;\n            },\n            controller(args) {\n                const ic = new ListController(args.document, {\n                    props: ValueMap.fromObject({\n                        options: normalizeListOptions(args.params.options),\n                    }),\n                    value: createValue(args.params.value),\n                    viewProps: args.viewProps,\n                });\n                return new LabeledValueController(args.document, {\n                    blade: args.blade,\n                    props: ValueMap.fromObject({\n                        label: args.params.label,\n                    }),\n                    valueController: ic,\n                });\n            },\n            api(args) {\n                if (!(args.controller instanceof LabeledValueController)) {\n                    return null;\n                }\n                if (!(args.controller.valueController instanceof ListController)) {\n                    return null;\n                }\n                return new ListApi(args.controller);\n            },\n        };\n    })();\n\n    /**\n     * @hidden\n     */\n    function exportPresetJson(targets) {\n        return targets.reduce((result, target) => {\n            return Object.assign(result, {\n                [target.presetKey]: target.read(),\n            });\n        }, {});\n    }\n    /**\n     * @hidden\n     */\n    function importPresetJson(targets, preset) {\n        targets.forEach((target) => {\n            const value = preset[target.presetKey];\n            if (value !== undefined) {\n                target.write(value);\n            }\n        });\n    }\n\n    class RootApi extends FolderApi {\n        /**\n         * @hidden\n         */\n        constructor(controller, pool) {\n            super(controller, pool);\n        }\n        get element() {\n            return this.controller_.view.element;\n        }\n        /**\n         * Imports a preset of all inputs.\n         * @param preset The preset object to import.\n         */\n        importPreset(preset) {\n            const targets = this.controller_.rackController.rack\n                .find(InputBindingController)\n                .map((ibc) => {\n                return ibc.binding.target;\n            });\n            importPresetJson(targets, preset);\n            this.refresh();\n        }\n        /**\n         * Exports a preset of all inputs.\n         * @return An exported preset object.\n         */\n        exportPreset() {\n            const targets = this.controller_.rackController.rack\n                .find(InputBindingController)\n                .map((ibc) => {\n                return ibc.binding.target;\n            });\n            return exportPresetJson(targets);\n        }\n        /**\n         * Refreshes all bindings of the pane.\n         */\n        refresh() {\n            // Force-read all input bindings\n            this.controller_.rackController.rack\n                .find(InputBindingController)\n                .forEach((ibc) => {\n                ibc.binding.read();\n            });\n            // Force-read all monitor bindings\n            this.controller_.rackController.rack\n                .find(MonitorBindingController)\n                .forEach((mbc) => {\n                mbc.binding.read();\n            });\n        }\n    }\n\n    class RootController extends FolderController {\n        constructor(doc, config) {\n            super(doc, {\n                expanded: config.expanded,\n                blade: config.blade,\n                props: config.props,\n                root: true,\n                viewProps: config.viewProps,\n            });\n        }\n    }\n\n    const SliderBladePlugin = {\n        id: 'slider',\n        type: 'blade',\n        accept(params) {\n            const p = ParamsParsers;\n            const result = parseParams(params, {\n                max: p.required.number,\n                min: p.required.number,\n                view: p.required.constant('slider'),\n                format: p.optional.function,\n                label: p.optional.string,\n                value: p.optional.number,\n            });\n            return result ? { params: result } : null;\n        },\n        controller(args) {\n            var _a, _b;\n            const v = (_a = args.params.value) !== null && _a !== void 0 ? _a : 0;\n            const vc = new SliderTextController(args.document, {\n                baseStep: 1,\n                parser: parseNumber,\n                sliderProps: ValueMap.fromObject({\n                    maxValue: args.params.max,\n                    minValue: args.params.min,\n                }),\n                textProps: ValueMap.fromObject({\n                    draggingScale: getSuitableDraggingScale(undefined, v),\n                    formatter: (_b = args.params.format) !== null && _b !== void 0 ? _b : numberToString,\n                }),\n                value: createValue(v),\n                viewProps: args.viewProps,\n            });\n            return new LabeledValueController(args.document, {\n                blade: args.blade,\n                props: ValueMap.fromObject({\n                    label: args.params.label,\n                }),\n                valueController: vc,\n            });\n        },\n        api(args) {\n            if (!(args.controller instanceof LabeledValueController)) {\n                return null;\n            }\n            if (!(args.controller.valueController instanceof SliderTextController)) {\n                return null;\n            }\n            return new SliderApi(args.controller);\n        },\n    };\n\n    const TextBladePlugin = (function () {\n        return {\n            id: 'text',\n            type: 'blade',\n            accept(params) {\n                const p = ParamsParsers;\n                const result = parseParams(params, {\n                    parse: p.required.function,\n                    value: p.required.raw,\n                    view: p.required.constant('text'),\n                    format: p.optional.function,\n                    label: p.optional.string,\n                });\n                return result ? { params: result } : null;\n            },\n            controller(args) {\n                var _a;\n                const ic = new TextController(args.document, {\n                    parser: args.params.parse,\n                    props: ValueMap.fromObject({\n                        formatter: (_a = args.params.format) !== null && _a !== void 0 ? _a : ((v) => String(v)),\n                    }),\n                    value: createValue(args.params.value),\n                    viewProps: args.viewProps,\n                });\n                return new LabeledValueController(args.document, {\n                    blade: args.blade,\n                    props: ValueMap.fromObject({\n                        label: args.params.label,\n                    }),\n                    valueController: ic,\n                });\n            },\n            api(args) {\n                if (!(args.controller instanceof LabeledValueController)) {\n                    return null;\n                }\n                if (!(args.controller.valueController instanceof TextController)) {\n                    return null;\n                }\n                return new TextApi(args.controller);\n            },\n        };\n    })();\n\n    function createDefaultWrapperElement(doc) {\n        const elem = doc.createElement('div');\n        elem.classList.add(ClassName('dfw')());\n        if (doc.body) {\n            doc.body.appendChild(elem);\n        }\n        return elem;\n    }\n    function embedStyle(doc, id, css) {\n        if (doc.querySelector(`style[data-tp-style=${id}]`)) {\n            return;\n        }\n        const styleElem = doc.createElement('style');\n        styleElem.dataset.tpStyle = id;\n        styleElem.textContent = css;\n        doc.head.appendChild(styleElem);\n    }\n    /**\n     * The root pane of Tweakpane.\n     */\n    class Pane extends RootApi {\n        constructor(opt_config) {\n            var _a;\n            const config = opt_config || {};\n            const doc = (_a = config.document) !== null && _a !== void 0 ? _a : getWindowDocument();\n            const pool = createDefaultPluginPool();\n            const rootController = new RootController(doc, {\n                expanded: config.expanded,\n                blade: createBlade(),\n                props: ValueMap.fromObject({\n                    title: config.title,\n                }),\n                viewProps: ViewProps.create(),\n            });\n            super(rootController, pool);\n            this.pool_ = pool;\n            this.containerElem_ = config.container || createDefaultWrapperElement(doc);\n            this.containerElem_.appendChild(this.element);\n            this.doc_ = doc;\n            this.usesDefaultWrapper_ = !config.container;\n            this.setUpDefaultPlugins_();\n        }\n        get document() {\n            if (!this.doc_) {\n                throw TpError.alreadyDisposed();\n            }\n            return this.doc_;\n        }\n        dispose() {\n            const containerElem = this.containerElem_;\n            if (!containerElem) {\n                throw TpError.alreadyDisposed();\n            }\n            if (this.usesDefaultWrapper_) {\n                const parentElem = containerElem.parentElement;\n                if (parentElem) {\n                    parentElem.removeChild(containerElem);\n                }\n            }\n            this.containerElem_ = null;\n            this.doc_ = null;\n            super.dispose();\n        }\n        registerPlugin(bundle) {\n            const plugins = 'plugin' in bundle\n                ? [bundle.plugin]\n                : 'plugins' in bundle\n                    ? bundle.plugins\n                    : [];\n            plugins.forEach((p) => {\n                this.pool_.register(p);\n                this.embedPluginStyle_(p);\n            });\n        }\n        embedPluginStyle_(plugin) {\n            if (plugin.css) {\n                embedStyle(this.document, `plugin-${plugin.id}`, plugin.css);\n            }\n        }\n        setUpDefaultPlugins_() {\n            // NOTE: This string literal will be replaced with the default CSS by Rollup at the compilation time\n            embedStyle(this.document, 'default', '.tp-lstv_s,.tp-btnv_b,.tp-p2dv_b,.tp-colswv_sw,.tp-p2dpv_p,.tp-txtv_i,.tp-grlv_g,.tp-sglv_i,.tp-mllv_i,.tp-fldv_b,.tp-rotv_b,.tp-ckbv_i,.tp-coltxtv_ms,.tp-tbiv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-lstv_s,.tp-btnv_b,.tp-p2dv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-lstv_s:hover,.tp-btnv_b:hover,.tp-p2dv_b:hover{background-color:var(--btn-bg-h)}.tp-lstv_s:focus,.tp-btnv_b:focus,.tp-p2dv_b:focus{background-color:var(--btn-bg-f)}.tp-lstv_s:active,.tp-btnv_b:active,.tp-p2dv_b:active{background-color:var(--btn-bg-a)}.tp-lstv_s:disabled,.tp-btnv_b:disabled,.tp-p2dv_b:disabled{opacity:0.5}.tp-colswv_sw,.tp-p2dpv_p,.tp-txtv_i{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-colswv_sw:hover,.tp-p2dpv_p:hover,.tp-txtv_i:hover{background-color:var(--in-bg-h)}.tp-colswv_sw:focus,.tp-p2dpv_p:focus,.tp-txtv_i:focus{background-color:var(--in-bg-f)}.tp-colswv_sw:active,.tp-p2dpv_p:active,.tp-txtv_i:active{background-color:var(--in-bg-a)}.tp-colswv_sw:disabled,.tp-p2dpv_p:disabled,.tp-txtv_i:disabled{opacity:0.5}.tp-grlv_g,.tp-sglv_i,.tp-mllv_i{background-color:var(--mo-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--mo-fg);height:var(--bld-us);width:100%}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono,Source Code Pro,Menlo,Courier,monospace);--bs-br: var(--tp-base-border-radius, 6px);--cnt-h-p: var(--tp-container-horizontal-padding, 4px);--cnt-v-p: var(--tp-container-vertical-padding, 4px);--elm-br: var(--tp-element-border-radius, 2px);--bld-s: var(--tp-blade-spacing, 4px);--bld-us: var(--tp-blade-unit-size, 20px);--bs-bg: var(--tp-base-background-color, #2f3137);--bs-sh: var(--tp-base-shadow-color, rgba(0,0,0,0.2));--btn-bg: var(--tp-button-background-color, #adafb8);--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, #2f3137);--cnt-bg: var(--tp-container-background-color, rgba(187,188,196,0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187,188,196,0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187,188,196,0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187,188,196,0.15));--cnt-fg: var(--tp-container-foreground-color, #bbbcc4);--in-bg: var(--tp-input-background-color, rgba(187,188,196,0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187,188,196,0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187,188,196,0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187,188,196,0.15));--in-fg: var(--tp-input-foreground-color, #bbbcc4);--lbl-fg: var(--tp-label-foreground-color, rgba(187,188,196,0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0,0,0,0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187,188,196,0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(0,0,0,0.2))}.tp-fldv_c>.tp-cntv.tp-v-lst,.tp-tabv_c .tp-brkv>.tp-cntv.tp-v-lst,.tp-rotv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1 * var(--cnt-v-p))}.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-fldv_c>*:not(.tp-v-fst),.tp-tabv_c .tp-brkv>*:not(.tp-v-fst),.tp-rotv_c>*:not(.tp-v-fst){margin-top:var(--bld-s)}.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-v-p)}.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-cntv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-v-p)}.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-fldv_c>.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv{margin-left:4px}.tp-fldv_c>.tp-fldv>.tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--elm-br);border-bottom-left-radius:var(--elm-br)}.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-fldv_c .tp-fldv>.tp-fldv_c,.tp-tabv_c .tp-brkv .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--elm-br)}.tp-fldv_c>.tp-tabv>.tp-tabv_i,.tp-tabv_c .tp-brkv>.tp-tabv>.tp-tabv_i{border-top-left-radius:var(--elm-br)}.tp-fldv_c .tp-tabv>.tp-tabv_c,.tp-tabv_c .tp-brkv .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--elm-br)}.tp-fldv_b,.tp-rotv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);overflow:hidden;padding-left:var(--cnt-h-p);padding-right:calc(2px * 2 + var(--bld-us) + var(--cnt-h-p));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-fldv_b:hover,.tp-rotv_b:hover{background-color:var(--cnt-bg-h)}.tp-fldv_b:focus,.tp-rotv_b:focus{background-color:var(--cnt-bg-f)}.tp-fldv_b:active,.tp-rotv_b:active{background-color:var(--cnt-bg-a)}.tp-fldv_b:disabled,.tp-rotv_b:disabled{opacity:0.5}.tp-fldv_m,.tp-rotv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:\\'\\';display:block;height:6px;right:calc(var(--cnt-h-p) + (var(--bld-us) + 4px - 6px) / 2 - 2px);margin:auto;opacity:0.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m,.tp-rotv.tp-rotv-expanded .tp-rotv_m{transform:none}.tp-fldv_c,.tp-rotv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c,.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c{display:none}.tp-fldv.tp-fldv-expanded>.tp-fldv_c,.tp-rotv.tp-rotv-expanded .tp-rotv_c{opacity:1;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-coltxtv_m,.tp-lstv{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-coltxtv_mm,.tp-lstv_m{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-coltxtv_mm svg,.tp-lstv_m svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-coltxtv_mm svg path,.tp-lstv_m svg path{fill:currentColor}.tp-coltxtv_w,.tp-pndtxtv{display:flex}.tp-coltxtv_c,.tp-pndtxtv_a{width:100%}.tp-coltxtv_c+.tp-coltxtv_c,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-pndtxtv_a{margin-left:2px}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--elm-br);cursor:pointer;display:block;height:var(--bld-us);position:relative;width:var(--bld-us)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:0.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--bld-us)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--bld-s);opacity:1}.tp-colv .tp-popv{left:calc(-1 * var(--cnt-h-p));right:calc(-1 * var(--cnt-h-p));top:var(--bld-us)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--bld-s)}.tp-colpv_rgb{display:flex;margin-top:var(--bld-s);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-v-p);padding-top:calc(var(--cnt-v-p) + 2px);position:relative}.tp-colpv_a:before{background-color:var(--grv-fg);content:\\'\\';height:2px;left:calc(-1 * var(--cnt-h-p));position:absolute;right:calc(-1 * var(--cnt-h-p));top:0}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--elm-br);outline:none;overflow:hidden;position:relative}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--bld-us) * 4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,0.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0,0,0,0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--elm-br);border:rgba(255,255,255,0.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,0.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative;width:100%}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--elm-br);box-shadow:0 0 2px rgba(0,0,0,0.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--elm-br);border:rgba(255,255,255,0.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--elm-br)}.tp-colswv.tp-v-disabled{opacity:0.5}.tp-colswv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;cursor:pointer;display:block;height:var(--bld-us);left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:var(--bld-us)}.tp-colswv_b:focus::after{border:rgba(255,255,255,0.75) solid 2px;border-radius:var(--elm-br);bottom:0;content:\\'\\';display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--elm-br);color:var(--lbl-fg);cursor:pointer;height:var(--bld-us);line-height:var(--bld-us);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv.tp-fldv-not .tp-fldv_b{display:none}.tp-fldv_t{padding-left:4px}.tp-fldv_c{border-left:var(--cnt-bg) solid 4px}.tp-fldv_b:hover+.tp-fldv_c{border-left-color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_c{border-left-color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_c{border-left-color:var(--cnt-bg-a)}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--bld-us) * 3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left 0.05s, top 0.05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:0.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-h-p);padding-right:var(--cnt-h-p)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:0.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:160px}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding:0 4px}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:0.5}.tp-mllv_i{display:block;height:calc(var(--bld-us) * 3);line-height:var(--bld-us);padding:0 4px;resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:0.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--bld-us);margin-right:4px;position:relative;width:var(--bld-us)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--bld-s);opacity:1}.tp-p2dv .tp-popv{left:calc(-1 * var(--cnt-h-p));right:calc(-1 * var(--cnt-h-p));top:var(--bld-us)}.tp-p2dpv{padding-left:calc(var(--bld-us) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:0.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:0.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:6px;box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:168px;padding:var(--cnt-v-p) var(--cnt-h-p);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sldv.tp-v-disabled{opacity:0.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--bld-us);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:\\'\\';display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:\\'\\';display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--elm-br);bottom:0;content:\\'\\';display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv.tp-v-disabled{opacity:0.5}.tp-tabv_i{align-items:flex-end;display:flex;overflow:hidden}.tp-tabv.tp-tabv-nop .tp-tabv_i{height:calc(var(--bld-us) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_i::before{background-color:var(--cnt-bg);bottom:0;content:\\'\\';height:2px;left:0;position:absolute;right:0}.tp-tabv_c{border-left:var(--cnt-bg) solid 4px;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p)}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv::before{background-color:var(--cnt-bg);bottom:0;content:\\'\\';height:2px;left:-2px;position:absolute;width:2px}.tp-tbiv_b{background-color:var(--cnt-bg);display:block;padding-left:calc(var(--cnt-h-p) + 4px);padding-right:calc(var(--cnt-h-p) + 4px);width:100%}.tp-tbiv_b:hover{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active{background-color:var(--cnt-bg-a)}.tp-tbiv_b:disabled{opacity:0.5}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);opacity:0.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-txtv{position:relative}.tp-txtv_i{padding:0 4px}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:0.3}.tp-txtv_k{cursor:pointer;height:100%;left:-3px;position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:\\'\\';height:calc(var(--bld-us) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:0.1;position:absolute;top:0;transition:border-radius 0.1s, height 0.1s, transform 0.1s, width 0.1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--elm-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) transparent transparent transparent;border-style:solid;border-width:2px;box-sizing:border-box;content:\\'\\';font-size:0.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--font-family);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(2px * 2 + var(--bld-us) + var(--cnt-h-p));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv.tp-rotv-not .tp-rotv_b{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c,.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1 * var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1 * var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_i{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}');\n            this.pool_.getAll().forEach((plugin) => {\n                this.embedPluginStyle_(plugin);\n            });\n            this.registerPlugin({\n                plugins: [\n                    SliderBladePlugin,\n                    ListBladePlugin,\n                    TabBladePlugin,\n                    TextBladePlugin,\n                ],\n            });\n        }\n    }\n\n    const VERSION = new Semver('3.0.7');\n\n    exports.BladeApi = BladeApi;\n    exports.ButtonApi = ButtonApi;\n    exports.FolderApi = FolderApi;\n    exports.InputBindingApi = InputBindingApi;\n    exports.ListApi = ListApi;\n    exports.MonitorBindingApi = MonitorBindingApi;\n    exports.Pane = Pane;\n    exports.SeparatorApi = SeparatorApi;\n    exports.SliderApi = SliderApi;\n    exports.TabApi = TabApi;\n    exports.TabPageApi = TabPageApi;\n    exports.TextApi = TextApi;\n    exports.TpChangeEvent = TpChangeEvent;\n    exports.VERSION = VERSION;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n","import './telegram-wallpaper.css'\n\ninterface Positions {\n  x: number\n  y: number\n}\n\ninterface RgbColor {\n  r: number\n  g: number\n  b: number\n}\n\ntype Container = HTMLElement | Element | null\n\ntype InitOptions = Pick<TWOptions, 'colors' | 'opacity' | 'pattern' | 'blur'> & {\n  container?: Container\n}\n\ninterface TWOptions {\n  fps?: number\n  blur?: number\n  pattern?: string\n  colors?: string[]\n  opacity?: number\n  animate?: boolean\n  scrollAnimate?: boolean\n}\n\nconst curve = [\n  0, 0.25, 0.50, 0.75, 1, 1.5, 2, 2.5, 3, 3.5, 4, 5, 6, 7, 8, 9, 10, 11, 12,\n  13, 14, 15, 16, 17, 18, 18.3, 18.6, 18.9, 19.2, 19.5, 19.8, 20.1, 20.4, 20.7,\n  21.0, 21.3, 21.6, 21.9, 22.2, 22.5, 22.8, 23.1, 23.4, 23.7, 24.0, 24.3, 24.6,\n  24.9, 25.2, 25.5, 25.8, 26.1, 26.3, 26.4, 26.5, 26.6, 26.7, 26.8, 26.9, 27\n]\n\nconst positions: Positions[] = [\n  { x: 0.80, y: 0.10 },\n  { x: 0.60, y: 0.20 },\n  { x: 0.35, y: 0.25 },\n  { x: 0.25, y: 0.60 },\n  { x: 0.20, y: 0.90 },\n  { x: 0.40, y: 0.80 },\n  { x: 0.65, y: 0.75 },\n  { x: 0.75, y: 0.40 }\n]\n\nclass TelegramWallpaper {\n  private width = 50\n  private height = 50\n  private phase = 0\n  private tail = 0\n  private tails = 90\n  private scrolltails = 50\n  private timestamp = 100\n  private fps = 15\n  private frametime = 1000 / this.fps\n  private scrollDelta = 0\n  private scrollTicking = false\n  private frames: ImageData[] = []\n  private colors: RgbColor[] = []\n  private curve = curve\n  private positions = positions\n  private phases = positions.length\n  private interval: ReturnType<typeof setInterval> | null\n  private raf: ReturnType<typeof requestAnimationFrame> | null\n\n  private container: Container\n  private hc: HTMLCanvasElement\n  private hctx: CanvasRenderingContext2D\n  private canvas: HTMLCanvasElement\n  private ctx: CanvasRenderingContext2D\n  private pattern: HTMLDivElement | null\n\n  constructor(\n    container: Container,\n    {\n      fps,\n      blur,\n      colors,\n      pattern,\n      opacity,\n      animate,\n      scrollAnimate\n    }: TWOptions\n  ) {\n    this.container = container\n\n    if (this.container) {\n      this.init({\n        pattern,\n        opacity,\n        colors,\n        blur\n      })\n\n      if (typeof fps === 'number') {\n        this.updateFrametime(fps)\n      }\n\n      if (animate) {\n        this.animate(animate)\n      }\n\n      if (scrollAnimate) {\n        this.scrollAnimate(scrollAnimate)\n      }\n    }\n  }\n\n  private hexToRgb(hex: string): RgbColor | null {\n    const result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex)\n\n    return result ? {\n      r: parseInt(result[1], 16),\n      g: parseInt(result[2], 16),\n      b: parseInt(result[3], 16)\n    } : null\n  }\n\n  private getPositions(shift: number): Positions[] {\n    const positions = [...this.positions]\n    while (shift > 0) {\n      positions.push(positions.shift()!)\n      shift--\n    }\n\n    const result = []\n    for (let i = 0; i < positions.length; i += 2) {\n      result.push(positions[i])\n    }\n\n    return result\n  }\n\n  private curPosition(phase: number, tail: number): Positions[] {\n    tail %= this.tails\n    const pos = this.getPositions(phase % this.phases)\n\n    if (tail) {\n      const next_pos = this.getPositions(++phase % this.phases)\n      const d1x = (next_pos[0].x - pos[0].x) / this.tails\n      const d1y = (next_pos[0].y - pos[0].y) / this.tails\n      const d2x = (next_pos[1].x - pos[1].x) / this.tails\n      const d2y = (next_pos[1].y - pos[1].y) / this.tails\n      const d3x = (next_pos[2].x - pos[2].x) / this.tails\n      const d3y = (next_pos[2].y - pos[2].y) / this.tails\n      const d4x = (next_pos[3].x - pos[3].x) / this.tails\n      const d4y = (next_pos[3].y - pos[3].y) / this.tails\n\n      return [\n        {\n          x: pos[0].x + d1x * tail,\n          y: pos[0].y + d1y * tail\n        },\n        {\n          x: pos[1].x + d2x * tail,\n          y: pos[1].y + d2y * tail\n        },\n        {\n          x: pos[2].x + d3x * tail,\n          y: pos[2].y + d3y * tail\n        },\n        {\n          x: pos[3].x + d4x * tail,\n          y: pos[3].y + d4y * tail\n        }\n      ]\n    }\n\n    return pos\n  }\n\n  private changeTail(diff: number): void {\n    this.tail += diff\n\n    while (this.tail >= this.tails) {\n      this.tail -= this.tails\n      this.phase++\n\n      if (this.phase >= this.phases) {\n        this.phase -= this.phases\n      }\n    }\n\n    while (this.tail < 0) {\n      this.tail += this.tails\n      this.phase--\n\n      if (this.phase < 0) {\n        this.phase += this.phases\n      }\n    }\n  }\n\n  private onWheel(event: WheelEvent): void {\n    this.scrollDelta += event.deltaY\n\n    if (!this.scrollTicking) {\n      requestAnimationFrame(() => this.drawOnWheel())\n      this.scrollTicking = true\n    }\n  }\n\n  private drawOnWheel(): void {\n    let diff = this.scrollDelta / this.scrolltails\n    this.scrollDelta %= this.scrolltails\n\n    diff = diff > 0 ?\n      Math.floor(diff) :\n      Math.ceil(diff)\n\n    if (diff) {\n      this.changeTail(diff)\n      const curPos = this.curPosition(this.phase, this.tail)\n      this.drawGradient(curPos)\n    }\n\n    this.scrollTicking = false\n  }\n\n  private drawNextPositionAnimated(): void {\n    if (this.frames.length > 0) {\n      const id = this.frames.shift()!\n      this.drawImageData(id)\n    } else {\n      clearInterval(this.interval!)\n    }\n  }\n\n  private getGradientImageData(positions: Positions[]): ImageData {\n    const id = this.hctx.createImageData(this.width, this.height)\n    const pixels = id.data\n    let offset = 0\n\n    for (let y = 0; y < this.height; y++) {\n      const directPixelY = y / this.height\n      const centerDistanceY = directPixelY - 0.5\n      const centerDistanceY2 = centerDistanceY * centerDistanceY\n\n      for (let x = 0; x < this.width; x++) {\n        const directPixelX = x / this.width\n\n        const centerDistanceX = directPixelX - 0.5\n        const centerDistance = Math.sqrt(centerDistanceX * centerDistanceX + centerDistanceY2)\n\n        const swirlFactor = 0.35 * centerDistance\n        const theta = swirlFactor * swirlFactor * 0.8 * 8.0\n        const sinTheta = Math.sin(theta)\n        const cosTheta = Math.cos(theta)\n\n        const pixelX = Math.max(0.0, Math.min(1.0, 0.5 + centerDistanceX * cosTheta - centerDistanceY * sinTheta))\n        const pixelY = Math.max(0.0, Math.min(1.0, 0.5 + centerDistanceX * sinTheta + centerDistanceY * cosTheta))\n\n        let distanceSum = 0.0\n\n        let r = 0.0\n        let g = 0.0\n        let b = 0.0\n\n        for (let i = 0; i < this.colors.length; i++) {\n          const colorX = positions[i].x\n          const colorY = positions[i].y\n\n          const distanceX = pixelX - colorX\n          const distanceY = pixelY - colorY\n\n          let distance = Math.max(0.0, 0.9 - Math.sqrt(distanceX * distanceX + distanceY * distanceY))\n          distance = distance * distance * distance * distance\n          distanceSum += distance\n\n          r += distance * this.colors[i].r / 255\n          g += distance * this.colors[i].g / 255\n          b += distance * this.colors[i].b / 255\n        }\n\n        pixels[offset++] = r / distanceSum * 255.0\n        pixels[offset++] = g / distanceSum * 255.0\n        pixels[offset++] = b / distanceSum * 255.0\n        pixels[offset++] = 0xFF // 255\n      }\n    }\n\n    return id\n  }\n\n  private drawImageData(id: ImageData): void {\n    this.hctx.putImageData(id, 0, 0)\n    this.ctx.drawImage(this.hc, 0, 0, 50, 50)\n  }\n\n  private drawGradient(pos: Positions[]): void {\n    this.drawImageData(this.getGradientImageData(pos))\n  }\n\n  private doAnimate(): void {\n    const now = +Date.now()\n\n    if (!document.hasFocus() || now - this.timestamp < this.frametime) {\n      this.raf = requestAnimationFrame(() => this.doAnimate())\n      return\n    }\n\n    this.timestamp = now\n    this.changeTail(1)\n\n    const cur_pos = this.curPosition(this.phase, this.tail)\n    this.drawGradient(cur_pos)\n\n    this.raf = requestAnimationFrame(() => this.doAnimate())\n  }\n\n  init({ container, pattern, opacity, colors, blur }: InitOptions): void {\n    if (!this.container || !colors) {\n      return\n    }\n\n    if (this.hc) {\n      clearInterval(this.interval!)\n      this.canvas.remove()\n      this.pattern?.remove()\n      this.hc.remove()\n      this.colors = []\n      this.frames = []\n    }\n\n    for (let i = 0; i < colors.length; i++) {\n      const color = this.hexToRgb(colors[i])\n\n      if (color) {\n        this.colors.push(color)\n      }\n    }\n\n    if (!this.hc) {\n      this.hc = document.createElement('canvas')\n      this.hc.width = this.width\n      this.hc.height = this.height\n      this.hctx = this.hc.getContext('2d')!\n    }\n\n    this.canvas = document.createElement('canvas')\n    this.canvas.classList.add('background_canvas')\n    this.canvas.width = this.width\n    this.canvas.height = this.height\n    this.ctx = this.canvas.getContext('2d')!;\n    (container ?? this.container).appendChild(this.canvas)\n\n    if (pattern) {\n      this.pattern = document.createElement('div')\n      this.pattern.classList.add('background_pattern')\n      this.updateBlur(blur ?? 0)\n      this.updatePattern(pattern)\n      this.updateOpacity(opacity ?? 0.3);\n      (container ?? this.container).appendChild(this.pattern)\n    }\n\n    this.update()\n  }\n\n  update(): void {\n    const pos = this.curPosition(this.phase, this.tail)\n    this.drawGradient(pos)\n  }\n\n  updateFrametime(fps: number): void {\n    this.frametime = 1000 / fps\n  }\n\n  updateOpacity(opacity: number): void {\n    if (this.pattern) {\n      this.pattern.style.opacity = opacity.toString()\n    }\n  }\n\n  updatePattern(path: string): void {\n    if (this.pattern) {\n      this.pattern.style.backgroundImage = `url(${path})`\n    }\n  }\n\n  updateBlur(blur: number): void {\n    if (this.pattern) {\n      this.pattern.style.filter = `blur(${blur}px)`\n    }\n  }\n\n  toNextPosition(): void {\n    clearInterval(this.interval!)\n    this.frames = []\n\n    const prev_pos = this.getPositions(this.phase % this.phases)\n    this.phase++\n    const pos = this.getPositions(this.phase % this.phases)\n\n    const h = 27\n    const d1x = (pos[0].x - prev_pos[0].x) / h\n    const d1y = (pos[0].y - prev_pos[0].y) / h\n    const d2x = (pos[1].x - prev_pos[1].x) / h\n    const d2y = (pos[1].y - prev_pos[1].y) / h\n    const d3x = (pos[2].x - prev_pos[2].x) / h\n    const d3y = (pos[2].y - prev_pos[2].y) / h\n    const d4x = (pos[3].x - prev_pos[3].x) / h\n    const d4y = (pos[3].y - prev_pos[3].y) / h\n\n    for (let frame = 0; frame < 60; frame++) {\n      const cur_pos: Positions[] = [\n        {\n          x: prev_pos[0].x + d1x * this.curve[frame],\n          y: prev_pos[0].y + d1y * this.curve[frame]\n        },\n        {\n          x: prev_pos[1].x + d2x * this.curve[frame],\n          y: prev_pos[1].y + d2y * this.curve[frame]\n        },\n        {\n          x: prev_pos[2].x + d3x * this.curve[frame],\n          y: prev_pos[2].y + d3y * this.curve[frame]\n        },\n        {\n          x: prev_pos[3].x + d4x * this.curve[frame],\n          y: prev_pos[3].y + d4y * this.curve[frame]\n        }\n      ]\n\n      this.frames.push(this.getGradientImageData(cur_pos))\n    }\n\n    this.interval = setInterval(() => {\n      this.drawNextPositionAnimated()\n    }, 1000 / 30)\n  }\n\n  animate(start: boolean): void {\n    if (!start && this.raf) {\n      return cancelAnimationFrame(this.raf)\n    }\n\n    this.doAnimate()\n  }\n\n  scrollAnimate(start: boolean): void {\n    if (start) {\n      document.onwheel = (event) => this.onWheel(event)\n    } else {\n      document.onwheel = null\n    }\n  }\n}\n\nexport type { TWOptions }\nexport default TelegramWallpaper\n","import { Pane } from 'tweakpane'\nimport TelegramWallpaper from './telegram-wallpaper'\nimport type { ListApi } from 'tweakpane'\nimport type { TWOptions } from './telegram-wallpaper'\n\nconst colors = {\n  'Default': ['#dbddbb', '#6ba587', '#d5d88d', '#88b884'],\n  'Amethyst': ['#4f5bd5', '#962fbf', '#dd6cb9', '#fec496'],\n  'Calico': ['#baa161', '#ddb56d', '#cea668', '#faf4d2'],\n  'Cashmere': ['#ffe7b2', '#e2c0ff', '#ffc3b2'],\n  'Cavern Pink': ['#ecd893', '#e5a1d0', '#edd594', '#d1a3e2'],\n  'Cheerfulness': ['#efd359', '#e984d8', '#ac86ed', '#40cdde'],\n  'Cold Purple': ['#6c8cd4', '#d4a7c9', '#b2b1ee'],\n  'Curious Blue': ['#527bdd', '#009fdd', '#a4dbff'],\n  'France': ['#fbd9e6', '#fb9ae5', '#d5f7ff', '#73caff'],\n  'Light Wisteria': ['#b493e6', '#eab9d9', '#8376c2', '#e4b2ea'],\n  'Malibu': ['#679ced', '#e39fea', '#888dec', '#8adbf2'],\n  'Monte Carlo': ['#85d685', '#67a3f2', '#8fe1d6', '#dceb92'],\n  'Perfume': ['#b9e2ff', '#eccbff', '#a2b4ff', '#daeacb'],\n  'Periwinkle Gray': ['#efb7dc', '#c6b1ef', '#b1e9ea', '#97beeb'],\n  'Pine Glade': ['#fbe37d', '#336f55', '#fff5c5', '#7fa381'],\n  'Santa': ['#384F2F', '#BF141B', '#135E35', '#7A3226'],\n  'Spindle': ['#b2e3dd', '#bbead5', '#9fb0ea', '#b0cdeb'],\n  'Viola': ['#f7dd6d', '#e96caf', '#edac4c', '#a464f4'],\n  'Wewak': ['#e8c06e', '#f29ebf', '#f0e486', '#eaa36e'],\n  'Wild Willow': ['#f0c07a', '#afd677', '#e4d573', '#7fc289']\n}\n\nconst patternPath = location.href + 'patterns/'\nconst patterns = [\n  {\n    text: 'Animals',\n    path: patternPath + 'animals.svg'\n  },\n  {\n    text: 'Astronaut cats',\n    path: patternPath + 'astronaut_cats.svg'\n  },\n  {\n    text: 'Beach',\n    path: patternPath + 'beach.svg'\n  },\n  {\n    text: 'Cats and Dogs',\n    path: patternPath + 'cats_and_dogs.svg'\n  },\n  {\n    text: 'Christmas',\n    path: patternPath + 'christmas.svg'\n  },\n  {\n    text: 'Fantasy',\n    path: patternPath + 'fantasy.svg'\n  },\n  {\n    text: 'Late night delight',\n    path: patternPath + 'late_night_delight.svg'\n  },\n  {\n    text: 'Magic',\n    path: patternPath + 'magic.svg'\n  },\n  {\n    text: 'Math',\n    path: patternPath + 'math.svg'\n  },\n  {\n    text: 'Paris',\n    path: patternPath + 'paris.svg'\n  },\n  {\n    text: 'Games',\n    path: patternPath + 'games.svg'\n  },\n  {\n    text: 'Snowflakes',\n    path: patternPath + 'snowflakes.svg'\n  },\n  {\n    text: 'Space',\n    path: patternPath + 'space.svg'\n  },\n  {\n    text: 'Star Wars',\n    path: patternPath + 'star_wars.svg'\n  },\n  {\n    text: 'Sweets',\n    path: patternPath + 'sweets.svg'\n  },\n  {\n    text: 'Tattoos',\n    path: patternPath + 'tattoos.svg'\n  },\n  {\n    text: 'Underwater World',\n    path: patternPath + 'underwater_world.svg'\n  },\n  {\n    text: 'Unicorns',\n    path: patternPath + 'unicorn.svg'\n  },\n  {\n    text: 'Zoo',\n    path: patternPath + 'zoo.svg'\n  }\n]\n\nconst container = document.querySelector('.background_wrap')!\n\nconst options: TWOptions = {\n  fps: 60,\n  blur: 0,\n  opacity: 0.5,\n  animate: true,\n  scrollAnimate: true,\n  colors: colors.Default,\n  pattern: patterns[0].path\n}\n\nconst copyOptions = { ...options }\n\nconst wallpaper = new TelegramWallpaper(container, options)\n\nconst tweakpane = new Pane({\n  document,\n  expanded: true,\n  title: 'Telegram Wallpaper'\n})\n\ntweakpane\n  .addInput(options, 'fps', {\n    min: 1,\n    max: 360,\n    step: 1\n  })\n  .on('change', ({ value }) => {\n    wallpaper.updateFrametime(value!)\n  })\n\nconst colorsList = tweakpane\n  .addBlade({\n    view: 'list',\n    label: 'colors',\n    value: 'Default',\n    options: Object.keys(colors).map((text) => {\n      return {\n        text,\n        value: text\n      }\n    })\n  }) as ListApi<keyof typeof colors>\n\ncolorsList\n  .on('change', ({ value }) => {\n    options.colors = colors[value]\n    wallpaper.init(options)\n  })\n\ntweakpane\n  .addInput(options, 'animate')\n  .on('change', ({ value }) => {\n    wallpaper.animate(value!)\n  })\n\ntweakpane\n  .addInput(options, 'scrollAnimate')\n  .on('change', ({ value }) => {\n    wallpaper.scrollAnimate(value!)\n  })\n\nconst patternFolder = tweakpane\n  .addFolder({\n    title: 'Pattern'\n  })\n\npatternFolder\n  .on('fold', ({ expanded }) => {\n    options.pattern = expanded ? patterns[0].path : undefined\n    wallpaper.init(options)\n  })\n\npatternFolder\n  .addInput(options, 'blur', {\n    min: 0,\n    max: 5,\n    step: 0.1\n  })\n  .on('change', ({ value }) => {\n    options.blur = Number(value!.toFixed(1))\n    wallpaper.updateBlur(value!)\n  })\n\npatternFolder\n  .addInput(options, 'opacity', {\n    min: 0,\n    max: 1,\n    step: 0.1\n  })\n  .on('change', ({ value }) => {\n    options.opacity = Number(value!.toFixed(1))\n    wallpaper.updateOpacity(value!)\n  })\n\nconst patternsList = patternFolder\n  .addBlade({\n    view: 'list',\n    value: patterns[0].path,\n    options: patterns.map(({ path, text }) => {\n      return {\n        text,\n        value: path\n      }\n    })\n  }) as ListApi<string>\n\npatternsList\n  .on('change', ({ value }) => {\n    options.pattern = value\n    wallpaper.init(options)\n  })\n\ntweakpane\n  .addButton({ title: 'Reset' })\n  .on('click', () => {\n    Object.assign(options, copyOptions)\n    patternsList.value = patterns[0].path\n    patternFolder.expanded = true\n    tweakpane.refresh()\n    wallpaper.init(options)\n  })\n\ntweakpane\n  .addButton({ title: 'Export' })\n  .on('click', () => {\n    const blob = new Blob(\n      [JSON.stringify(options, void 0, 2)],\n      { type: 'text/plain' }\n    )\n\n    const link = document.createElement('a')\n    link.href = URL.createObjectURL(blob)\n    link.download = 'telegram-wallpaper-options.json'\n    link.click()\n    link.remove()\n  })\n\nconsole.log(wallpaper)\nconsole.log(tweakpane)\n"],"names":["global","factory","$c398a0ea03e027b6$exports","exports","BladeApi","controller","this","controller_","disabled","viewProps","get","set","hidden","dispose","TpEvent","target","TpChangeEvent","value","presetKey","last","super","TpUpdateEvent","TpFoldEvent","expanded","isEmpty","deepEqualsArray","a1","a2","length","i","CREATE_MESSAGE_MAP","alreadydisposed","invalidparams","context","name","nomatchingcontroller","key","nomatchingview","JSON","stringify","params","notbindable","propertynotfound","shouldneverhappen","TpError","config","_a","message","type","constructor","stack","Error","BindingTarget","obj","opt_id","obj_","key_","presetKey_","read","write","writeProperty","valueObj","isBindable","notBindable","propertyNotFound","ButtonApi","label","props","title","valueController","on","eventName","handler","bh","bind","emitter","Emitter","observers_","observers","push","off","filter","observer","emit","event","forEach","PREFIX","ClassName","viewName","opt_elementName","opt_modifier","join","extractValue","ev","rawValue","bindValue","applyValue","h1","h2","input","bindValueMap","valueMap","valueToClassName","elem","className","active","classList","add","remove","applyClass","bindValueToTextContent","text","textContent","className$q","ButtonView","doc","element","createElement","bindClassModifiers","buttonElem","bindDisabled","appendChild","buttonElement","titleElem","ButtonController","onClick_","view","addEventListener","sender","BoundValue","initialValue","constraint_","constraint","equals_","equals","v1","v2","rawValue_","setRawValue","forceEmit","options","opts","constrainedValue","constrain","PrimitiveValue","value_","createValue","ValueMap","valMap_","Object","keys","reduce","o","assign","core","createCore","createParamsParserBuilder","parse","optional","v","undefined","succeeded","result","createParamsParserBuilders","custom","boolean","number","string","function","constant","raw","object","keyToParserMap","tmp","parser","parseObject","array","itemParser","parseItem","Array","isArray","item","ParamsParsers","required","parseParams","className$p","POS_TO_CLASS_NAME_MAP","veryfirst","first","verylast","BladeController","parent_","blade","pos","handleDispose","parentElement","removeChild","disposeElement","parent","SVG_NS","forceReflow","offsetHeight","supportsTouch","ontouchstart","getWindowDocument","Function","document","ICON_ID_TO_INNER_HTML_MAP","check","dropdown","p2dpad","createSvgIconElement","iconId","createElementNS","innerHTML","insertElementAt","index","insertBefore","children","removeElement","removeChildElements","findNextTarget","relatedTarget","explicitOriginalTarget","className$o","LabelView","labelElem","childNodes","removeChildNodes","frag","createDocumentFragment","split","map","line","createTextNode","lineNode","createLabelNode","labelElement","valueElem","valueElement","LabelController","ButtonBladePlugin","id","accept","p","args","fromObject","api","ValueBladeController","createBlade","positions","Foldable","coreObj","completed","expandedHeight","shouldFixHeight","temporaryExpanded","styleExpanded","styleHeight","exHeight","bindExpandedClass","expandedClassName","applyHeight","foldable","style","height","bindFoldable","folder","containerElement","callback","t","transition","disableTransitionTemporarily","clientHeight","computeExpandedFolderHeight","propertyName","RackLikeApi","rackApi","rackApi_","NestedOrderedSet","extract","items_","cache_","Set","onSubListAdd_","onSubListRemove_","extract_","items","allItems","from","find","includes","has","item1","opt_index","shouldNeverHappen","splice","subList","root","indexOf","delete","InputBindingApi","onBindingChange_","emitter_","binding","refresh","InputBindingController","MonitorBindingApi","onBindingUpdate_","MonitorBindingController","ticker","findSubBladeApiSet","RackApi","getApiByController","apiSet","api1","createBindingTarget","pool","onRackAdd_","onRackRemove_","onRackInputChange_","onRackMonitorUpdate_","apiSet_","pool_","rack","bc","setUpApi_","addInput","opt_params","ownerDocument","createInput","addMonitor","createMonitor","addFolder","addBlade","addFolderAsBlade","addButton","addButtonAsBlade","addSeparator","addSeparatorAsBlade","addTab","addTabAsBlade","gapi","a","createBladeApi","bladeController","isRoot","FolderApi","rackController","RackLikeController","PlainView","findSubRack","RackController","findSubBladeControllerSet","BladeRack","onBladePositionsChange_","onSetAdd_","onSetRemove_","onChildDispose_","onChildPositionsChange_","onChildInputChange_","onChildMonitorUpdate_","onChildValueChange_","onChildViewPropsChange_","onDescendantLayout_","onDescendantInputChange_","onDescendantMonitorUpdate_","blade_","bcSet_","controllerClass","updatePositions_","visibleItems","firstVisibleItem","lastVisibleItem","ps","_ev","bcs","b","findInputBindingController","findMonitorBindingController","findValueBladeController","_","bladeContainerClassName","FolderView","className_","foldable_","titleElement","markElem","containerElem","FolderController","create","rc","onTitleClick_","FolderBladePlugin","LabeledValueController","SeparatorApi","className$n","SeparatorView","hrElem","SeparatorController","SeparatorBladePlugin","className$m","valueToModifier","modifier","ViewProps","opt_initialValue","_b","disposed","bindTabIndex","tabIndex","className$l","TabItemView","selected","TabItemController","TabPageController","onItemClick_","ic_","itemProps","cc_","itemController","contentController","TabPageApi","contentRackApi","TabApi","onPageAdd_","onPageRemove_","pageApiMap_","Map","pageSet","pc","setUpPageApi_","pages","addPage","removePage","api3","className$k","TabView","empty","itemsElem","itemsElement","contentsElem","contentsElement","TabController","cr","onPageSelectedChange_","pageSet_","empty_","applyPages_","keepSelection_","firstSelIndex","findIndex","TabBladePlugin","c","ManualTicker","tick","IntervalTicker","interval","disabled_","timerId_","onTick_","doc_","interval_","setTimer_","inactive","clearTimer_","win","defaultView","clearInterval","setInterval","CompositeConstraint","constraints","findConstraint","constraintClass","tmpResult","sc","ListConstraint","RangeConstraint","maxValue","max","minValue","min","Math","StepConstraint","step","round","className$j","ListView","onValueChange_","props_","selectElem","optionElem","dataset","String","selectElement","update_","ListController","onSelectChange_","e","optElem","currentTarget","selectedOptions","itemIndex","Number","className$i","PopupView","shows","PopupController","className$h","TextView","onChange_","inputElem","inputElement","formatter","TextController","onInputChange_","parser_","parsedValue","boolFromUnknown","BooleanFormatter","boolToString","NumberLiteralNode","evaluate","toString","BINARY_OPERATION_MAP","pow","BinaryOperationNode","operator","left","right","op","UNARY_OPERATION_MAP","UnaryOperationNode","expr","expression","combineReader","parsers","cursor","readWhitespace","m","substr","match","readDecimalDigits","readExponentPart","toLowerCase","si","ds","sign","sds","readSignedInteger","readDecimalIntegerLiteral","ch","nzd","readNonZeroDigit","readDecimalLiteral","dil","dot","dds","readNonDecimalIntegerLiteral","prefix","bds","parseBinaryDigits","ods","readOctalDigits","hds","readHexDigits","readNumericLiteral","parsePrimaryExpression","num","evaluable","parseLiteral","parseExpression","cl","parseParenthesizedExpression","readBinaryOperator","ops","op1","startsWith","parseBinaryOperationExpression","exprParser","firstExpr","nextExpr","createBinaryOperationExpressionParser","parseUnaryExpression","parseNumber","r","parseEcmaNumberExpression","numberFromUnknown","pv","numberToString","createNumberFormatter","digits","toFixed","innerFormatter","formatPercentage","stringFromUnknown","formatString","fillBuffer","buffer","bufferSize","initializeBuffer","createTrimmedBuffer","slice","connectValues","primary","secondary","forward","backward","changing","preventFeedback","getStepForKey","baseStep","altKey","shiftKey","upKey","downKey","getVerticalStepKeys","getHorizontalStepKeys","isArrowKey","isVerticalArrowKey","computeOffset$1","rect","getBoundingClientRect","x","pageX","scrollX","y","pageY","scrollY","top","PointerHandler","lastTouch_","onDocumentMouseMove_","onDocumentMouseUp_","onMouseDown_","onTouchEnd_","onTouchMove_","onTouchStart_","elem_","passive","computePosition_","offset","bounds","width","point","preventDefault","focus","data","removeEventListener","touch","targetTouches","clientX","clientY","mapRange","start1","end1","start2","end2","getDecimalDigits","replace","constrainRange","loopRange","className$g","NumberTextView","arrayPosition","onDraggingChange_","dragging_","dragging","knobElem","knobElement","guideElem","bodyElem","guideBodyElem_","headElem","guideHeadElem_","tooltipElem","tooltipElem_","aox","adx","setAttributeNS","NumberTextController","originRawValue_","onInputKeyDown_","onInputKeyUp_","onPointerDown_","onPointerMove_","onPointerUp_","baseStep_","ph","computeDraggingValue_","dx","className$f","SliderView","trackElem","trackElement","SliderController","onKeyDown_","onKeyUp_","onPointerDownOrMove_","ptHandler_","handlePointerEvent_","d","className$e","SliderTextView","sliderElem","sliderView_","sliderView","textElem","textView_","textView","SliderTextController","sliderC_","sliderProps","textC_","textProps","sliderController","textController","writePrimitive","parseListOptions","parsePickerLayout","parsePointDimensionParams","normalizeListOptions","createListConstraint","findListItems","getSuitableDecimalDigits","getBaseStep","findStep","getSuitableDraggingScale","base","abs","floor","log10","className$d","CheckboxView","wrapperElem","checked","CheckboxController","BooleanInputPlugin","reader","_args","lc","createConstraint$5","writer","className$c","ColorView","swatchElem","swatchElement","textElement","pickerLayout","pickerElem","pickerElement","hsvToRgb","h","s","hp","sp","vp","rp","gp","bp","removeAlphaComponent","comps","appendAlphaComponent","alpha","MODE_CONVERTER_MAP","hsl","l","hsv","sd","rgb","lp","g","cmax","cmin","CONSTRAINT_MAP","isRgbColorComponent","Color","mode","mode_","comps_","color","toRgbaObject","isRgbColorObject","comps1","comps2","getComponents","opt_mode","components","fromMode","toMode","rgbComps","className$b","ColorPickerView","alphaViews_","hsvElem","svElem","svPaletteView_","svPaletteView","hElem","hPaletteView_","hPaletteView","rgbElem","alphaViews","palette","aElem","apElem","atElem","allFocusableElements","elems","modeSelectElement","textViews","parseColorInputParams","picker","getBaseStepForColor","forAlpha","parseCssNumberOrPercentage","parseFloat","ANGLE_TO_DEG_MAP","deg","angle","grad","rad","PI","turn","parseCssNumberOrAngle","unit","NOTATION_TO_PARSER_MAP","isNaN","mRgb","parseInt","mRrggbb","getColorNotation","notation","subparser","CompositeColorParser","hasAlphaComponent","colorFromString","cv","black","zerofill","comp","hex","colorToHexRgbString","colorToHexRgbaString","rgbaComps","colorToFunctionalRgbString","colorToFunctionalRgbaString","aFormatter","rgbFormatter","NOTATION_TO_STRINGIFIER_MAP","formatters","getColorStringifier","className$a","APaletteView","barElem","colorElem","colorElem_","markerElem","markerElem_","previewElem","previewElem_","leftColor","rightColor","gradientComps","background","backgroundColor","APaletteController","className$9","ColorTextView","modeElem","modeElem_","createModeSelectElement","modeMarkerElem","textsElem","textsElem_","textViews_","applyTextViews_","colorMode","compElem","FORMATTER","MODE_TO_CONSTRAINT_MAP","createComponentController","draggingScale","ColorTextController","onModeSelectChange_","ccs_","createComponentControllers_","cc","ccs","cs","pickedMode","className$8","HPaletteView","HPaletteController","hue","className$7","SvPaletteView","canvasElem","canvasElement","ctx","getContext","getCanvasContext","hsvComps","imgData","getImageData","iy","ix","putImageData","SvPaletteController","saturation","dv","ColorPickerController","hPaletteC_","svPaletteC_","alphaIcs_","supportsAlpha","className$6","ColorSwatchView","swatchElem_","ColorSwatchController","ColorController","onButtonBlur_","onButtonClick_","onPopupChildBlur_","onPopupChildKeydown_","swatchC_","popC_","pickerC","pickerC_","nextTarget","contains","colorFromObject","isColorObject","colorToRgbNumber","colorToRgbaNumber","colorFromRgbNumber","colorFromRgbaNumber","writeRgbaColorObject","writeRgbColorObject","shouldSupportAlpha$1","inputParams","createFormatter$1","NumberColorInputPlugin","colorToNumber","createColorNumberWriter","ObjectColorInputPlugin","createColorObjectWriter","isRgbaColorObject","StringColorInputPlugin","createColorStringWriter","stringifier","PointNdConstraint","asm_","assembly","toComponents","fromComponents","className$5","PointNdTextView","axisElem","PointNdTextController","acs_","axes","createAxisController","ac","createConstraint$4","createStepConstraint","createRangeConstraint","estimateSuitableRange","findRange","NumberInputPlugin","format","Point2d","toObject","Point2dAssembly","className$4","Point2dView","className$3","Point2dPickerView","onFoldableChange_","invertsY_","invertsY","maxValue_","layout","padElem","padElement","svgElem","svgElem_","xAxisElem","yAxisElem","lineElem","lineElem_","px","py","ipy","computeOffset","baseSteps","Point2dPickerController","onPadKeyDown_","onPadKeyUp_","baseSteps_","dy","Point2dController","onPadButtonBlur_","onPadButtonClick_","padC","point2dFromUnknown","isObject","writePoint2d","createDimensionConstraint$2","getSuitableMaxDimensionValue","getSuitableMaxValue","xc","yc","xr","yr","createAxis$2","shouldInvertY","yParams","inverted","Point2dInputPlugin","createConstraint$3","Point3d","z","Point3dAssembly","point3dFromUnknown","writePoint3d","createDimensionConstraint$1","createAxis$1","Point3dInputPlugin","createConstraint$2","Point4d","w","Point4dAssembly","point4dFromUnknown","writePoint4d","createDimensionConstraint","Point4dInputPlugin","createConstraint$1","createAxis","StringInputPlugin","createConstraint","Constants","defaultInterval","defaultLineCount","className$2","MultiLogView","onValueUpdate_","formatter_","textareaElem","lineCount","readOnly","textareaElem_","shouldScroll","scrollTop","scrollHeight","lines","MultiLogController","className$1","SingleLogView","values","lastValue","SingleLogController","BooleanMonitorPlugin","GraphCursor","index_","className1","GraphLogView","onCursorChange_","minValue_","cursor_","graphElement","maxIndex","points","tx","ty","GraphLogController","onGraphMouseMove_","onGraphMouseLeave_","onGraphPointerDown_","onGraphPointerMove_","onGraphPointerUp_","offsetX","createFormatter","shouldShowGraph","NumberMonitorPlugin","defaultBufferSize","_c","createGraphMonitor","createTextMonitor","StringMonitorPlugin","multiline","InputBinding","targetValue","write_","MonitorBinding","reader_","newValue","newBuffer","createPushedBuffer","createTicker","PluginPool","pluginsMap_","blades","inputs","monitors","getAll","register","unshift","plugin","valueArgs","createInputBindingController","P","bindingArgs","createMonitorBindingController","createBladeController","ListApi","SliderApi","TextApi","ListBladePlugin","ic","RootApi","importPreset","preset","targets","importPresetJson","ibc","exportPreset","exportPresetJson","mbc","RootController","SliderBladePlugin","vc","TextBladePlugin","embedStyle","css","querySelector","styleElem","tpStyle","head","VERSION","prerelease","coreComps","major","minor","patch","Pane","opt_config","createDefaultPluginPool","containerElem_","container","body","createDefaultWrapperElement","usesDefaultWrapper_","setUpDefaultPlugins_","alreadyDisposed","parentElem","registerPlugin","bundle","plugins","embedPluginStyle_","defineProperty","define","amd","globalThis","self","Tweakpane","$d5b54a10567db1c4$var$curve","$d5b54a10567db1c4$var$positions","$d5b54a10567db1c4$export$2e2bcd8739ae039","fps","blur","colors","pattern","opacity","animate","scrollAnimate","phase","tail","tails","scrolltails","timestamp","frametime","scrollDelta","scrollTicking","frames","curve","phases","init","updateFrametime","hexToRgb","exec","getPositions","shift","curPosition","next_pos","d1x","d1y","d2x","d2y","d3x","d3y","d4x","d4y","changeTail","diff","onWheel","deltaY","requestAnimationFrame","drawOnWheel","ceil","curPos","drawGradient","drawNextPositionAnimated","drawImageData","getGradientImageData","hctx","createImageData","pixels","centerDistanceY","centerDistanceY2","centerDistanceX","swirlFactor","sqrt","theta","sinTheta","sin","cosTheta","cos","pixelX","pixelY","distanceSum","distanceX","distanceY","distance","drawImage","hc","doAnimate","now","Date","hasFocus","raf","cur_pos","canvas","updateBlur","updatePattern","updateOpacity","update","path","backgroundImage","toNextPosition","prev_pos","frame","start","cancelAnimationFrame","onwheel","$b4e14b6b8da86996$var$colors","Default","Amethyst","Calico","Cashmere","Cheerfulness","France","Malibu","Perfume","Santa","Spindle","Viola","Wewak","$b4e14b6b8da86996$var$patternPath","location","href","$b4e14b6b8da86996$var$patterns","$b4e14b6b8da86996$var$container","$b4e14b6b8da86996$var$options","$b4e14b6b8da86996$var$copyOptions","$b4e14b6b8da86996$var$wallpaper","$b4e14b6b8da86996$var$tweakpane","$b4e14b6b8da86996$var$patternFolder","$b4e14b6b8da86996$var$patternsList","blob","Blob","link","URL","createObjectURL","download","click","console","log"],"version":3,"file":"index.db80850b.js.map"}